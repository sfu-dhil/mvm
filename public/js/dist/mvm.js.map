{"version":3,"file":"js/dist/mvm.js","mappings":"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","sources":["webpack://mvm/./node_modules/tom-select/dist/js/tom-select.complete.js","webpack://mvm/webpack/bootstrap","webpack://mvm/webpack/runtime/compat get default export","webpack://mvm/webpack/runtime/define property getters","webpack://mvm/webpack/runtime/hasOwnProperty shorthand","webpack://mvm/./node_modules/dhilux/js/modals.bundle.js","webpack://mvm/./node_modules/dhilux/js/a11y_tables.js","webpack://mvm/./node_modules/dhilux/js/accordion.js","webpack://mvm/./node_modules/ssr-window/ssr-window.esm.js","webpack://mvm/./node_modules/dom7/dom7.esm.js","webpack://mvm/./node_modules/swiper/shared/dom.js","webpack://mvm/./node_modules/swiper/shared/utils.js","webpack://mvm/./node_modules/swiper/shared/get-support.js","webpack://mvm/./node_modules/swiper/shared/get-device.js","webpack://mvm/./node_modules/swiper/shared/get-browser.js","webpack://mvm/./node_modules/swiper/core/events-emitter.js","webpack://mvm/./node_modules/swiper/core/update/index.js","webpack://mvm/./node_modules/swiper/core/update/updateSize.js","webpack://mvm/./node_modules/swiper/core/update/updateSlides.js","webpack://mvm/./node_modules/swiper/core/update/updateAutoHeight.js","webpack://mvm/./node_modules/swiper/core/update/updateSlidesOffset.js","webpack://mvm/./node_modules/swiper/core/update/updateSlidesProgress.js","webpack://mvm/./node_modules/swiper/core/update/updateProgress.js","webpack://mvm/./node_modules/swiper/core/update/updateSlidesClasses.js","webpack://mvm/./node_modules/swiper/core/update/updateActiveIndex.js","webpack://mvm/./node_modules/swiper/core/update/updateClickedSlide.js","webpack://mvm/./node_modules/swiper/core/transition/transitionEmit.js","webpack://mvm/./node_modules/swiper/core/slide/index.js","webpack://mvm/./node_modules/swiper/core/slide/slideTo.js","webpack://mvm/./node_modules/swiper/core/slide/slideToLoop.js","webpack://mvm/./node_modules/swiper/core/slide/slideNext.js","webpack://mvm/./node_modules/swiper/core/slide/slidePrev.js","webpack://mvm/./node_modules/swiper/core/slide/slideReset.js","webpack://mvm/./node_modules/swiper/core/slide/slideToClosest.js","webpack://mvm/./node_modules/swiper/core/slide/slideToClickedSlide.js","webpack://mvm/./node_modules/swiper/core/loop/index.js","webpack://mvm/./node_modules/swiper/core/loop/loopCreate.js","webpack://mvm/./node_modules/swiper/core/loop/loopFix.js","webpack://mvm/./node_modules/swiper/core/loop/loopDestroy.js","webpack://mvm/./node_modules/swiper/core/events/onTouchStart.js","webpack://mvm/./node_modules/swiper/core/events/onTouchMove.js","webpack://mvm/./node_modules/swiper/core/events/onTouchEnd.js","webpack://mvm/./node_modules/swiper/core/events/onResize.js","webpack://mvm/./node_modules/swiper/core/events/onClick.js","webpack://mvm/./node_modules/swiper/core/events/onScroll.js","webpack://mvm/./node_modules/swiper/core/events/index.js","webpack://mvm/./node_modules/swiper/core/breakpoints/setBreakpoint.js","webpack://mvm/./node_modules/swiper/core/classes/index.js","webpack://mvm/./node_modules/swiper/core/classes/addClasses.js","webpack://mvm/./node_modules/swiper/core/classes/removeClasses.js","webpack://mvm/./node_modules/swiper/core/defaults.js","webpack://mvm/./node_modules/swiper/core/moduleExtendParams.js","webpack://mvm/./node_modules/swiper/core/core.js","webpack://mvm/./node_modules/swiper/core/translate/index.js","webpack://mvm/./node_modules/swiper/core/translate/getTranslate.js","webpack://mvm/./node_modules/swiper/core/translate/setTranslate.js","webpack://mvm/./node_modules/swiper/core/translate/minTranslate.js","webpack://mvm/./node_modules/swiper/core/translate/maxTranslate.js","webpack://mvm/./node_modules/swiper/core/translate/translateTo.js","webpack://mvm/./node_modules/swiper/core/transition/index.js","webpack://mvm/./node_modules/swiper/core/transition/setTransition.js","webpack://mvm/./node_modules/swiper/core/transition/transitionStart.js","webpack://mvm/./node_modules/swiper/core/transition/transitionEnd.js","webpack://mvm/./node_modules/swiper/core/grab-cursor/index.js","webpack://mvm/./node_modules/swiper/core/grab-cursor/setGrabCursor.js","webpack://mvm/./node_modules/swiper/core/grab-cursor/unsetGrabCursor.js","webpack://mvm/./node_modules/swiper/core/breakpoints/index.js","webpack://mvm/./node_modules/swiper/core/breakpoints/getBreakpoint.js","webpack://mvm/./node_modules/swiper/core/check-overflow/index.js","webpack://mvm/./node_modules/swiper/core/images/index.js","webpack://mvm/./node_modules/swiper/core/images/loadImage.js","webpack://mvm/./node_modules/swiper/core/images/preloadImages.js","webpack://mvm/./node_modules/swiper/core/modules/resize/resize.js","webpack://mvm/./node_modules/swiper/core/modules/observer/observer.js","webpack://mvm/./node_modules/swiper/modules/navigation/navigation.js","webpack://mvm/./node_modules/swiper/shared/create-element-if-not-defined.js","webpack://mvm/./js/mvm.js"],"sourcesContent":["/**\n* Tom Select v2.3.0\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n*/\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.TomSelect = factory());\n})(this, (function () { 'use strict';\n\n\t/**\n\t * MicroEvent - to make any js object an event emitter\n\t *\n\t * - pure javascript - server compatible, browser compatible\n\t * - dont rely on the browser doms\n\t * - super simple - you get it immediatly, no mistery, no magic involved\n\t *\n\t * @author Jerome Etienne (https://github.com/jeromeetienne)\n\t */\n\n\t/**\n\t * Execute callback for each event in space separated list of event names\n\t *\n\t */\n\tfunction forEvents(events, callback) {\n\t  events.split(/\\s+/).forEach(event => {\n\t    callback(event);\n\t  });\n\t}\n\tclass MicroEvent {\n\t  constructor() {\n\t    this._events = void 0;\n\t    this._events = {};\n\t  }\n\t  on(events, fct) {\n\t    forEvents(events, event => {\n\t      const event_array = this._events[event] || [];\n\t      event_array.push(fct);\n\t      this._events[event] = event_array;\n\t    });\n\t  }\n\t  off(events, fct) {\n\t    var n = arguments.length;\n\t    if (n === 0) {\n\t      this._events = {};\n\t      return;\n\t    }\n\t    forEvents(events, event => {\n\t      if (n === 1) {\n\t        delete this._events[event];\n\t        return;\n\t      }\n\t      const event_array = this._events[event];\n\t      if (event_array === undefined) return;\n\t      event_array.splice(event_array.indexOf(fct), 1);\n\t      this._events[event] = event_array;\n\t    });\n\t  }\n\t  trigger(events, ...args) {\n\t    var self = this;\n\t    forEvents(events, event => {\n\t      const event_array = self._events[event];\n\t      if (event_array === undefined) return;\n\t      event_array.forEach(fct => {\n\t        fct.apply(self, args);\n\t      });\n\t    });\n\t  }\n\t}\n\n\t/**\n\t * microplugin.js\n\t * Copyright (c) 2013 Brian Reavis & contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t * @author Brian Reavis <brian@thirdroute.com>\n\t */\n\n\tfunction MicroPlugin(Interface) {\n\t  Interface.plugins = {};\n\t  return class extends Interface {\n\t    constructor(...args) {\n\t      super(...args);\n\t      this.plugins = {\n\t        names: [],\n\t        settings: {},\n\t        requested: {},\n\t        loaded: {}\n\t      };\n\t    }\n\t    /**\n\t     * Registers a plugin.\n\t     *\n\t     * @param {function} fn\n\t     */\n\t    static define(name, fn) {\n\t      Interface.plugins[name] = {\n\t        'name': name,\n\t        'fn': fn\n\t      };\n\t    }\n\n\t    /**\n\t     * Initializes the listed plugins (with options).\n\t     * Acceptable formats:\n\t     *\n\t     * List (without options):\n\t     *   ['a', 'b', 'c']\n\t     *\n\t     * List (with options):\n\t     *   [{'name': 'a', options: {}}, {'name': 'b', options: {}}]\n\t     *\n\t     * Hash (with options):\n\t     *   {'a': { ... }, 'b': { ... }, 'c': { ... }}\n\t     *\n\t     * @param {array|object} plugins\n\t     */\n\t    initializePlugins(plugins) {\n\t      var key, name;\n\t      const self = this;\n\t      const queue = [];\n\t      if (Array.isArray(plugins)) {\n\t        plugins.forEach(plugin => {\n\t          if (typeof plugin === 'string') {\n\t            queue.push(plugin);\n\t          } else {\n\t            self.plugins.settings[plugin.name] = plugin.options;\n\t            queue.push(plugin.name);\n\t          }\n\t        });\n\t      } else if (plugins) {\n\t        for (key in plugins) {\n\t          if (plugins.hasOwnProperty(key)) {\n\t            self.plugins.settings[key] = plugins[key];\n\t            queue.push(key);\n\t          }\n\t        }\n\t      }\n\t      while (name = queue.shift()) {\n\t        self.require(name);\n\t      }\n\t    }\n\t    loadPlugin(name) {\n\t      var self = this;\n\t      var plugins = self.plugins;\n\t      var plugin = Interface.plugins[name];\n\t      if (!Interface.plugins.hasOwnProperty(name)) {\n\t        throw new Error('Unable to find \"' + name + '\" plugin');\n\t      }\n\t      plugins.requested[name] = true;\n\t      plugins.loaded[name] = plugin.fn.apply(self, [self.plugins.settings[name] || {}]);\n\t      plugins.names.push(name);\n\t    }\n\n\t    /**\n\t     * Initializes a plugin.\n\t     *\n\t     */\n\t    require(name) {\n\t      var self = this;\n\t      var plugins = self.plugins;\n\t      if (!self.plugins.loaded.hasOwnProperty(name)) {\n\t        if (plugins.requested[name]) {\n\t          throw new Error('Plugin has circular dependency (\"' + name + '\")');\n\t        }\n\t        self.loadPlugin(name);\n\t      }\n\t      return plugins.loaded[name];\n\t    }\n\t  };\n\t}\n\n\t/*! @orchidjs/unicode-variants | https://github.com/orchidjs/unicode-variants | Apache License (v2) */\n\t/**\n\t * Convert array of strings to a regular expression\n\t *\tex ['ab','a'] => (?:ab|a)\n\t * \tex ['a','b'] => [ab]\n\t * @param {string[]} chars\n\t * @return {string}\n\t */\n\tconst arrayToPattern = chars => {\n\t  chars = chars.filter(Boolean);\n\n\t  if (chars.length < 2) {\n\t    return chars[0] || '';\n\t  }\n\n\t  return maxValueLength(chars) == 1 ? '[' + chars.join('') + ']' : '(?:' + chars.join('|') + ')';\n\t};\n\t/**\n\t * @param {string[]} array\n\t * @return {string}\n\t */\n\n\tconst sequencePattern = array => {\n\t  if (!hasDuplicates(array)) {\n\t    return array.join('');\n\t  }\n\n\t  let pattern = '';\n\t  let prev_char_count = 0;\n\n\t  const prev_pattern = () => {\n\t    if (prev_char_count > 1) {\n\t      pattern += '{' + prev_char_count + '}';\n\t    }\n\t  };\n\n\t  array.forEach((char, i) => {\n\t    if (char === array[i - 1]) {\n\t      prev_char_count++;\n\t      return;\n\t    }\n\n\t    prev_pattern();\n\t    pattern += char;\n\t    prev_char_count = 1;\n\t  });\n\t  prev_pattern();\n\t  return pattern;\n\t};\n\t/**\n\t * Convert array of strings to a regular expression\n\t *\tex ['ab','a'] => (?:ab|a)\n\t * \tex ['a','b'] => [ab]\n\t * @param {Set<string>} chars\n\t * @return {string}\n\t */\n\n\tconst setToPattern = chars => {\n\t  let array = toArray(chars);\n\t  return arrayToPattern(array);\n\t};\n\t/**\n\t *\n\t * https://stackoverflow.com/questions/7376598/in-javascript-how-do-i-check-if-an-array-has-duplicate-values\n\t * @param {any[]} array\n\t */\n\n\tconst hasDuplicates = array => {\n\t  return new Set(array).size !== array.length;\n\t};\n\t/**\n\t * https://stackoverflow.com/questions/63006601/why-does-u-throw-an-invalid-escape-error\n\t * @param {string} str\n\t * @return {string}\n\t */\n\n\tconst escape_regex = str => {\n\t  return (str + '').replace(/([\\$\\(\\)\\*\\+\\.\\?\\[\\]\\^\\{\\|\\}\\\\])/gu, '\\\\$1');\n\t};\n\t/**\n\t * Return the max length of array values\n\t * @param {string[]} array\n\t *\n\t */\n\n\tconst maxValueLength = array => {\n\t  return array.reduce((longest, value) => Math.max(longest, unicodeLength(value)), 0);\n\t};\n\t/**\n\t * @param {string} str\n\t */\n\n\tconst unicodeLength = str => {\n\t  return toArray(str).length;\n\t};\n\t/**\n\t * @param {any} p\n\t * @return {any[]}\n\t */\n\n\tconst toArray = p => Array.from(p);\n\n\t/*! @orchidjs/unicode-variants | https://github.com/orchidjs/unicode-variants | Apache License (v2) */\n\t/**\n\t * Get all possible combinations of substrings that add up to the given string\n\t * https://stackoverflow.com/questions/30169587/find-all-the-combination-of-substrings-that-add-up-to-the-given-string\n\t * @param {string} input\n\t * @return {string[][]}\n\t */\n\tconst allSubstrings = input => {\n\t  if (input.length === 1) return [[input]];\n\t  /** @type {string[][]} */\n\n\t  let result = [];\n\t  const start = input.substring(1);\n\t  const suba = allSubstrings(start);\n\t  suba.forEach(function (subresult) {\n\t    let tmp = subresult.slice(0);\n\t    tmp[0] = input.charAt(0) + tmp[0];\n\t    result.push(tmp);\n\t    tmp = subresult.slice(0);\n\t    tmp.unshift(input.charAt(0));\n\t    result.push(tmp);\n\t  });\n\t  return result;\n\t};\n\n\t/*! @orchidjs/unicode-variants | https://github.com/orchidjs/unicode-variants | Apache License (v2) */\n\n\t/**\n\t * @typedef {{[key:string]:string}} TUnicodeMap\n\t * @typedef {{[key:string]:Set<string>}} TUnicodeSets\n\t * @typedef {[[number,number]]} TCodePoints\n\t * @typedef {{folded:string,composed:string,code_point:number}} TCodePointObj\n\t * @typedef {{start:number,end:number,length:number,substr:string}} TSequencePart\n\t */\n\t/** @type {TCodePoints} */\n\n\tconst code_points = [[0, 65535]];\n\tconst accent_pat = '[\\u0300-\\u036F\\u{b7}\\u{2be}\\u{2bc}]';\n\t/** @type {TUnicodeMap} */\n\n\tlet unicode_map;\n\t/** @type {RegExp} */\n\n\tlet multi_char_reg;\n\tconst max_char_length = 3;\n\t/** @type {TUnicodeMap} */\n\n\tconst latin_convert = {};\n\t/** @type {TUnicodeMap} */\n\n\tconst latin_condensed = {\n\t  '/': '⁄∕',\n\t  '0': '߀',\n\t  \"a\": \"ⱥɐɑ\",\n\t  \"aa\": \"ꜳ\",\n\t  \"ae\": \"æǽǣ\",\n\t  \"ao\": \"ꜵ\",\n\t  \"au\": \"ꜷ\",\n\t  \"av\": \"ꜹꜻ\",\n\t  \"ay\": \"ꜽ\",\n\t  \"b\": \"ƀɓƃ\",\n\t  \"c\": \"ꜿƈȼↄ\",\n\t  \"d\": \"đɗɖᴅƌꮷԁɦ\",\n\t  \"e\": \"ɛǝᴇɇ\",\n\t  \"f\": \"ꝼƒ\",\n\t  \"g\": \"ǥɠꞡᵹꝿɢ\",\n\t  \"h\": \"ħⱨⱶɥ\",\n\t  \"i\": \"ɨı\",\n\t  \"j\": \"ɉȷ\",\n\t  \"k\": \"ƙⱪꝁꝃꝅꞣ\",\n\t  \"l\": \"łƚɫⱡꝉꝇꞁɭ\",\n\t  \"m\": \"ɱɯϻ\",\n\t  \"n\": \"ꞥƞɲꞑᴎлԉ\",\n\t  \"o\": \"øǿɔɵꝋꝍᴑ\",\n\t  \"oe\": \"œ\",\n\t  \"oi\": \"ƣ\",\n\t  \"oo\": \"ꝏ\",\n\t  \"ou\": \"ȣ\",\n\t  \"p\": \"ƥᵽꝑꝓꝕρ\",\n\t  \"q\": \"ꝗꝙɋ\",\n\t  \"r\": \"ɍɽꝛꞧꞃ\",\n\t  \"s\": \"ßȿꞩꞅʂ\",\n\t  \"t\": \"ŧƭʈⱦꞇ\",\n\t  \"th\": \"þ\",\n\t  \"tz\": \"ꜩ\",\n\t  \"u\": \"ʉ\",\n\t  \"v\": \"ʋꝟʌ\",\n\t  \"vy\": \"ꝡ\",\n\t  \"w\": \"ⱳ\",\n\t  \"y\": \"ƴɏỿ\",\n\t  \"z\": \"ƶȥɀⱬꝣ\",\n\t  \"hv\": \"ƕ\"\n\t};\n\n\tfor (let latin in latin_condensed) {\n\t  let unicode = latin_condensed[latin] || '';\n\n\t  for (let i = 0; i < unicode.length; i++) {\n\t    let char = unicode.substring(i, i + 1);\n\t    latin_convert[char] = latin;\n\t  }\n\t}\n\n\tconst convert_pat = new RegExp(Object.keys(latin_convert).join('|') + '|' + accent_pat, 'gu');\n\t/**\n\t * Initialize the unicode_map from the give code point ranges\n\t *\n\t * @param {TCodePoints=} _code_points\n\t */\n\n\tconst initialize = _code_points => {\n\t  if (unicode_map !== undefined) return;\n\t  unicode_map = generateMap(_code_points || code_points);\n\t};\n\t/**\n\t * Helper method for normalize a string\n\t * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize\n\t * @param {string} str\n\t * @param {string} form\n\t */\n\n\tconst normalize = (str, form = 'NFKD') => str.normalize(form);\n\t/**\n\t * Remove accents without reordering string\n\t * calling str.normalize('NFKD') on \\u{594}\\u{595}\\u{596} becomes \\u{596}\\u{594}\\u{595}\n\t * via https://github.com/krisk/Fuse/issues/133#issuecomment-318692703\n\t * @param {string} str\n\t * @return {string}\n\t */\n\n\tconst asciifold = str => {\n\t  return toArray(str).reduce(\n\t  /**\n\t   * @param {string} result\n\t   * @param {string} char\n\t   */\n\t  (result, char) => {\n\t    return result + _asciifold(char);\n\t  }, '');\n\t};\n\t/**\n\t * @param {string} str\n\t * @return {string}\n\t */\n\n\tconst _asciifold = str => {\n\t  str = normalize(str).toLowerCase().replace(convert_pat, (\n\t  /** @type {string} */\n\t  char) => {\n\t    return latin_convert[char] || '';\n\t  }); //return str;\n\n\t  return normalize(str, 'NFC');\n\t};\n\t/**\n\t * Generate a list of unicode variants from the list of code points\n\t * @param {TCodePoints} code_points\n\t * @yield {TCodePointObj}\n\t */\n\n\tfunction* generator(code_points) {\n\t  for (const [code_point_min, code_point_max] of code_points) {\n\t    for (let i = code_point_min; i <= code_point_max; i++) {\n\t      let composed = String.fromCharCode(i);\n\t      let folded = asciifold(composed);\n\n\t      if (folded == composed.toLowerCase()) {\n\t        continue;\n\t      } // skip when folded is a string longer than 3 characters long\n\t      // bc the resulting regex patterns will be long\n\t      // eg:\n\t      // folded صلى الله عليه وسلم length 18 code point 65018\n\t      // folded جل جلاله length 8 code point 65019\n\n\n\t      if (folded.length > max_char_length) {\n\t        continue;\n\t      }\n\n\t      if (folded.length == 0) {\n\t        continue;\n\t      }\n\n\t      yield {\n\t        folded: folded,\n\t        composed: composed,\n\t        code_point: i\n\t      };\n\t    }\n\t  }\n\t}\n\t/**\n\t * Generate a unicode map from the list of code points\n\t * @param {TCodePoints} code_points\n\t * @return {TUnicodeSets}\n\t */\n\n\tconst generateSets = code_points => {\n\t  /** @type {{[key:string]:Set<string>}} */\n\t  const unicode_sets = {};\n\t  /**\n\t   * @param {string} folded\n\t   * @param {string} to_add\n\t   */\n\n\t  const addMatching = (folded, to_add) => {\n\t    /** @type {Set<string>} */\n\t    const folded_set = unicode_sets[folded] || new Set();\n\t    const patt = new RegExp('^' + setToPattern(folded_set) + '$', 'iu');\n\n\t    if (to_add.match(patt)) {\n\t      return;\n\t    }\n\n\t    folded_set.add(escape_regex(to_add));\n\t    unicode_sets[folded] = folded_set;\n\t  };\n\n\t  for (let value of generator(code_points)) {\n\t    addMatching(value.folded, value.folded);\n\t    addMatching(value.folded, value.composed);\n\t  }\n\n\t  return unicode_sets;\n\t};\n\t/**\n\t * Generate a unicode map from the list of code points\n\t * ae => (?:(?:ae|Æ|Ǽ|Ǣ)|(?:A|Ⓐ|Ａ...)(?:E|ɛ|Ⓔ...))\n\t *\n\t * @param {TCodePoints} code_points\n\t * @return {TUnicodeMap}\n\t */\n\n\tconst generateMap = code_points => {\n\t  /** @type {TUnicodeSets} */\n\t  const unicode_sets = generateSets(code_points);\n\t  /** @type {TUnicodeMap} */\n\n\t  const unicode_map = {};\n\t  /** @type {string[]} */\n\n\t  let multi_char = [];\n\n\t  for (let folded in unicode_sets) {\n\t    let set = unicode_sets[folded];\n\n\t    if (set) {\n\t      unicode_map[folded] = setToPattern(set);\n\t    }\n\n\t    if (folded.length > 1) {\n\t      multi_char.push(escape_regex(folded));\n\t    }\n\t  }\n\n\t  multi_char.sort((a, b) => b.length - a.length);\n\t  const multi_char_patt = arrayToPattern(multi_char);\n\t  multi_char_reg = new RegExp('^' + multi_char_patt, 'u');\n\t  return unicode_map;\n\t};\n\t/**\n\t * Map each element of an array from it's folded value to all possible unicode matches\n\t * @param {string[]} strings\n\t * @param {number} min_replacement\n\t * @return {string}\n\t */\n\n\tconst mapSequence = (strings, min_replacement = 1) => {\n\t  let chars_replaced = 0;\n\t  strings = strings.map(str => {\n\t    if (unicode_map[str]) {\n\t      chars_replaced += str.length;\n\t    }\n\n\t    return unicode_map[str] || str;\n\t  });\n\n\t  if (chars_replaced >= min_replacement) {\n\t    return sequencePattern(strings);\n\t  }\n\n\t  return '';\n\t};\n\t/**\n\t * Convert a short string and split it into all possible patterns\n\t * Keep a pattern only if min_replacement is met\n\t *\n\t * 'abc'\n\t * \t\t=> [['abc'],['ab','c'],['a','bc'],['a','b','c']]\n\t *\t\t=> ['abc-pattern','ab-c-pattern'...]\n\t *\n\t *\n\t * @param {string} str\n\t * @param {number} min_replacement\n\t * @return {string}\n\t */\n\n\tconst substringsToPattern = (str, min_replacement = 1) => {\n\t  min_replacement = Math.max(min_replacement, str.length - 1);\n\t  return arrayToPattern(allSubstrings(str).map(sub_pat => {\n\t    return mapSequence(sub_pat, min_replacement);\n\t  }));\n\t};\n\t/**\n\t * Convert an array of sequences into a pattern\n\t * [{start:0,end:3,length:3,substr:'iii'}...] => (?:iii...)\n\t *\n\t * @param {Sequence[]} sequences\n\t * @param {boolean} all\n\t */\n\n\tconst sequencesToPattern = (sequences, all = true) => {\n\t  let min_replacement = sequences.length > 1 ? 1 : 0;\n\t  return arrayToPattern(sequences.map(sequence => {\n\t    let seq = [];\n\t    const len = all ? sequence.length() : sequence.length() - 1;\n\n\t    for (let j = 0; j < len; j++) {\n\t      seq.push(substringsToPattern(sequence.substrs[j] || '', min_replacement));\n\t    }\n\n\t    return sequencePattern(seq);\n\t  }));\n\t};\n\t/**\n\t * Return true if the sequence is already in the sequences\n\t * @param {Sequence} needle_seq\n\t * @param {Sequence[]} sequences\n\t */\n\n\n\tconst inSequences = (needle_seq, sequences) => {\n\t  for (const seq of sequences) {\n\t    if (seq.start != needle_seq.start || seq.end != needle_seq.end) {\n\t      continue;\n\t    }\n\n\t    if (seq.substrs.join('') !== needle_seq.substrs.join('')) {\n\t      continue;\n\t    }\n\n\t    let needle_parts = needle_seq.parts;\n\t    /**\n\t     * @param {TSequencePart} part\n\t     */\n\n\t    const filter = part => {\n\t      for (const needle_part of needle_parts) {\n\t        if (needle_part.start === part.start && needle_part.substr === part.substr) {\n\t          return false;\n\t        }\n\n\t        if (part.length == 1 || needle_part.length == 1) {\n\t          continue;\n\t        } // check for overlapping parts\n\t        // a = ['::=','==']\n\t        // b = ['::','===']\n\t        // a = ['r','sm']\n\t        // b = ['rs','m']\n\n\n\t        if (part.start < needle_part.start && part.end > needle_part.start) {\n\t          return true;\n\t        }\n\n\t        if (needle_part.start < part.start && needle_part.end > part.start) {\n\t          return true;\n\t        }\n\t      }\n\n\t      return false;\n\t    };\n\n\t    let filtered = seq.parts.filter(filter);\n\n\t    if (filtered.length > 0) {\n\t      continue;\n\t    }\n\n\t    return true;\n\t  }\n\n\t  return false;\n\t};\n\n\tclass Sequence {\n\t  constructor() {\n\t    /** @type {TSequencePart[]} */\n\t    this.parts = [];\n\t    /** @type {string[]} */\n\n\t    this.substrs = [];\n\t    this.start = 0;\n\t    this.end = 0;\n\t  }\n\t  /**\n\t   * @param {TSequencePart|undefined} part\n\t   */\n\n\n\t  add(part) {\n\t    if (part) {\n\t      this.parts.push(part);\n\t      this.substrs.push(part.substr);\n\t      this.start = Math.min(part.start, this.start);\n\t      this.end = Math.max(part.end, this.end);\n\t    }\n\t  }\n\n\t  last() {\n\t    return this.parts[this.parts.length - 1];\n\t  }\n\n\t  length() {\n\t    return this.parts.length;\n\t  }\n\t  /**\n\t   * @param {number} position\n\t   * @param {TSequencePart} last_piece\n\t   */\n\n\n\t  clone(position, last_piece) {\n\t    let clone = new Sequence();\n\t    let parts = JSON.parse(JSON.stringify(this.parts));\n\t    let last_part = parts.pop();\n\n\t    for (const part of parts) {\n\t      clone.add(part);\n\t    }\n\n\t    let last_substr = last_piece.substr.substring(0, position - last_part.start);\n\t    let clone_last_len = last_substr.length;\n\t    clone.add({\n\t      start: last_part.start,\n\t      end: last_part.start + clone_last_len,\n\t      length: clone_last_len,\n\t      substr: last_substr\n\t    });\n\t    return clone;\n\t  }\n\n\t}\n\t/**\n\t * Expand a regular expression pattern to include unicode variants\n\t * \teg /a/ becomes /aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐɑAⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ/\n\t *\n\t * Issue:\n\t *  ﺊﺋ [ 'ﺊ = \\\\u{fe8a}', 'ﺋ = \\\\u{fe8b}' ]\n\t *\tbecomes:\tئئ [ 'ي = \\\\u{64a}', 'ٔ = \\\\u{654}', 'ي = \\\\u{64a}', 'ٔ = \\\\u{654}' ]\n\t *\n\t *\tİĲ = IIJ = ⅡJ\n\t *\n\t * \t1/2/4\n\t *\n\t * @param {string} str\n\t * @return {string|undefined}\n\t */\n\n\n\tconst getPattern = str => {\n\t  initialize();\n\t  str = asciifold(str);\n\t  let pattern = '';\n\t  let sequences = [new Sequence()];\n\n\t  for (let i = 0; i < str.length; i++) {\n\t    let substr = str.substring(i);\n\t    let match = substr.match(multi_char_reg);\n\t    const char = str.substring(i, i + 1);\n\t    const match_str = match ? match[0] : null; // loop through sequences\n\t    // add either the char or multi_match\n\n\t    let overlapping = [];\n\t    let added_types = new Set();\n\n\t    for (const sequence of sequences) {\n\t      const last_piece = sequence.last();\n\n\t      if (!last_piece || last_piece.length == 1 || last_piece.end <= i) {\n\t        // if we have a multi match\n\t        if (match_str) {\n\t          const len = match_str.length;\n\t          sequence.add({\n\t            start: i,\n\t            end: i + len,\n\t            length: len,\n\t            substr: match_str\n\t          });\n\t          added_types.add('1');\n\t        } else {\n\t          sequence.add({\n\t            start: i,\n\t            end: i + 1,\n\t            length: 1,\n\t            substr: char\n\t          });\n\t          added_types.add('2');\n\t        }\n\t      } else if (match_str) {\n\t        let clone = sequence.clone(i, last_piece);\n\t        const len = match_str.length;\n\t        clone.add({\n\t          start: i,\n\t          end: i + len,\n\t          length: len,\n\t          substr: match_str\n\t        });\n\t        overlapping.push(clone);\n\t      } else {\n\t        // don't add char\n\t        // adding would create invalid patterns: 234 => [2,34,4]\n\t        added_types.add('3');\n\t      }\n\t    } // if we have overlapping\n\n\n\t    if (overlapping.length > 0) {\n\t      // ['ii','iii'] before ['i','i','iii']\n\t      overlapping = overlapping.sort((a, b) => {\n\t        return a.length() - b.length();\n\t      });\n\n\t      for (let clone of overlapping) {\n\t        // don't add if we already have an equivalent sequence\n\t        if (inSequences(clone, sequences)) {\n\t          continue;\n\t        }\n\n\t        sequences.push(clone);\n\t      }\n\n\t      continue;\n\t    } // if we haven't done anything unique\n\t    // clean up the patterns\n\t    // helps keep patterns smaller\n\t    // if str = 'r₨㎧aarss', pattern will be 446 instead of 655\n\n\n\t    if (i > 0 && added_types.size == 1 && !added_types.has('3')) {\n\t      pattern += sequencesToPattern(sequences, false);\n\t      let new_seq = new Sequence();\n\t      const old_seq = sequences[0];\n\n\t      if (old_seq) {\n\t        new_seq.add(old_seq.last());\n\t      }\n\n\t      sequences = [new_seq];\n\t    }\n\t  }\n\n\t  pattern += sequencesToPattern(sequences, true);\n\t  return pattern;\n\t};\n\n\t/*! sifter.js | https://github.com/orchidjs/sifter.js | Apache License (v2) */\n\n\t/**\n\t * A property getter resolving dot-notation\n\t * @param  {Object}  obj     The root object to fetch property on\n\t * @param  {String}  name    The optionally dotted property name to fetch\n\t * @return {Object}          The resolved property value\n\t */\n\tconst getAttr = (obj, name) => {\n\t  if (!obj) return;\n\t  return obj[name];\n\t};\n\t/**\n\t * A property getter resolving dot-notation\n\t * @param  {Object}  obj     The root object to fetch property on\n\t * @param  {String}  name    The optionally dotted property name to fetch\n\t * @return {Object}          The resolved property value\n\t */\n\n\tconst getAttrNesting = (obj, name) => {\n\t  if (!obj) return;\n\t  var part,\n\t      names = name.split(\".\");\n\n\t  while ((part = names.shift()) && (obj = obj[part]));\n\n\t  return obj;\n\t};\n\t/**\n\t * Calculates how close of a match the\n\t * given value is against a search token.\n\t *\n\t */\n\n\tconst scoreValue = (value, token, weight) => {\n\t  var score, pos;\n\t  if (!value) return 0;\n\t  value = value + '';\n\t  if (token.regex == null) return 0;\n\t  pos = value.search(token.regex);\n\t  if (pos === -1) return 0;\n\t  score = token.string.length / value.length;\n\t  if (pos === 0) score += 0.5;\n\t  return score * weight;\n\t};\n\t/**\n\t * Cast object property to an array if it exists and has a value\n\t *\n\t */\n\n\tconst propToArray = (obj, key) => {\n\t  var value = obj[key];\n\t  if (typeof value == 'function') return value;\n\n\t  if (value && !Array.isArray(value)) {\n\t    obj[key] = [value];\n\t  }\n\t};\n\t/**\n\t * Iterates over arrays and hashes.\n\t *\n\t * ```\n\t * iterate(this.items, function(item, id) {\n\t *    // invoked for each item\n\t * });\n\t * ```\n\t *\n\t */\n\n\tconst iterate$1 = (object, callback) => {\n\t  if (Array.isArray(object)) {\n\t    object.forEach(callback);\n\t  } else {\n\t    for (var key in object) {\n\t      if (object.hasOwnProperty(key)) {\n\t        callback(object[key], key);\n\t      }\n\t    }\n\t  }\n\t};\n\tconst cmp = (a, b) => {\n\t  if (typeof a === 'number' && typeof b === 'number') {\n\t    return a > b ? 1 : a < b ? -1 : 0;\n\t  }\n\n\t  a = asciifold(a + '').toLowerCase();\n\t  b = asciifold(b + '').toLowerCase();\n\t  if (a > b) return 1;\n\t  if (b > a) return -1;\n\t  return 0;\n\t};\n\n\t/*! sifter.js | https://github.com/orchidjs/sifter.js | Apache License (v2) */\n\n\t/**\n\t * sifter.js\n\t * Copyright (c) 2013–2020 Brian Reavis & contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t * @author Brian Reavis <brian@thirdroute.com>\n\t */\n\n\tclass Sifter {\n\t  // []|{};\n\n\t  /**\n\t   * Textually searches arrays and hashes of objects\n\t   * by property (or multiple properties). Designed\n\t   * specifically for autocomplete.\n\t   *\n\t   */\n\t  constructor(items, settings) {\n\t    this.items = void 0;\n\t    this.settings = void 0;\n\t    this.items = items;\n\t    this.settings = settings || {\n\t      diacritics: true\n\t    };\n\t  }\n\n\t  /**\n\t   * Splits a search string into an array of individual\n\t   * regexps to be used to match results.\n\t   *\n\t   */\n\t  tokenize(query, respect_word_boundaries, weights) {\n\t    if (!query || !query.length) return [];\n\t    const tokens = [];\n\t    const words = query.split(/\\s+/);\n\t    var field_regex;\n\n\t    if (weights) {\n\t      field_regex = new RegExp('^(' + Object.keys(weights).map(escape_regex).join('|') + ')\\:(.*)$');\n\t    }\n\n\t    words.forEach(word => {\n\t      let field_match;\n\t      let field = null;\n\t      let regex = null; // look for \"field:query\" tokens\n\n\t      if (field_regex && (field_match = word.match(field_regex))) {\n\t        field = field_match[1];\n\t        word = field_match[2];\n\t      }\n\n\t      if (word.length > 0) {\n\t        if (this.settings.diacritics) {\n\t          regex = getPattern(word) || null;\n\t        } else {\n\t          regex = escape_regex(word);\n\t        }\n\n\t        if (regex && respect_word_boundaries) regex = \"\\\\b\" + regex;\n\t      }\n\n\t      tokens.push({\n\t        string: word,\n\t        regex: regex ? new RegExp(regex, 'iu') : null,\n\t        field: field\n\t      });\n\t    });\n\t    return tokens;\n\t  }\n\n\t  /**\n\t   * Returns a function to be used to score individual results.\n\t   *\n\t   * Good matches will have a higher score than poor matches.\n\t   * If an item is not a match, 0 will be returned by the function.\n\t   *\n\t   * @returns {T.ScoreFn}\n\t   */\n\t  getScoreFunction(query, options) {\n\t    var search = this.prepareSearch(query, options);\n\t    return this._getScoreFunction(search);\n\t  }\n\t  /**\n\t   * @returns {T.ScoreFn}\n\t   *\n\t   */\n\n\n\t  _getScoreFunction(search) {\n\t    const tokens = search.tokens,\n\t          token_count = tokens.length;\n\n\t    if (!token_count) {\n\t      return function () {\n\t        return 0;\n\t      };\n\t    }\n\n\t    const fields = search.options.fields,\n\t          weights = search.weights,\n\t          field_count = fields.length,\n\t          getAttrFn = search.getAttrFn;\n\n\t    if (!field_count) {\n\t      return function () {\n\t        return 1;\n\t      };\n\t    }\n\t    /**\n\t     * Calculates the score of an object\n\t     * against the search query.\n\t     *\n\t     */\n\n\n\t    const scoreObject = function () {\n\t      if (field_count === 1) {\n\t        return function (token, data) {\n\t          const field = fields[0].field;\n\t          return scoreValue(getAttrFn(data, field), token, weights[field] || 1);\n\t        };\n\t      }\n\n\t      return function (token, data) {\n\t        var sum = 0; // is the token specific to a field?\n\n\t        if (token.field) {\n\t          const value = getAttrFn(data, token.field);\n\n\t          if (!token.regex && value) {\n\t            sum += 1 / field_count;\n\t          } else {\n\t            sum += scoreValue(value, token, 1);\n\t          }\n\t        } else {\n\t          iterate$1(weights, (weight, field) => {\n\t            sum += scoreValue(getAttrFn(data, field), token, weight);\n\t          });\n\t        }\n\n\t        return sum / field_count;\n\t      };\n\t    }();\n\n\t    if (token_count === 1) {\n\t      return function (data) {\n\t        return scoreObject(tokens[0], data);\n\t      };\n\t    }\n\n\t    if (search.options.conjunction === 'and') {\n\t      return function (data) {\n\t        var score,\n\t            sum = 0;\n\n\t        for (let token of tokens) {\n\t          score = scoreObject(token, data);\n\t          if (score <= 0) return 0;\n\t          sum += score;\n\t        }\n\n\t        return sum / token_count;\n\t      };\n\t    } else {\n\t      return function (data) {\n\t        var sum = 0;\n\t        iterate$1(tokens, token => {\n\t          sum += scoreObject(token, data);\n\t        });\n\t        return sum / token_count;\n\t      };\n\t    }\n\t  }\n\n\t  /**\n\t   * Returns a function that can be used to compare two\n\t   * results, for sorting purposes. If no sorting should\n\t   * be performed, `null` will be returned.\n\t   *\n\t   * @return function(a,b)\n\t   */\n\t  getSortFunction(query, options) {\n\t    var search = this.prepareSearch(query, options);\n\t    return this._getSortFunction(search);\n\t  }\n\n\t  _getSortFunction(search) {\n\t    var implicit_score,\n\t        sort_flds = [];\n\t    const self = this,\n\t          options = search.options,\n\t          sort = !search.query && options.sort_empty ? options.sort_empty : options.sort;\n\n\t    if (typeof sort == 'function') {\n\t      return sort.bind(this);\n\t    }\n\t    /**\n\t     * Fetches the specified sort field value\n\t     * from a search result item.\n\t     *\n\t     */\n\n\n\t    const get_field = function get_field(name, result) {\n\t      if (name === '$score') return result.score;\n\t      return search.getAttrFn(self.items[result.id], name);\n\t    }; // parse options\n\n\n\t    if (sort) {\n\t      for (let s of sort) {\n\t        if (search.query || s.field !== '$score') {\n\t          sort_flds.push(s);\n\t        }\n\t      }\n\t    } // the \"$score\" field is implied to be the primary\n\t    // sort field, unless it's manually specified\n\n\n\t    if (search.query) {\n\t      implicit_score = true;\n\n\t      for (let fld of sort_flds) {\n\t        if (fld.field === '$score') {\n\t          implicit_score = false;\n\t          break;\n\t        }\n\t      }\n\n\t      if (implicit_score) {\n\t        sort_flds.unshift({\n\t          field: '$score',\n\t          direction: 'desc'\n\t        });\n\t      } // without a search.query, all items will have the same score\n\n\t    } else {\n\t      sort_flds = sort_flds.filter(fld => fld.field !== '$score');\n\t    } // build function\n\n\n\t    const sort_flds_count = sort_flds.length;\n\n\t    if (!sort_flds_count) {\n\t      return null;\n\t    }\n\n\t    return function (a, b) {\n\t      var result, field;\n\n\t      for (let sort_fld of sort_flds) {\n\t        field = sort_fld.field;\n\t        let multiplier = sort_fld.direction === 'desc' ? -1 : 1;\n\t        result = multiplier * cmp(get_field(field, a), get_field(field, b));\n\t        if (result) return result;\n\t      }\n\n\t      return 0;\n\t    };\n\t  }\n\n\t  /**\n\t   * Parses a search query and returns an object\n\t   * with tokens and fields ready to be populated\n\t   * with results.\n\t   *\n\t   */\n\t  prepareSearch(query, optsUser) {\n\t    const weights = {};\n\t    var options = Object.assign({}, optsUser);\n\t    propToArray(options, 'sort');\n\t    propToArray(options, 'sort_empty'); // convert fields to new format\n\n\t    if (options.fields) {\n\t      propToArray(options, 'fields');\n\t      const fields = [];\n\t      options.fields.forEach(field => {\n\t        if (typeof field == 'string') {\n\t          field = {\n\t            field: field,\n\t            weight: 1\n\t          };\n\t        }\n\n\t        fields.push(field);\n\t        weights[field.field] = 'weight' in field ? field.weight : 1;\n\t      });\n\t      options.fields = fields;\n\t    }\n\n\t    return {\n\t      options: options,\n\t      query: query.toLowerCase().trim(),\n\t      tokens: this.tokenize(query, options.respect_word_boundaries, weights),\n\t      total: 0,\n\t      items: [],\n\t      weights: weights,\n\t      getAttrFn: options.nesting ? getAttrNesting : getAttr\n\t    };\n\t  }\n\n\t  /**\n\t   * Searches through all items and returns a sorted array of matches.\n\t   *\n\t   */\n\t  search(query, options) {\n\t    var self = this,\n\t        score,\n\t        search;\n\t    search = this.prepareSearch(query, options);\n\t    options = search.options;\n\t    query = search.query; // generate result scoring function\n\n\t    const fn_score = options.score || self._getScoreFunction(search); // perform search and sort\n\n\n\t    if (query.length) {\n\t      iterate$1(self.items, (item, id) => {\n\t        score = fn_score(item);\n\n\t        if (options.filter === false || score > 0) {\n\t          search.items.push({\n\t            'score': score,\n\t            'id': id\n\t          });\n\t        }\n\t      });\n\t    } else {\n\t      iterate$1(self.items, (_, id) => {\n\t        search.items.push({\n\t          'score': 1,\n\t          'id': id\n\t        });\n\t      });\n\t    }\n\n\t    const fn_sort = self._getSortFunction(search);\n\n\t    if (fn_sort) search.items.sort(fn_sort); // apply limits\n\n\t    search.total = search.items.length;\n\n\t    if (typeof options.limit === 'number') {\n\t      search.items = search.items.slice(0, options.limit);\n\t    }\n\n\t    return search;\n\t  }\n\n\t}\n\n\t/**\n\t * Iterates over arrays and hashes.\n\t *\n\t * ```\n\t * iterate(this.items, function(item, id) {\n\t *    // invoked for each item\n\t * });\n\t * ```\n\t *\n\t */\n\tconst iterate = (object, callback) => {\n\t  if (Array.isArray(object)) {\n\t    object.forEach(callback);\n\t  } else {\n\t    for (var key in object) {\n\t      if (object.hasOwnProperty(key)) {\n\t        callback(object[key], key);\n\t      }\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Return a dom element from either a dom query string, jQuery object, a dom element or html string\n\t * https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\n\t *\n\t * param query should be {}\n\t */\n\tconst getDom = query => {\n\t  if (query.jquery) {\n\t    return query[0];\n\t  }\n\t  if (query instanceof HTMLElement) {\n\t    return query;\n\t  }\n\t  if (isHtmlString(query)) {\n\t    var tpl = document.createElement('template');\n\t    tpl.innerHTML = query.trim(); // Never return a text node of whitespace as the result\n\t    return tpl.content.firstChild;\n\t  }\n\t  return document.querySelector(query);\n\t};\n\tconst isHtmlString = arg => {\n\t  if (typeof arg === 'string' && arg.indexOf('<') > -1) {\n\t    return true;\n\t  }\n\t  return false;\n\t};\n\tconst escapeQuery = query => {\n\t  return query.replace(/['\"\\\\]/g, '\\\\$&');\n\t};\n\n\t/**\n\t * Dispatch an event\n\t *\n\t */\n\tconst triggerEvent = (dom_el, event_name) => {\n\t  var event = document.createEvent('HTMLEvents');\n\t  event.initEvent(event_name, true, false);\n\t  dom_el.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Apply CSS rules to a dom element\n\t *\n\t */\n\tconst applyCSS = (dom_el, css) => {\n\t  Object.assign(dom_el.style, css);\n\t};\n\n\t/**\n\t * Add css classes\n\t *\n\t */\n\tconst addClasses = (elmts, ...classes) => {\n\t  var norm_classes = classesArray(classes);\n\t  elmts = castAsArray(elmts);\n\t  elmts.map(el => {\n\t    norm_classes.map(cls => {\n\t      el.classList.add(cls);\n\t    });\n\t  });\n\t};\n\n\t/**\n\t * Remove css classes\n\t *\n\t */\n\tconst removeClasses = (elmts, ...classes) => {\n\t  var norm_classes = classesArray(classes);\n\t  elmts = castAsArray(elmts);\n\t  elmts.map(el => {\n\t    norm_classes.map(cls => {\n\t      el.classList.remove(cls);\n\t    });\n\t  });\n\t};\n\n\t/**\n\t * Return arguments\n\t *\n\t */\n\tconst classesArray = args => {\n\t  var classes = [];\n\t  iterate(args, _classes => {\n\t    if (typeof _classes === 'string') {\n\t      _classes = _classes.trim().split(/[\\11\\12\\14\\15\\40]/);\n\t    }\n\t    if (Array.isArray(_classes)) {\n\t      classes = classes.concat(_classes);\n\t    }\n\t  });\n\t  return classes.filter(Boolean);\n\t};\n\n\t/**\n\t * Create an array from arg if it's not already an array\n\t *\n\t */\n\tconst castAsArray = arg => {\n\t  if (!Array.isArray(arg)) {\n\t    arg = [arg];\n\t  }\n\t  return arg;\n\t};\n\n\t/**\n\t * Get the closest node to the evt.target matching the selector\n\t * Stops at wrapper\n\t *\n\t */\n\tconst parentMatch = (target, selector, wrapper) => {\n\t  if (wrapper && !wrapper.contains(target)) {\n\t    return;\n\t  }\n\t  while (target && target.matches) {\n\t    if (target.matches(selector)) {\n\t      return target;\n\t    }\n\t    target = target.parentNode;\n\t  }\n\t};\n\n\t/**\n\t * Get the first or last item from an array\n\t *\n\t * > 0 - right (last)\n\t * <= 0 - left (first)\n\t *\n\t */\n\tconst getTail = (list, direction = 0) => {\n\t  if (direction > 0) {\n\t    return list[list.length - 1];\n\t  }\n\t  return list[0];\n\t};\n\n\t/**\n\t * Return true if an object is empty\n\t *\n\t */\n\tconst isEmptyObject = obj => {\n\t  return Object.keys(obj).length === 0;\n\t};\n\n\t/**\n\t * Get the index of an element amongst sibling nodes of the same type\n\t *\n\t */\n\tconst nodeIndex = (el, amongst) => {\n\t  if (!el) return -1;\n\t  amongst = amongst || el.nodeName;\n\t  var i = 0;\n\t  while (el = el.previousElementSibling) {\n\t    if (el.matches(amongst)) {\n\t      i++;\n\t    }\n\t  }\n\t  return i;\n\t};\n\n\t/**\n\t * Set attributes of an element\n\t *\n\t */\n\tconst setAttr = (el, attrs) => {\n\t  iterate(attrs, (val, attr) => {\n\t    if (val == null) {\n\t      el.removeAttribute(attr);\n\t    } else {\n\t      el.setAttribute(attr, '' + val);\n\t    }\n\t  });\n\t};\n\n\t/**\n\t * Replace a node\n\t */\n\tconst replaceNode = (existing, replacement) => {\n\t  if (existing.parentNode) existing.parentNode.replaceChild(replacement, existing);\n\t};\n\n\t/**\n\t * highlight v3 | MIT license | Johann Burkard <jb@eaio.com>\n\t * Highlights arbitrary terms in a node.\n\t *\n\t * - Modified by Marshal <beatgates@gmail.com> 2011-6-24 (added regex)\n\t * - Modified by Brian Reavis <brian@thirdroute.com> 2012-8-27 (cleanup)\n\t */\n\n\tconst highlight = (element, regex) => {\n\t  if (regex === null) return;\n\n\t  // convet string to regex\n\t  if (typeof regex === 'string') {\n\t    if (!regex.length) return;\n\t    regex = new RegExp(regex, 'i');\n\t  }\n\n\t  // Wrap matching part of text node with highlighting <span>, e.g.\n\t  // Soccer  ->  <span class=\"highlight\">Soc</span>cer  for regex = /soc/i\n\t  const highlightText = node => {\n\t    var match = node.data.match(regex);\n\t    if (match && node.data.length > 0) {\n\t      var spannode = document.createElement('span');\n\t      spannode.className = 'highlight';\n\t      var middlebit = node.splitText(match.index);\n\t      middlebit.splitText(match[0].length);\n\t      var middleclone = middlebit.cloneNode(true);\n\t      spannode.appendChild(middleclone);\n\t      replaceNode(middlebit, spannode);\n\t      return 1;\n\t    }\n\t    return 0;\n\t  };\n\n\t  // Recurse element node, looking for child text nodes to highlight, unless element\n\t  // is childless, <script>, <style>, or already highlighted: <span class=\"hightlight\">\n\t  const highlightChildren = node => {\n\t    if (node.nodeType === 1 && node.childNodes && !/(script|style)/i.test(node.tagName) && (node.className !== 'highlight' || node.tagName !== 'SPAN')) {\n\t      Array.from(node.childNodes).forEach(element => {\n\t        highlightRecursive(element);\n\t      });\n\t    }\n\t  };\n\t  const highlightRecursive = node => {\n\t    if (node.nodeType === 3) {\n\t      return highlightText(node);\n\t    }\n\t    highlightChildren(node);\n\t    return 0;\n\t  };\n\t  highlightRecursive(element);\n\t};\n\n\t/**\n\t * removeHighlight fn copied from highlight v5 and\n\t * edited to remove with(), pass js strict mode, and use without jquery\n\t */\n\tconst removeHighlight = el => {\n\t  var elements = el.querySelectorAll(\"span.highlight\");\n\t  Array.prototype.forEach.call(elements, function (el) {\n\t    var parent = el.parentNode;\n\t    parent.replaceChild(el.firstChild, el);\n\t    parent.normalize();\n\t  });\n\t};\n\n\tconst KEY_A = 65;\n\tconst KEY_RETURN = 13;\n\tconst KEY_ESC = 27;\n\tconst KEY_LEFT = 37;\n\tconst KEY_UP = 38;\n\tconst KEY_RIGHT = 39;\n\tconst KEY_DOWN = 40;\n\tconst KEY_BACKSPACE = 8;\n\tconst KEY_DELETE = 46;\n\tconst KEY_TAB = 9;\n\tconst IS_MAC = typeof navigator === 'undefined' ? false : /Mac/.test(navigator.userAgent);\n\tconst KEY_SHORTCUT = IS_MAC ? 'metaKey' : 'ctrlKey'; // ctrl key or apple key for ma\n\n\tvar defaults = {\n\t  options: [],\n\t  optgroups: [],\n\t  plugins: [],\n\t  delimiter: ',',\n\t  splitOn: null,\n\t  // regexp or string for splitting up values from a paste command\n\t  persist: true,\n\t  diacritics: true,\n\t  create: null,\n\t  createOnBlur: false,\n\t  createFilter: null,\n\t  highlight: true,\n\t  openOnFocus: true,\n\t  shouldOpen: null,\n\t  maxOptions: 50,\n\t  maxItems: null,\n\t  hideSelected: null,\n\t  duplicates: false,\n\t  addPrecedence: false,\n\t  selectOnTab: false,\n\t  preload: null,\n\t  allowEmptyOption: false,\n\t  //closeAfterSelect: false,\n\t  refreshThrottle: 300,\n\t  loadThrottle: 300,\n\t  loadingClass: 'loading',\n\t  dataAttr: null,\n\t  //'data-data',\n\t  optgroupField: 'optgroup',\n\t  valueField: 'value',\n\t  labelField: 'text',\n\t  disabledField: 'disabled',\n\t  optgroupLabelField: 'label',\n\t  optgroupValueField: 'value',\n\t  lockOptgroupOrder: false,\n\t  sortField: '$order',\n\t  searchField: ['text'],\n\t  searchConjunction: 'and',\n\t  mode: null,\n\t  wrapperClass: 'ts-wrapper',\n\t  controlClass: 'ts-control',\n\t  dropdownClass: 'ts-dropdown',\n\t  dropdownContentClass: 'ts-dropdown-content',\n\t  itemClass: 'item',\n\t  optionClass: 'option',\n\t  dropdownParent: null,\n\t  controlInput: '<input type=\"text\" autocomplete=\"off\" size=\"1\" />',\n\t  copyClassesToDropdown: false,\n\t  placeholder: null,\n\t  hidePlaceholder: null,\n\t  shouldLoad: function (query) {\n\t    return query.length > 0;\n\t  },\n\t  /*\n\t  load                 : null, // function(query, callback) { ... }\n\t  score                : null, // function(search) { ... }\n\t  onInitialize         : null, // function() { ... }\n\t  onChange             : null, // function(value) { ... }\n\t  onItemAdd            : null, // function(value, $item) { ... }\n\t  onItemRemove         : null, // function(value) { ... }\n\t  onClear              : null, // function() { ... }\n\t  onOptionAdd          : null, // function(value, data) { ... }\n\t  onOptionRemove       : null, // function(value) { ... }\n\t  onOptionClear        : null, // function() { ... }\n\t  onOptionGroupAdd     : null, // function(id, data) { ... }\n\t  onOptionGroupRemove  : null, // function(id) { ... }\n\t  onOptionGroupClear   : null, // function() { ... }\n\t  onDropdownOpen       : null, // function(dropdown) { ... }\n\t  onDropdownClose      : null, // function(dropdown) { ... }\n\t  onType               : null, // function(str) { ... }\n\t  onDelete             : null, // function(values) { ... }\n\t  */\n\n\t  render: {\n\t    /*\n\t    item: null,\n\t    optgroup: null,\n\t    optgroup_header: null,\n\t    option: null,\n\t    option_create: null\n\t    */\n\t  }\n\t};\n\n\t/**\n\t * Converts a scalar to its best string representation\n\t * for hash keys and HTML attribute values.\n\t *\n\t * Transformations:\n\t *   'str'     -> 'str'\n\t *   null      -> ''\n\t *   undefined -> ''\n\t *   true      -> '1'\n\t *   false     -> '0'\n\t *   0         -> '0'\n\t *   1         -> '1'\n\t *\n\t */\n\tconst hash_key = value => {\n\t  if (typeof value === 'undefined' || value === null) return null;\n\t  return get_hash(value);\n\t};\n\tconst get_hash = value => {\n\t  if (typeof value === 'boolean') return value ? '1' : '0';\n\t  return value + '';\n\t};\n\n\t/**\n\t * Escapes a string for use within HTML.\n\t *\n\t */\n\tconst escape_html = str => {\n\t  return (str + '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n\t};\n\n\t/**\n\t * use setTimeout if timeout > 0 \n\t */\n\tconst timeout = (fn, timeout) => {\n\t  if (timeout > 0) {\n\t    return setTimeout(fn, timeout);\n\t  }\n\t  fn.call(null);\n\t  return null;\n\t};\n\n\t/**\n\t * Debounce the user provided load function\n\t *\n\t */\n\tconst loadDebounce = (fn, delay) => {\n\t  var timeout;\n\t  return function (value, callback) {\n\t    var self = this;\n\t    if (timeout) {\n\t      self.loading = Math.max(self.loading - 1, 0);\n\t      clearTimeout(timeout);\n\t    }\n\t    timeout = setTimeout(function () {\n\t      timeout = null;\n\t      self.loadedSearches[value] = true;\n\t      fn.call(self, value, callback);\n\t    }, delay);\n\t  };\n\t};\n\n\t/**\n\t * Debounce all fired events types listed in `types`\n\t * while executing the provided `fn`.\n\t *\n\t */\n\tconst debounce_events = (self, types, fn) => {\n\t  var type;\n\t  var trigger = self.trigger;\n\t  var event_args = {};\n\n\t  // override trigger method\n\t  self.trigger = function () {\n\t    var type = arguments[0];\n\t    if (types.indexOf(type) !== -1) {\n\t      event_args[type] = arguments;\n\t    } else {\n\t      return trigger.apply(self, arguments);\n\t    }\n\t  };\n\n\t  // invoke provided function\n\t  fn.apply(self, []);\n\t  self.trigger = trigger;\n\n\t  // trigger queued events\n\t  for (type of types) {\n\t    if (type in event_args) {\n\t      trigger.apply(self, event_args[type]);\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Determines the current selection within a text input control.\n\t * Returns an object containing:\n\t *   - start\n\t *   - length\n\t *\n\t * Note: \"selectionStart, selectionEnd ... apply only to inputs of types text, search, URL, tel and password\"\n\t * \t- https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n\t */\n\tconst getSelection = input => {\n\t  return {\n\t    start: input.selectionStart || 0,\n\t    length: (input.selectionEnd || 0) - (input.selectionStart || 0)\n\t  };\n\t};\n\n\t/**\n\t * Prevent default\n\t *\n\t */\n\tconst preventDefault = (evt, stop = false) => {\n\t  if (evt) {\n\t    evt.preventDefault();\n\t    if (stop) {\n\t      evt.stopPropagation();\n\t    }\n\t  }\n\t};\n\n\t/**\n\t * Add event helper\n\t *\n\t */\n\tconst addEvent = (target, type, callback, options) => {\n\t  target.addEventListener(type, callback, options);\n\t};\n\n\t/**\n\t * Return true if the requested key is down\n\t * Will return false if more than one control character is pressed ( when [ctrl+shift+a] != [ctrl+a] )\n\t * The current evt may not always set ( eg calling advanceSelection() )\n\t *\n\t */\n\tconst isKeyDown = (key_name, evt) => {\n\t  if (!evt) {\n\t    return false;\n\t  }\n\t  if (!evt[key_name]) {\n\t    return false;\n\t  }\n\t  var count = (evt.altKey ? 1 : 0) + (evt.ctrlKey ? 1 : 0) + (evt.shiftKey ? 1 : 0) + (evt.metaKey ? 1 : 0);\n\t  if (count === 1) {\n\t    return true;\n\t  }\n\t  return false;\n\t};\n\n\t/**\n\t * Get the id of an element\n\t * If the id attribute is not set, set the attribute with the given id\n\t *\n\t */\n\tconst getId = (el, id) => {\n\t  const existing_id = el.getAttribute('id');\n\t  if (existing_id) {\n\t    return existing_id;\n\t  }\n\t  el.setAttribute('id', id);\n\t  return id;\n\t};\n\n\t/**\n\t * Returns a string with backslashes added before characters that need to be escaped.\n\t */\n\tconst addSlashes = str => {\n\t  return str.replace(/[\\\\\"']/g, '\\\\$&');\n\t};\n\n\t/**\n\t *\n\t */\n\tconst append = (parent, node) => {\n\t  if (node) parent.append(node);\n\t};\n\n\tfunction getSettings(input, settings_user) {\n\t  var settings = Object.assign({}, defaults, settings_user);\n\t  var attr_data = settings.dataAttr;\n\t  var field_label = settings.labelField;\n\t  var field_value = settings.valueField;\n\t  var field_disabled = settings.disabledField;\n\t  var field_optgroup = settings.optgroupField;\n\t  var field_optgroup_label = settings.optgroupLabelField;\n\t  var field_optgroup_value = settings.optgroupValueField;\n\t  var tag_name = input.tagName.toLowerCase();\n\t  var placeholder = input.getAttribute('placeholder') || input.getAttribute('data-placeholder');\n\t  if (!placeholder && !settings.allowEmptyOption) {\n\t    let option = input.querySelector('option[value=\"\"]');\n\t    if (option) {\n\t      placeholder = option.textContent;\n\t    }\n\t  }\n\t  var settings_element = {\n\t    placeholder: placeholder,\n\t    options: [],\n\t    optgroups: [],\n\t    items: [],\n\t    maxItems: null\n\t  };\n\n\t  /**\n\t   * Initialize from a <select> element.\n\t   *\n\t   */\n\t  var init_select = () => {\n\t    var tagName;\n\t    var options = settings_element.options;\n\t    var optionsMap = {};\n\t    var group_count = 1;\n\t    let $order = 0;\n\t    var readData = el => {\n\t      var data = Object.assign({}, el.dataset); // get plain object from DOMStringMap\n\t      var json = attr_data && data[attr_data];\n\t      if (typeof json === 'string' && json.length) {\n\t        data = Object.assign(data, JSON.parse(json));\n\t      }\n\t      return data;\n\t    };\n\t    var addOption = (option, group) => {\n\t      var value = hash_key(option.value);\n\t      if (value == null) return;\n\t      if (!value && !settings.allowEmptyOption) return;\n\n\t      // if the option already exists, it's probably been\n\t      // duplicated in another optgroup. in this case, push\n\t      // the current group to the \"optgroup\" property on the\n\t      // existing option so that it's rendered in both places.\n\t      if (optionsMap.hasOwnProperty(value)) {\n\t        if (group) {\n\t          var arr = optionsMap[value][field_optgroup];\n\t          if (!arr) {\n\t            optionsMap[value][field_optgroup] = group;\n\t          } else if (!Array.isArray(arr)) {\n\t            optionsMap[value][field_optgroup] = [arr, group];\n\t          } else {\n\t            arr.push(group);\n\t          }\n\t        }\n\t      } else {\n\t        var option_data = readData(option);\n\t        option_data[field_label] = option_data[field_label] || option.textContent;\n\t        option_data[field_value] = option_data[field_value] || value;\n\t        option_data[field_disabled] = option_data[field_disabled] || option.disabled;\n\t        option_data[field_optgroup] = option_data[field_optgroup] || group;\n\t        option_data.$option = option;\n\t        option_data.$order = option_data.$order || ++$order;\n\t        optionsMap[value] = option_data;\n\t        options.push(option_data);\n\t      }\n\t      if (option.selected) {\n\t        settings_element.items.push(value);\n\t      }\n\t    };\n\t    var addGroup = optgroup => {\n\t      var id, optgroup_data;\n\t      optgroup_data = readData(optgroup);\n\t      optgroup_data[field_optgroup_label] = optgroup_data[field_optgroup_label] || optgroup.getAttribute('label') || '';\n\t      optgroup_data[field_optgroup_value] = optgroup_data[field_optgroup_value] || group_count++;\n\t      optgroup_data[field_disabled] = optgroup_data[field_disabled] || optgroup.disabled;\n\t      optgroup_data.$order = optgroup_data.$order || ++$order;\n\t      settings_element.optgroups.push(optgroup_data);\n\t      id = optgroup_data[field_optgroup_value];\n\t      iterate(optgroup.children, option => {\n\t        addOption(option, id);\n\t      });\n\t    };\n\t    settings_element.maxItems = input.hasAttribute('multiple') ? null : 1;\n\t    iterate(input.children, child => {\n\t      tagName = child.tagName.toLowerCase();\n\t      if (tagName === 'optgroup') {\n\t        addGroup(child);\n\t      } else if (tagName === 'option') {\n\t        addOption(child);\n\t      }\n\t    });\n\t  };\n\n\t  /**\n\t   * Initialize from a <input type=\"text\"> element.\n\t   *\n\t   */\n\t  var init_textbox = () => {\n\t    const data_raw = input.getAttribute(attr_data);\n\t    if (!data_raw) {\n\t      var value = input.value.trim() || '';\n\t      if (!settings.allowEmptyOption && !value.length) return;\n\t      const values = value.split(settings.delimiter);\n\t      iterate(values, value => {\n\t        const option = {};\n\t        option[field_label] = value;\n\t        option[field_value] = value;\n\t        settings_element.options.push(option);\n\t      });\n\t      settings_element.items = values;\n\t    } else {\n\t      settings_element.options = JSON.parse(data_raw);\n\t      iterate(settings_element.options, opt => {\n\t        settings_element.items.push(opt[field_value]);\n\t      });\n\t    }\n\t  };\n\t  if (tag_name === 'select') {\n\t    init_select();\n\t  } else {\n\t    init_textbox();\n\t  }\n\t  return Object.assign({}, defaults, settings_element, settings_user);\n\t}\n\n\tvar instance_i = 0;\n\tclass TomSelect extends MicroPlugin(MicroEvent) {\n\t  constructor(input_arg, user_settings) {\n\t    super();\n\t    this.control_input = void 0;\n\t    this.wrapper = void 0;\n\t    this.dropdown = void 0;\n\t    this.control = void 0;\n\t    this.dropdown_content = void 0;\n\t    this.focus_node = void 0;\n\t    this.order = 0;\n\t    this.settings = void 0;\n\t    this.input = void 0;\n\t    this.tabIndex = void 0;\n\t    this.is_select_tag = void 0;\n\t    this.rtl = void 0;\n\t    this.inputId = void 0;\n\t    this._destroy = void 0;\n\t    this.sifter = void 0;\n\t    this.isOpen = false;\n\t    this.isDisabled = false;\n\t    this.isReadOnly = false;\n\t    this.isRequired = void 0;\n\t    this.isInvalid = false;\n\t    // @deprecated 1.8\n\t    this.isValid = true;\n\t    this.isLocked = false;\n\t    this.isFocused = false;\n\t    this.isInputHidden = false;\n\t    this.isSetup = false;\n\t    this.ignoreFocus = false;\n\t    this.ignoreHover = false;\n\t    this.hasOptions = false;\n\t    this.currentResults = void 0;\n\t    this.lastValue = '';\n\t    this.caretPos = 0;\n\t    this.loading = 0;\n\t    this.loadedSearches = {};\n\t    this.activeOption = null;\n\t    this.activeItems = [];\n\t    this.optgroups = {};\n\t    this.options = {};\n\t    this.userOptions = {};\n\t    this.items = [];\n\t    this.refreshTimeout = null;\n\t    instance_i++;\n\t    var dir;\n\t    var input = getDom(input_arg);\n\t    if (input.tomselect) {\n\t      throw new Error('Tom Select already initialized on this element');\n\t    }\n\t    input.tomselect = this;\n\n\t    // detect rtl environment\n\t    var computedStyle = window.getComputedStyle && window.getComputedStyle(input, null);\n\t    dir = computedStyle.getPropertyValue('direction');\n\n\t    // setup default state\n\t    const settings = getSettings(input, user_settings);\n\t    this.settings = settings;\n\t    this.input = input;\n\t    this.tabIndex = input.tabIndex || 0;\n\t    this.is_select_tag = input.tagName.toLowerCase() === 'select';\n\t    this.rtl = /rtl/i.test(dir);\n\t    this.inputId = getId(input, 'tomselect-' + instance_i);\n\t    this.isRequired = input.required;\n\n\t    // search system\n\t    this.sifter = new Sifter(this.options, {\n\t      diacritics: settings.diacritics\n\t    });\n\n\t    // option-dependent defaults\n\t    settings.mode = settings.mode || (settings.maxItems === 1 ? 'single' : 'multi');\n\t    if (typeof settings.hideSelected !== 'boolean') {\n\t      settings.hideSelected = settings.mode === 'multi';\n\t    }\n\t    if (typeof settings.hidePlaceholder !== 'boolean') {\n\t      settings.hidePlaceholder = settings.mode !== 'multi';\n\t    }\n\n\t    // set up createFilter callback\n\t    var filter = settings.createFilter;\n\t    if (typeof filter !== 'function') {\n\t      if (typeof filter === 'string') {\n\t        filter = new RegExp(filter);\n\t      }\n\t      if (filter instanceof RegExp) {\n\t        settings.createFilter = input => filter.test(input);\n\t      } else {\n\t        settings.createFilter = value => {\n\t          return this.settings.duplicates || !this.options[value];\n\t        };\n\t      }\n\t    }\n\t    this.initializePlugins(settings.plugins);\n\t    this.setupCallbacks();\n\t    this.setupTemplates();\n\n\t    // Create all elements\n\t    const wrapper = getDom('<div>');\n\t    const control = getDom('<div>');\n\t    const dropdown = this._render('dropdown');\n\t    const dropdown_content = getDom(`<div role=\"listbox\" tabindex=\"-1\">`);\n\t    const classes = this.input.getAttribute('class') || '';\n\t    const inputMode = settings.mode;\n\t    var control_input;\n\t    addClasses(wrapper, settings.wrapperClass, classes, inputMode);\n\t    addClasses(control, settings.controlClass);\n\t    append(wrapper, control);\n\t    addClasses(dropdown, settings.dropdownClass, inputMode);\n\t    if (settings.copyClassesToDropdown) {\n\t      addClasses(dropdown, classes);\n\t    }\n\t    addClasses(dropdown_content, settings.dropdownContentClass);\n\t    append(dropdown, dropdown_content);\n\t    getDom(settings.dropdownParent || wrapper).appendChild(dropdown);\n\n\t    // default controlInput\n\t    if (isHtmlString(settings.controlInput)) {\n\t      control_input = getDom(settings.controlInput);\n\n\t      // set attributes\n\t      var attrs = ['autocorrect', 'autocapitalize', 'autocomplete', 'spellcheck'];\n\t      iterate$1(attrs, attr => {\n\t        if (input.getAttribute(attr)) {\n\t          setAttr(control_input, {\n\t            [attr]: input.getAttribute(attr)\n\t          });\n\t        }\n\t      });\n\t      control_input.tabIndex = -1;\n\t      control.appendChild(control_input);\n\t      this.focus_node = control_input;\n\n\t      // dom element\n\t    } else if (settings.controlInput) {\n\t      control_input = getDom(settings.controlInput);\n\t      this.focus_node = control_input;\n\t    } else {\n\t      control_input = getDom('<input/>');\n\t      this.focus_node = control;\n\t    }\n\t    this.wrapper = wrapper;\n\t    this.dropdown = dropdown;\n\t    this.dropdown_content = dropdown_content;\n\t    this.control = control;\n\t    this.control_input = control_input;\n\t    this.setup();\n\t  }\n\n\t  /**\n\t   * set up event bindings.\n\t   *\n\t   */\n\t  setup() {\n\t    const self = this;\n\t    const settings = self.settings;\n\t    const control_input = self.control_input;\n\t    const dropdown = self.dropdown;\n\t    const dropdown_content = self.dropdown_content;\n\t    const wrapper = self.wrapper;\n\t    const control = self.control;\n\t    const input = self.input;\n\t    const focus_node = self.focus_node;\n\t    const passive_event = {\n\t      passive: true\n\t    };\n\t    const listboxId = self.inputId + '-ts-dropdown';\n\t    setAttr(dropdown_content, {\n\t      id: listboxId\n\t    });\n\t    setAttr(focus_node, {\n\t      role: 'combobox',\n\t      'aria-haspopup': 'listbox',\n\t      'aria-expanded': 'false',\n\t      'aria-controls': listboxId\n\t    });\n\t    const control_id = getId(focus_node, self.inputId + '-ts-control');\n\t    const query = \"label[for='\" + escapeQuery(self.inputId) + \"']\";\n\t    const label = document.querySelector(query);\n\t    const label_click = self.focus.bind(self);\n\t    if (label) {\n\t      addEvent(label, 'click', label_click);\n\t      setAttr(label, {\n\t        for: control_id\n\t      });\n\t      const label_id = getId(label, self.inputId + '-ts-label');\n\t      setAttr(focus_node, {\n\t        'aria-labelledby': label_id\n\t      });\n\t      setAttr(dropdown_content, {\n\t        'aria-labelledby': label_id\n\t      });\n\t    }\n\t    wrapper.style.width = input.style.width;\n\t    if (self.plugins.names.length) {\n\t      const classes_plugins = 'plugin-' + self.plugins.names.join(' plugin-');\n\t      addClasses([wrapper, dropdown], classes_plugins);\n\t    }\n\t    if ((settings.maxItems === null || settings.maxItems > 1) && self.is_select_tag) {\n\t      setAttr(input, {\n\t        multiple: 'multiple'\n\t      });\n\t    }\n\t    if (settings.placeholder) {\n\t      setAttr(control_input, {\n\t        placeholder: settings.placeholder\n\t      });\n\t    }\n\n\t    // if splitOn was not passed in, construct it from the delimiter to allow pasting universally\n\t    if (!settings.splitOn && settings.delimiter) {\n\t      settings.splitOn = new RegExp('\\\\s*' + escape_regex(settings.delimiter) + '+\\\\s*');\n\t    }\n\n\t    // debounce user defined load() if loadThrottle > 0\n\t    // after initializePlugins() so plugins can create/modify user defined loaders\n\t    if (settings.load && settings.loadThrottle) {\n\t      settings.load = loadDebounce(settings.load, settings.loadThrottle);\n\t    }\n\t    addEvent(dropdown, 'mousemove', () => {\n\t      self.ignoreHover = false;\n\t    });\n\t    addEvent(dropdown, 'mouseenter', e => {\n\t      var target_match = parentMatch(e.target, '[data-selectable]', dropdown);\n\t      if (target_match) self.onOptionHover(e, target_match);\n\t    }, {\n\t      capture: true\n\t    });\n\n\t    // clicking on an option should select it\n\t    addEvent(dropdown, 'click', evt => {\n\t      const option = parentMatch(evt.target, '[data-selectable]');\n\t      if (option) {\n\t        self.onOptionSelect(evt, option);\n\t        preventDefault(evt, true);\n\t      }\n\t    });\n\t    addEvent(control, 'click', evt => {\n\t      var target_match = parentMatch(evt.target, '[data-ts-item]', control);\n\t      if (target_match && self.onItemSelect(evt, target_match)) {\n\t        preventDefault(evt, true);\n\t        return;\n\t      }\n\n\t      // retain focus (see control_input mousedown)\n\t      if (control_input.value != '') {\n\t        return;\n\t      }\n\t      self.onClick();\n\t      preventDefault(evt, true);\n\t    });\n\n\t    // keydown on focus_node for arrow_down/arrow_up\n\t    addEvent(focus_node, 'keydown', e => self.onKeyDown(e));\n\n\t    // keypress and input/keyup\n\t    addEvent(control_input, 'keypress', e => self.onKeyPress(e));\n\t    addEvent(control_input, 'input', e => self.onInput(e));\n\t    addEvent(focus_node, 'blur', e => self.onBlur(e));\n\t    addEvent(focus_node, 'focus', e => self.onFocus(e));\n\t    addEvent(control_input, 'paste', e => self.onPaste(e));\n\t    const doc_mousedown = evt => {\n\t      // blur if target is outside of this instance\n\t      // dropdown is not always inside wrapper\n\t      const target = evt.composedPath()[0];\n\t      if (!wrapper.contains(target) && !dropdown.contains(target)) {\n\t        if (self.isFocused) {\n\t          self.blur();\n\t        }\n\t        self.inputState();\n\t        return;\n\t      }\n\n\t      // retain focus by preventing native handling. if the\n\t      // event target is the input it should not be modified.\n\t      // otherwise, text selection within the input won't work.\n\t      // Fixes bug #212 which is no covered by tests\n\t      if (target == control_input && self.isOpen) {\n\t        evt.stopPropagation();\n\n\t        // clicking anywhere in the control should not blur the control_input (which would close the dropdown)\n\t      } else {\n\t        preventDefault(evt, true);\n\t      }\n\t    };\n\t    const win_scroll = () => {\n\t      if (self.isOpen) {\n\t        self.positionDropdown();\n\t      }\n\t    };\n\t    addEvent(document, 'mousedown', doc_mousedown);\n\t    addEvent(window, 'scroll', win_scroll, passive_event);\n\t    addEvent(window, 'resize', win_scroll, passive_event);\n\t    this._destroy = () => {\n\t      document.removeEventListener('mousedown', doc_mousedown);\n\t      window.removeEventListener('scroll', win_scroll);\n\t      window.removeEventListener('resize', win_scroll);\n\t      if (label) label.removeEventListener('click', label_click);\n\t    };\n\n\t    // store original html and tab index so that they can be\n\t    // restored when the destroy() method is called.\n\t    this.revertSettings = {\n\t      innerHTML: input.innerHTML,\n\t      tabIndex: input.tabIndex\n\t    };\n\t    input.tabIndex = -1;\n\t    input.insertAdjacentElement('afterend', self.wrapper);\n\t    self.sync(false);\n\t    settings.items = [];\n\t    delete settings.optgroups;\n\t    delete settings.options;\n\t    addEvent(input, 'invalid', () => {\n\t      if (self.isValid) {\n\t        self.isValid = false;\n\t        self.isInvalid = true;\n\t        self.refreshState();\n\t      }\n\t    });\n\t    self.updateOriginalInput();\n\t    self.refreshItems();\n\t    self.close(false);\n\t    self.inputState();\n\t    self.isSetup = true;\n\t    if (input.disabled) {\n\t      self.disable();\n\t    } else if (input.readOnly) {\n\t      self.setReadOnly(true);\n\t    } else {\n\t      self.enable(); //sets tabIndex\n\t    }\n\n\t    self.on('change', this.onChange);\n\t    addClasses(input, 'tomselected', 'ts-hidden-accessible');\n\t    self.trigger('initialize');\n\n\t    // preload options\n\t    if (settings.preload === true) {\n\t      self.preload();\n\t    }\n\t  }\n\n\t  /**\n\t   * Register options and optgroups\n\t   *\n\t   */\n\t  setupOptions(options = [], optgroups = []) {\n\t    // build options table\n\t    this.addOptions(options);\n\n\t    // build optgroup table\n\t    iterate$1(optgroups, optgroup => {\n\t      this.registerOptionGroup(optgroup);\n\t    });\n\t  }\n\n\t  /**\n\t   * Sets up default rendering functions.\n\t   */\n\t  setupTemplates() {\n\t    var self = this;\n\t    var field_label = self.settings.labelField;\n\t    var field_optgroup = self.settings.optgroupLabelField;\n\t    var templates = {\n\t      'optgroup': data => {\n\t        let optgroup = document.createElement('div');\n\t        optgroup.className = 'optgroup';\n\t        optgroup.appendChild(data.options);\n\t        return optgroup;\n\t      },\n\t      'optgroup_header': (data, escape) => {\n\t        return '<div class=\"optgroup-header\">' + escape(data[field_optgroup]) + '</div>';\n\t      },\n\t      'option': (data, escape) => {\n\t        return '<div>' + escape(data[field_label]) + '</div>';\n\t      },\n\t      'item': (data, escape) => {\n\t        return '<div>' + escape(data[field_label]) + '</div>';\n\t      },\n\t      'option_create': (data, escape) => {\n\t        return '<div class=\"create\">Add <strong>' + escape(data.input) + '</strong>&hellip;</div>';\n\t      },\n\t      'no_results': () => {\n\t        return '<div class=\"no-results\">No results found</div>';\n\t      },\n\t      'loading': () => {\n\t        return '<div class=\"spinner\"></div>';\n\t      },\n\t      'not_loading': () => {},\n\t      'dropdown': () => {\n\t        return '<div></div>';\n\t      }\n\t    };\n\t    self.settings.render = Object.assign({}, templates, self.settings.render);\n\t  }\n\n\t  /**\n\t   * Maps fired events to callbacks provided\n\t   * in the settings used when creating the control.\n\t   */\n\t  setupCallbacks() {\n\t    var key, fn;\n\t    var callbacks = {\n\t      'initialize': 'onInitialize',\n\t      'change': 'onChange',\n\t      'item_add': 'onItemAdd',\n\t      'item_remove': 'onItemRemove',\n\t      'item_select': 'onItemSelect',\n\t      'clear': 'onClear',\n\t      'option_add': 'onOptionAdd',\n\t      'option_remove': 'onOptionRemove',\n\t      'option_clear': 'onOptionClear',\n\t      'optgroup_add': 'onOptionGroupAdd',\n\t      'optgroup_remove': 'onOptionGroupRemove',\n\t      'optgroup_clear': 'onOptionGroupClear',\n\t      'dropdown_open': 'onDropdownOpen',\n\t      'dropdown_close': 'onDropdownClose',\n\t      'type': 'onType',\n\t      'load': 'onLoad',\n\t      'focus': 'onFocus',\n\t      'blur': 'onBlur'\n\t    };\n\t    for (key in callbacks) {\n\t      fn = this.settings[callbacks[key]];\n\t      if (fn) this.on(key, fn);\n\t    }\n\t  }\n\n\t  /**\n\t   * Sync the Tom Select instance with the original input or select\n\t   *\n\t   */\n\t  sync(get_settings = true) {\n\t    const self = this;\n\t    const settings = get_settings ? getSettings(self.input, {\n\t      delimiter: self.settings.delimiter\n\t    }) : self.settings;\n\t    self.setupOptions(settings.options, settings.optgroups);\n\t    self.setValue(settings.items || [], true); // silent prevents recursion\n\n\t    self.lastQuery = null; // so updated options will be displayed in dropdown\n\t  }\n\n\t  /**\n\t   * Triggered when the main control element\n\t   * has a click event.\n\t   *\n\t   */\n\t  onClick() {\n\t    var self = this;\n\t    if (self.activeItems.length > 0) {\n\t      self.clearActiveItems();\n\t      self.focus();\n\t      return;\n\t    }\n\t    if (self.isFocused && self.isOpen) {\n\t      self.blur();\n\t    } else {\n\t      self.focus();\n\t    }\n\t  }\n\n\t  /**\n\t   * @deprecated v1.7\n\t   *\n\t   */\n\t  onMouseDown() {}\n\n\t  /**\n\t   * Triggered when the value of the control has been changed.\n\t   * This should propagate the event to the original DOM\n\t   * input / select element.\n\t   */\n\t  onChange() {\n\t    triggerEvent(this.input, 'input');\n\t    triggerEvent(this.input, 'change');\n\t  }\n\n\t  /**\n\t   * Triggered on <input> paste.\n\t   *\n\t   */\n\t  onPaste(e) {\n\t    var self = this;\n\t    if (self.isInputHidden || self.isLocked) {\n\t      preventDefault(e);\n\t      return;\n\t    }\n\n\t    // If a regex or string is included, this will split the pasted\n\t    // input and create Items for each separate value\n\t    if (!self.settings.splitOn) {\n\t      return;\n\t    }\n\n\t    // Wait for pasted text to be recognized in value\n\t    setTimeout(() => {\n\t      var pastedText = self.inputValue();\n\t      if (!pastedText.match(self.settings.splitOn)) {\n\t        return;\n\t      }\n\t      var splitInput = pastedText.trim().split(self.settings.splitOn);\n\t      iterate$1(splitInput, piece => {\n\t        const hash = hash_key(piece);\n\t        if (hash) {\n\t          if (this.options[piece]) {\n\t            self.addItem(piece);\n\t          } else {\n\t            self.createItem(piece);\n\t          }\n\t        }\n\t      });\n\t    }, 0);\n\t  }\n\n\t  /**\n\t   * Triggered on <input> keypress.\n\t   *\n\t   */\n\t  onKeyPress(e) {\n\t    var self = this;\n\t    if (self.isLocked) {\n\t      preventDefault(e);\n\t      return;\n\t    }\n\t    var character = String.fromCharCode(e.keyCode || e.which);\n\t    if (self.settings.create && self.settings.mode === 'multi' && character === self.settings.delimiter) {\n\t      self.createItem();\n\t      preventDefault(e);\n\t      return;\n\t    }\n\t  }\n\n\t  /**\n\t   * Triggered on <input> keydown.\n\t   *\n\t   */\n\t  onKeyDown(e) {\n\t    var self = this;\n\t    self.ignoreHover = true;\n\t    if (self.isLocked) {\n\t      if (e.keyCode !== KEY_TAB) {\n\t        preventDefault(e);\n\t      }\n\t      return;\n\t    }\n\t    switch (e.keyCode) {\n\t      // ctrl+A: select all\n\t      case KEY_A:\n\t        if (isKeyDown(KEY_SHORTCUT, e)) {\n\t          if (self.control_input.value == '') {\n\t            preventDefault(e);\n\t            self.selectAll();\n\t            return;\n\t          }\n\t        }\n\t        break;\n\n\t      // esc: close dropdown\n\t      case KEY_ESC:\n\t        if (self.isOpen) {\n\t          preventDefault(e, true);\n\t          self.close();\n\t        }\n\t        self.clearActiveItems();\n\t        return;\n\n\t      // down: open dropdown or move selection down\n\t      case KEY_DOWN:\n\t        if (!self.isOpen && self.hasOptions) {\n\t          self.open();\n\t        } else if (self.activeOption) {\n\t          let next = self.getAdjacent(self.activeOption, 1);\n\t          if (next) self.setActiveOption(next);\n\t        }\n\t        preventDefault(e);\n\t        return;\n\n\t      // up: move selection up\n\t      case KEY_UP:\n\t        if (self.activeOption) {\n\t          let prev = self.getAdjacent(self.activeOption, -1);\n\t          if (prev) self.setActiveOption(prev);\n\t        }\n\t        preventDefault(e);\n\t        return;\n\n\t      // return: select active option\n\t      case KEY_RETURN:\n\t        if (self.canSelect(self.activeOption)) {\n\t          self.onOptionSelect(e, self.activeOption);\n\t          preventDefault(e);\n\n\t          // if the option_create=null, the dropdown might be closed\n\t        } else if (self.settings.create && self.createItem()) {\n\t          preventDefault(e);\n\n\t          // don't submit form when searching for a value\n\t        } else if (document.activeElement == self.control_input && self.isOpen) {\n\t          preventDefault(e);\n\t        }\n\t        return;\n\n\t      // left: modifiy item selection to the left\n\t      case KEY_LEFT:\n\t        self.advanceSelection(-1, e);\n\t        return;\n\n\t      // right: modifiy item selection to the right\n\t      case KEY_RIGHT:\n\t        self.advanceSelection(1, e);\n\t        return;\n\n\t      // tab: select active option and/or create item\n\t      case KEY_TAB:\n\t        if (self.settings.selectOnTab) {\n\t          if (self.canSelect(self.activeOption)) {\n\t            self.onOptionSelect(e, self.activeOption);\n\n\t            // prevent default [tab] behaviour of jump to the next field\n\t            // if select isFull, then the dropdown won't be open and [tab] will work normally\n\t            preventDefault(e);\n\t          }\n\t          if (self.settings.create && self.createItem()) {\n\t            preventDefault(e);\n\t          }\n\t        }\n\t        return;\n\n\t      // delete|backspace: delete items\n\t      case KEY_BACKSPACE:\n\t      case KEY_DELETE:\n\t        self.deleteSelection(e);\n\t        return;\n\t    }\n\n\t    // don't enter text in the control_input when active items are selected\n\t    if (self.isInputHidden && !isKeyDown(KEY_SHORTCUT, e)) {\n\t      preventDefault(e);\n\t    }\n\t  }\n\n\t  /**\n\t   * Triggered on <input> keyup.\n\t   *\n\t   */\n\t  onInput(e) {\n\t    if (this.isLocked) {\n\t      return;\n\t    }\n\t    const value = this.inputValue();\n\t    if (this.lastValue === value) return;\n\t    this.lastValue = value;\n\t    if (value == '') {\n\t      this._onInput();\n\t      return;\n\t    }\n\t    if (this.refreshTimeout) {\n\t      clearTimeout(this.refreshTimeout);\n\t    }\n\t    this.refreshTimeout = timeout(() => {\n\t      this.refreshTimeout = null;\n\t      this._onInput();\n\t    }, this.settings.refreshThrottle);\n\t  }\n\t  _onInput() {\n\t    const value = this.lastValue;\n\t    if (this.settings.shouldLoad.call(this, value)) {\n\t      this.load(value);\n\t    }\n\t    this.refreshOptions();\n\t    this.trigger('type', value);\n\t  }\n\n\t  /**\n\t   * Triggered when the user rolls over\n\t   * an option in the autocomplete dropdown menu.\n\t   *\n\t   */\n\t  onOptionHover(evt, option) {\n\t    if (this.ignoreHover) return;\n\t    this.setActiveOption(option, false);\n\t  }\n\n\t  /**\n\t   * Triggered on <input> focus.\n\t   *\n\t   */\n\t  onFocus(e) {\n\t    var self = this;\n\t    var wasFocused = self.isFocused;\n\t    if (self.isDisabled || self.isReadOnly) {\n\t      self.blur();\n\t      preventDefault(e);\n\t      return;\n\t    }\n\t    if (self.ignoreFocus) return;\n\t    self.isFocused = true;\n\t    if (self.settings.preload === 'focus') self.preload();\n\t    if (!wasFocused) self.trigger('focus');\n\t    if (!self.activeItems.length) {\n\t      self.inputState();\n\t      self.refreshOptions(!!self.settings.openOnFocus);\n\t    }\n\t    self.refreshState();\n\t  }\n\n\t  /**\n\t   * Triggered on <input> blur.\n\t   *\n\t   */\n\t  onBlur(e) {\n\t    if (document.hasFocus() === false) return;\n\t    var self = this;\n\t    if (!self.isFocused) return;\n\t    self.isFocused = false;\n\t    self.ignoreFocus = false;\n\t    var deactivate = () => {\n\t      self.close();\n\t      self.setActiveItem();\n\t      self.setCaret(self.items.length);\n\t      self.trigger('blur');\n\t    };\n\t    if (self.settings.create && self.settings.createOnBlur) {\n\t      self.createItem(null, deactivate);\n\t    } else {\n\t      deactivate();\n\t    }\n\t  }\n\n\t  /**\n\t   * Triggered when the user clicks on an option\n\t   * in the autocomplete dropdown menu.\n\t   *\n\t   */\n\t  onOptionSelect(evt, option) {\n\t    var value,\n\t      self = this;\n\n\t    // should not be possible to trigger a option under a disabled optgroup\n\t    if (option.parentElement && option.parentElement.matches('[data-disabled]')) {\n\t      return;\n\t    }\n\t    if (option.classList.contains('create')) {\n\t      self.createItem(null, () => {\n\t        if (self.settings.closeAfterSelect) {\n\t          self.close();\n\t        }\n\t      });\n\t    } else {\n\t      value = option.dataset.value;\n\t      if (typeof value !== 'undefined') {\n\t        self.lastQuery = null;\n\t        self.addItem(value);\n\t        if (self.settings.closeAfterSelect) {\n\t          self.close();\n\t        }\n\t        if (!self.settings.hideSelected && evt.type && /click/.test(evt.type)) {\n\t          self.setActiveOption(option);\n\t        }\n\t      }\n\t    }\n\t  }\n\n\t  /**\n\t   * Return true if the given option can be selected\n\t   *\n\t   */\n\t  canSelect(option) {\n\t    if (this.isOpen && option && this.dropdown_content.contains(option)) {\n\t      return true;\n\t    }\n\t    return false;\n\t  }\n\n\t  /**\n\t   * Triggered when the user clicks on an item\n\t   * that has been selected.\n\t   *\n\t   */\n\t  onItemSelect(evt, item) {\n\t    var self = this;\n\t    if (!self.isLocked && self.settings.mode === 'multi') {\n\t      preventDefault(evt);\n\t      self.setActiveItem(item, evt);\n\t      return true;\n\t    }\n\t    return false;\n\t  }\n\n\t  /**\n\t   * Determines whether or not to invoke\n\t   * the user-provided option provider / loader\n\t   *\n\t   * Note, there is a subtle difference between\n\t   * this.canLoad() and this.settings.shouldLoad();\n\t   *\n\t   *\t- settings.shouldLoad() is a user-input validator.\n\t   *\tWhen false is returned, the not_loading template\n\t   *\twill be added to the dropdown\n\t   *\n\t   *\t- canLoad() is lower level validator that checks\n\t   * \tthe Tom Select instance. There is no inherent user\n\t   *\tfeedback when canLoad returns false\n\t   *\n\t   */\n\t  canLoad(value) {\n\t    if (!this.settings.load) return false;\n\t    if (this.loadedSearches.hasOwnProperty(value)) return false;\n\t    return true;\n\t  }\n\n\t  /**\n\t   * Invokes the user-provided option provider / loader.\n\t   *\n\t   */\n\t  load(value) {\n\t    const self = this;\n\t    if (!self.canLoad(value)) return;\n\t    addClasses(self.wrapper, self.settings.loadingClass);\n\t    self.loading++;\n\t    const callback = self.loadCallback.bind(self);\n\t    self.settings.load.call(self, value, callback);\n\t  }\n\n\t  /**\n\t   * Invoked by the user-provided option provider\n\t   *\n\t   */\n\t  loadCallback(options, optgroups) {\n\t    const self = this;\n\t    self.loading = Math.max(self.loading - 1, 0);\n\t    self.lastQuery = null;\n\t    self.clearActiveOption(); // when new results load, focus should be on first option\n\t    self.setupOptions(options, optgroups);\n\t    self.refreshOptions(self.isFocused && !self.isInputHidden);\n\t    if (!self.loading) {\n\t      removeClasses(self.wrapper, self.settings.loadingClass);\n\t    }\n\t    self.trigger('load', options, optgroups);\n\t  }\n\t  preload() {\n\t    var classList = this.wrapper.classList;\n\t    if (classList.contains('preloaded')) return;\n\t    classList.add('preloaded');\n\t    this.load('');\n\t  }\n\n\t  /**\n\t   * Sets the input field of the control to the specified value.\n\t   *\n\t   */\n\t  setTextboxValue(value = '') {\n\t    var input = this.control_input;\n\t    var changed = input.value !== value;\n\t    if (changed) {\n\t      input.value = value;\n\t      triggerEvent(input, 'update');\n\t      this.lastValue = value;\n\t    }\n\t  }\n\n\t  /**\n\t   * Returns the value of the control. If multiple items\n\t   * can be selected (e.g. <select multiple>), this returns\n\t   * an array. If only one item can be selected, this\n\t   * returns a string.\n\t   *\n\t   */\n\t  getValue() {\n\t    if (this.is_select_tag && this.input.hasAttribute('multiple')) {\n\t      return this.items;\n\t    }\n\t    return this.items.join(this.settings.delimiter);\n\t  }\n\n\t  /**\n\t   * Resets the selected items to the given value.\n\t   *\n\t   */\n\t  setValue(value, silent) {\n\t    var events = silent ? [] : ['change'];\n\t    debounce_events(this, events, () => {\n\t      this.clear(silent);\n\t      this.addItems(value, silent);\n\t    });\n\t  }\n\n\t  /**\n\t   * Resets the number of max items to the given value\n\t   *\n\t   */\n\t  setMaxItems(value) {\n\t    if (value === 0) value = null; //reset to unlimited items.\n\t    this.settings.maxItems = value;\n\t    this.refreshState();\n\t  }\n\n\t  /**\n\t   * Sets the selected item.\n\t   *\n\t   */\n\t  setActiveItem(item, e) {\n\t    var self = this;\n\t    var eventName;\n\t    var i, begin, end, swap;\n\t    var last;\n\t    if (self.settings.mode === 'single') return;\n\n\t    // clear the active selection\n\t    if (!item) {\n\t      self.clearActiveItems();\n\t      if (self.isFocused) {\n\t        self.inputState();\n\t      }\n\t      return;\n\t    }\n\n\t    // modify selection\n\t    eventName = e && e.type.toLowerCase();\n\t    if (eventName === 'click' && isKeyDown('shiftKey', e) && self.activeItems.length) {\n\t      last = self.getLastActive();\n\t      begin = Array.prototype.indexOf.call(self.control.children, last);\n\t      end = Array.prototype.indexOf.call(self.control.children, item);\n\t      if (begin > end) {\n\t        swap = begin;\n\t        begin = end;\n\t        end = swap;\n\t      }\n\t      for (i = begin; i <= end; i++) {\n\t        item = self.control.children[i];\n\t        if (self.activeItems.indexOf(item) === -1) {\n\t          self.setActiveItemClass(item);\n\t        }\n\t      }\n\t      preventDefault(e);\n\t    } else if (eventName === 'click' && isKeyDown(KEY_SHORTCUT, e) || eventName === 'keydown' && isKeyDown('shiftKey', e)) {\n\t      if (item.classList.contains('active')) {\n\t        self.removeActiveItem(item);\n\t      } else {\n\t        self.setActiveItemClass(item);\n\t      }\n\t    } else {\n\t      self.clearActiveItems();\n\t      self.setActiveItemClass(item);\n\t    }\n\n\t    // ensure control has focus\n\t    self.inputState();\n\t    if (!self.isFocused) {\n\t      self.focus();\n\t    }\n\t  }\n\n\t  /**\n\t   * Set the active and last-active classes\n\t   *\n\t   */\n\t  setActiveItemClass(item) {\n\t    const self = this;\n\t    const last_active = self.control.querySelector('.last-active');\n\t    if (last_active) removeClasses(last_active, 'last-active');\n\t    addClasses(item, 'active last-active');\n\t    self.trigger('item_select', item);\n\t    if (self.activeItems.indexOf(item) == -1) {\n\t      self.activeItems.push(item);\n\t    }\n\t  }\n\n\t  /**\n\t   * Remove active item\n\t   *\n\t   */\n\t  removeActiveItem(item) {\n\t    var idx = this.activeItems.indexOf(item);\n\t    this.activeItems.splice(idx, 1);\n\t    removeClasses(item, 'active');\n\t  }\n\n\t  /**\n\t   * Clears all the active items\n\t   *\n\t   */\n\t  clearActiveItems() {\n\t    removeClasses(this.activeItems, 'active');\n\t    this.activeItems = [];\n\t  }\n\n\t  /**\n\t   * Sets the selected item in the dropdown menu\n\t   * of available options.\n\t   *\n\t   */\n\t  setActiveOption(option, scroll = true) {\n\t    if (option === this.activeOption) {\n\t      return;\n\t    }\n\t    this.clearActiveOption();\n\t    if (!option) return;\n\t    this.activeOption = option;\n\t    setAttr(this.focus_node, {\n\t      'aria-activedescendant': option.getAttribute('id')\n\t    });\n\t    setAttr(option, {\n\t      'aria-selected': 'true'\n\t    });\n\t    addClasses(option, 'active');\n\t    if (scroll) this.scrollToOption(option);\n\t  }\n\n\t  /**\n\t   * Sets the dropdown_content scrollTop to display the option\n\t   *\n\t   */\n\t  scrollToOption(option, behavior) {\n\t    if (!option) return;\n\t    const content = this.dropdown_content;\n\t    const height_menu = content.clientHeight;\n\t    const scrollTop = content.scrollTop || 0;\n\t    const height_item = option.offsetHeight;\n\t    const y = option.getBoundingClientRect().top - content.getBoundingClientRect().top + scrollTop;\n\t    if (y + height_item > height_menu + scrollTop) {\n\t      this.scroll(y - height_menu + height_item, behavior);\n\t    } else if (y < scrollTop) {\n\t      this.scroll(y, behavior);\n\t    }\n\t  }\n\n\t  /**\n\t   * Scroll the dropdown to the given position\n\t   *\n\t   */\n\t  scroll(scrollTop, behavior) {\n\t    const content = this.dropdown_content;\n\t    if (behavior) {\n\t      content.style.scrollBehavior = behavior;\n\t    }\n\t    content.scrollTop = scrollTop;\n\t    content.style.scrollBehavior = '';\n\t  }\n\n\t  /**\n\t   * Clears the active option\n\t   *\n\t   */\n\t  clearActiveOption() {\n\t    if (this.activeOption) {\n\t      removeClasses(this.activeOption, 'active');\n\t      setAttr(this.activeOption, {\n\t        'aria-selected': null\n\t      });\n\t    }\n\t    this.activeOption = null;\n\t    setAttr(this.focus_node, {\n\t      'aria-activedescendant': null\n\t    });\n\t  }\n\n\t  /**\n\t   * Selects all items (CTRL + A).\n\t   */\n\t  selectAll() {\n\t    const self = this;\n\t    if (self.settings.mode === 'single') return;\n\t    const activeItems = self.controlChildren();\n\t    if (!activeItems.length) return;\n\t    self.inputState();\n\t    self.close();\n\t    self.activeItems = activeItems;\n\t    iterate$1(activeItems, item => {\n\t      self.setActiveItemClass(item);\n\t    });\n\t  }\n\n\t  /**\n\t   * Determines if the control_input should be in a hidden or visible state\n\t   *\n\t   */\n\t  inputState() {\n\t    var self = this;\n\t    if (!self.control.contains(self.control_input)) return;\n\t    setAttr(self.control_input, {\n\t      placeholder: self.settings.placeholder\n\t    });\n\t    if (self.activeItems.length > 0 || !self.isFocused && self.settings.hidePlaceholder && self.items.length > 0) {\n\t      self.setTextboxValue();\n\t      self.isInputHidden = true;\n\t    } else {\n\t      if (self.settings.hidePlaceholder && self.items.length > 0) {\n\t        setAttr(self.control_input, {\n\t          placeholder: ''\n\t        });\n\t      }\n\t      self.isInputHidden = false;\n\t    }\n\t    self.wrapper.classList.toggle('input-hidden', self.isInputHidden);\n\t  }\n\n\t  /**\n\t   * Get the input value\n\t   */\n\t  inputValue() {\n\t    return this.control_input.value.trim();\n\t  }\n\n\t  /**\n\t   * Gives the control focus.\n\t   */\n\t  focus() {\n\t    var self = this;\n\t    if (self.isDisabled || self.isReadOnly) return;\n\t    self.ignoreFocus = true;\n\t    if (self.control_input.offsetWidth) {\n\t      self.control_input.focus();\n\t    } else {\n\t      self.focus_node.focus();\n\t    }\n\t    setTimeout(() => {\n\t      self.ignoreFocus = false;\n\t      self.onFocus();\n\t    }, 0);\n\t  }\n\n\t  /**\n\t   * Forces the control out of focus.\n\t   *\n\t   */\n\t  blur() {\n\t    this.focus_node.blur();\n\t    this.onBlur();\n\t  }\n\n\t  /**\n\t   * Returns a function that scores an object\n\t   * to show how good of a match it is to the\n\t   * provided query.\n\t   *\n\t   * @return {function}\n\t   */\n\t  getScoreFunction(query) {\n\t    return this.sifter.getScoreFunction(query, this.getSearchOptions());\n\t  }\n\n\t  /**\n\t   * Returns search options for sifter (the system\n\t   * for scoring and sorting results).\n\t   *\n\t   * @see https://github.com/orchidjs/sifter.js\n\t   * @return {object}\n\t   */\n\t  getSearchOptions() {\n\t    var settings = this.settings;\n\t    var sort = settings.sortField;\n\t    if (typeof settings.sortField === 'string') {\n\t      sort = [{\n\t        field: settings.sortField\n\t      }];\n\t    }\n\t    return {\n\t      fields: settings.searchField,\n\t      conjunction: settings.searchConjunction,\n\t      sort: sort,\n\t      nesting: settings.nesting\n\t    };\n\t  }\n\n\t  /**\n\t   * Searches through available options and returns\n\t   * a sorted array of matches.\n\t   *\n\t   */\n\t  search(query) {\n\t    var result, calculateScore;\n\t    var self = this;\n\t    var options = this.getSearchOptions();\n\n\t    // validate user-provided result scoring function\n\t    if (self.settings.score) {\n\t      calculateScore = self.settings.score.call(self, query);\n\t      if (typeof calculateScore !== 'function') {\n\t        throw new Error('Tom Select \"score\" setting must be a function that returns a function');\n\t      }\n\t    }\n\n\t    // perform search\n\t    if (query !== self.lastQuery) {\n\t      self.lastQuery = query;\n\t      result = self.sifter.search(query, Object.assign(options, {\n\t        score: calculateScore\n\t      }));\n\t      self.currentResults = result;\n\t    } else {\n\t      result = Object.assign({}, self.currentResults);\n\t    }\n\n\t    // filter out selected items\n\t    if (self.settings.hideSelected) {\n\t      result.items = result.items.filter(item => {\n\t        let hashed = hash_key(item.id);\n\t        return !(hashed && self.items.indexOf(hashed) !== -1);\n\t      });\n\t    }\n\t    return result;\n\t  }\n\n\t  /**\n\t   * Refreshes the list of available options shown\n\t   * in the autocomplete dropdown menu.\n\t   *\n\t   */\n\t  refreshOptions(triggerDropdown = true) {\n\t    var i, j, k, n, optgroup, optgroups, html, has_create_option, active_group;\n\t    var create;\n\t    const groups = {};\n\t    const groups_order = [];\n\t    var self = this;\n\t    var query = self.inputValue();\n\t    const same_query = query === self.lastQuery || query == '' && self.lastQuery == null;\n\t    var results = self.search(query);\n\t    var active_option = null;\n\t    var show_dropdown = self.settings.shouldOpen || false;\n\t    var dropdown_content = self.dropdown_content;\n\t    if (same_query) {\n\t      active_option = self.activeOption;\n\t      if (active_option) {\n\t        active_group = active_option.closest('[data-group]');\n\t      }\n\t    }\n\n\t    // build markup\n\t    n = results.items.length;\n\t    if (typeof self.settings.maxOptions === 'number') {\n\t      n = Math.min(n, self.settings.maxOptions);\n\t    }\n\t    if (n > 0) {\n\t      show_dropdown = true;\n\t    }\n\n\t    // get fragment for group and the position of the group in group_order\n\t    const getGroupFragment = (optgroup, order) => {\n\t      let group_order_i = groups[optgroup];\n\t      if (group_order_i !== undefined) {\n\t        let order_group = groups_order[group_order_i];\n\t        if (order_group !== undefined) {\n\t          return [group_order_i, order_group.fragment];\n\t        }\n\t      }\n\t      let group_fragment = document.createDocumentFragment();\n\t      group_order_i = groups_order.length;\n\t      groups_order.push({\n\t        fragment: group_fragment,\n\t        order,\n\t        optgroup\n\t      });\n\t      return [group_order_i, group_fragment];\n\t    };\n\n\t    // render and group available options individually\n\t    for (i = 0; i < n; i++) {\n\t      // get option dom element\n\t      let item = results.items[i];\n\t      if (!item) continue;\n\t      let opt_value = item.id;\n\t      let option = self.options[opt_value];\n\t      if (option === undefined) continue;\n\t      let opt_hash = get_hash(opt_value);\n\t      let option_el = self.getOption(opt_hash, true);\n\n\t      // toggle 'selected' class\n\t      if (!self.settings.hideSelected) {\n\t        option_el.classList.toggle('selected', self.items.includes(opt_hash));\n\t      }\n\t      optgroup = option[self.settings.optgroupField] || '';\n\t      optgroups = Array.isArray(optgroup) ? optgroup : [optgroup];\n\t      for (j = 0, k = optgroups && optgroups.length; j < k; j++) {\n\t        optgroup = optgroups[j];\n\t        let order = option.$order;\n\t        let self_optgroup = self.optgroups[optgroup];\n\t        if (self_optgroup === undefined) {\n\t          optgroup = '';\n\t        } else {\n\t          order = self_optgroup.$order;\n\t        }\n\t        const [group_order_i, group_fragment] = getGroupFragment(optgroup, order);\n\n\t        // nodes can only have one parent, so if the option is in mutple groups, we need a clone\n\t        if (j > 0) {\n\t          option_el = option_el.cloneNode(true);\n\t          setAttr(option_el, {\n\t            id: option.$id + '-clone-' + j,\n\t            'aria-selected': null\n\t          });\n\t          option_el.classList.add('ts-cloned');\n\t          removeClasses(option_el, 'active');\n\n\t          // make sure we keep the activeOption in the same group\n\t          if (self.activeOption && self.activeOption.dataset.value == opt_value) {\n\t            if (active_group && active_group.dataset.group === optgroup.toString()) {\n\t              active_option = option_el;\n\t            }\n\t          }\n\t        }\n\t        group_fragment.appendChild(option_el);\n\t        if (optgroup != '') {\n\t          groups[optgroup] = group_order_i;\n\t        }\n\t      }\n\t    }\n\n\t    // sort optgroups\n\t    if (self.settings.lockOptgroupOrder) {\n\t      groups_order.sort((a, b) => {\n\t        return a.order - b.order;\n\t      });\n\t    }\n\n\t    // render optgroup headers & join groups\n\t    html = document.createDocumentFragment();\n\t    iterate$1(groups_order, group_order => {\n\t      let group_fragment = group_order.fragment;\n\t      let optgroup = group_order.optgroup;\n\t      if (!group_fragment || !group_fragment.children.length) return;\n\t      let group_heading = self.optgroups[optgroup];\n\t      if (group_heading !== undefined) {\n\t        let group_options = document.createDocumentFragment();\n\t        let header = self.render('optgroup_header', group_heading);\n\t        append(group_options, header);\n\t        append(group_options, group_fragment);\n\t        let group_html = self.render('optgroup', {\n\t          group: group_heading,\n\t          options: group_options\n\t        });\n\t        append(html, group_html);\n\t      } else {\n\t        append(html, group_fragment);\n\t      }\n\t    });\n\t    dropdown_content.innerHTML = '';\n\t    append(dropdown_content, html);\n\n\t    // highlight matching terms inline\n\t    if (self.settings.highlight) {\n\t      removeHighlight(dropdown_content);\n\t      if (results.query.length && results.tokens.length) {\n\t        iterate$1(results.tokens, tok => {\n\t          highlight(dropdown_content, tok.regex);\n\t        });\n\t      }\n\t    }\n\n\t    // helper method for adding templates to dropdown\n\t    var add_template = template => {\n\t      let content = self.render(template, {\n\t        input: query\n\t      });\n\t      if (content) {\n\t        show_dropdown = true;\n\t        dropdown_content.insertBefore(content, dropdown_content.firstChild);\n\t      }\n\t      return content;\n\t    };\n\n\t    // add loading message\n\t    if (self.loading) {\n\t      add_template('loading');\n\n\t      // invalid query\n\t    } else if (!self.settings.shouldLoad.call(self, query)) {\n\t      add_template('not_loading');\n\n\t      // add no_results message\n\t    } else if (results.items.length === 0) {\n\t      add_template('no_results');\n\t    }\n\n\t    // add create option\n\t    has_create_option = self.canCreate(query);\n\t    if (has_create_option) {\n\t      create = add_template('option_create');\n\t    }\n\n\t    // activate\n\t    self.hasOptions = results.items.length > 0 || has_create_option;\n\t    if (show_dropdown) {\n\t      if (results.items.length > 0) {\n\t        if (!active_option && self.settings.mode === 'single' && self.items[0] != undefined) {\n\t          active_option = self.getOption(self.items[0]);\n\t        }\n\t        if (!dropdown_content.contains(active_option)) {\n\t          let active_index = 0;\n\t          if (create && !self.settings.addPrecedence) {\n\t            active_index = 1;\n\t          }\n\t          active_option = self.selectable()[active_index];\n\t        }\n\t      } else if (create) {\n\t        active_option = create;\n\t      }\n\t      if (triggerDropdown && !self.isOpen) {\n\t        self.open();\n\t        self.scrollToOption(active_option, 'auto');\n\t      }\n\t      self.setActiveOption(active_option);\n\t    } else {\n\t      self.clearActiveOption();\n\t      if (triggerDropdown && self.isOpen) {\n\t        self.close(false); // if create_option=null, we want the dropdown to close but not reset the textbox value\n\t      }\n\t    }\n\t  }\n\n\t  /**\n\t   * Return list of selectable options\n\t   *\n\t   */\n\t  selectable() {\n\t    return this.dropdown_content.querySelectorAll('[data-selectable]');\n\t  }\n\n\t  /**\n\t   * Adds an available option. If it already exists,\n\t   * nothing will happen. Note: this does not refresh\n\t   * the options list dropdown (use `refreshOptions`\n\t   * for that).\n\t   *\n\t   * Usage:\n\t   *\n\t   *   this.addOption(data)\n\t   *\n\t   */\n\t  addOption(data, user_created = false) {\n\t    const self = this;\n\n\t    // @deprecated 1.7.7\n\t    // use addOptions( array, user_created ) for adding multiple options\n\t    if (Array.isArray(data)) {\n\t      self.addOptions(data, user_created);\n\t      return false;\n\t    }\n\t    const key = hash_key(data[self.settings.valueField]);\n\t    if (key === null || self.options.hasOwnProperty(key)) {\n\t      return false;\n\t    }\n\t    data.$order = data.$order || ++self.order;\n\t    data.$id = self.inputId + '-opt-' + data.$order;\n\t    self.options[key] = data;\n\t    self.lastQuery = null;\n\t    if (user_created) {\n\t      self.userOptions[key] = user_created;\n\t      self.trigger('option_add', key, data);\n\t    }\n\t    return key;\n\t  }\n\n\t  /**\n\t   * Add multiple options\n\t   *\n\t   */\n\t  addOptions(data, user_created = false) {\n\t    iterate$1(data, dat => {\n\t      this.addOption(dat, user_created);\n\t    });\n\t  }\n\n\t  /**\n\t   * @deprecated 1.7.7\n\t   */\n\t  registerOption(data) {\n\t    return this.addOption(data);\n\t  }\n\n\t  /**\n\t   * Registers an option group to the pool of option groups.\n\t   *\n\t   * @return {boolean|string}\n\t   */\n\t  registerOptionGroup(data) {\n\t    var key = hash_key(data[this.settings.optgroupValueField]);\n\t    if (key === null) return false;\n\t    data.$order = data.$order || ++this.order;\n\t    this.optgroups[key] = data;\n\t    return key;\n\t  }\n\n\t  /**\n\t   * Registers a new optgroup for options\n\t   * to be bucketed into.\n\t   *\n\t   */\n\t  addOptionGroup(id, data) {\n\t    var hashed_id;\n\t    data[this.settings.optgroupValueField] = id;\n\t    if (hashed_id = this.registerOptionGroup(data)) {\n\t      this.trigger('optgroup_add', hashed_id, data);\n\t    }\n\t  }\n\n\t  /**\n\t   * Removes an existing option group.\n\t   *\n\t   */\n\t  removeOptionGroup(id) {\n\t    if (this.optgroups.hasOwnProperty(id)) {\n\t      delete this.optgroups[id];\n\t      this.clearCache();\n\t      this.trigger('optgroup_remove', id);\n\t    }\n\t  }\n\n\t  /**\n\t   * Clears all existing option groups.\n\t   */\n\t  clearOptionGroups() {\n\t    this.optgroups = {};\n\t    this.clearCache();\n\t    this.trigger('optgroup_clear');\n\t  }\n\n\t  /**\n\t   * Updates an option available for selection. If\n\t   * it is visible in the selected items or options\n\t   * dropdown, it will be re-rendered automatically.\n\t   *\n\t   */\n\t  updateOption(value, data) {\n\t    const self = this;\n\t    var item_new;\n\t    var index_item;\n\t    const value_old = hash_key(value);\n\t    const value_new = hash_key(data[self.settings.valueField]);\n\n\t    // sanity checks\n\t    if (value_old === null) return;\n\t    const data_old = self.options[value_old];\n\t    if (data_old == undefined) return;\n\t    if (typeof value_new !== 'string') throw new Error('Value must be set in option data');\n\t    const option = self.getOption(value_old);\n\t    const item = self.getItem(value_old);\n\t    data.$order = data.$order || data_old.$order;\n\t    delete self.options[value_old];\n\n\t    // invalidate render cache\n\t    // don't remove existing node yet, we'll remove it after replacing it\n\t    self.uncacheValue(value_new);\n\t    self.options[value_new] = data;\n\n\t    // update the option if it's in the dropdown\n\t    if (option) {\n\t      if (self.dropdown_content.contains(option)) {\n\t        const option_new = self._render('option', data);\n\t        replaceNode(option, option_new);\n\t        if (self.activeOption === option) {\n\t          self.setActiveOption(option_new);\n\t        }\n\t      }\n\t      option.remove();\n\t    }\n\n\t    // update the item if we have one\n\t    if (item) {\n\t      index_item = self.items.indexOf(value_old);\n\t      if (index_item !== -1) {\n\t        self.items.splice(index_item, 1, value_new);\n\t      }\n\t      item_new = self._render('item', data);\n\t      if (item.classList.contains('active')) addClasses(item_new, 'active');\n\t      replaceNode(item, item_new);\n\t    }\n\n\t    // invalidate last query because we might have updated the sortField\n\t    self.lastQuery = null;\n\t  }\n\n\t  /**\n\t   * Removes a single option.\n\t   *\n\t   */\n\t  removeOption(value, silent) {\n\t    const self = this;\n\t    value = get_hash(value);\n\t    self.uncacheValue(value);\n\t    delete self.userOptions[value];\n\t    delete self.options[value];\n\t    self.lastQuery = null;\n\t    self.trigger('option_remove', value);\n\t    self.removeItem(value, silent);\n\t  }\n\n\t  /**\n\t   * Clears all options.\n\t   */\n\t  clearOptions(filter) {\n\t    const boundFilter = (filter || this.clearFilter).bind(this);\n\t    this.loadedSearches = {};\n\t    this.userOptions = {};\n\t    this.clearCache();\n\t    const selected = {};\n\t    iterate$1(this.options, (option, key) => {\n\t      if (boundFilter(option, key)) {\n\t        selected[key] = option;\n\t      }\n\t    });\n\t    this.options = this.sifter.items = selected;\n\t    this.lastQuery = null;\n\t    this.trigger('option_clear');\n\t  }\n\n\t  /**\n\t   * Used by clearOptions() to decide whether or not an option should be removed\n\t   * Return true to keep an option, false to remove\n\t   *\n\t   */\n\t  clearFilter(option, value) {\n\t    if (this.items.indexOf(value) >= 0) {\n\t      return true;\n\t    }\n\t    return false;\n\t  }\n\n\t  /**\n\t   * Returns the dom element of the option\n\t   * matching the given value.\n\t   *\n\t   */\n\t  getOption(value, create = false) {\n\t    const hashed = hash_key(value);\n\t    if (hashed === null) return null;\n\t    const option = this.options[hashed];\n\t    if (option != undefined) {\n\t      if (option.$div) {\n\t        return option.$div;\n\t      }\n\t      if (create) {\n\t        return this._render('option', option);\n\t      }\n\t    }\n\t    return null;\n\t  }\n\n\t  /**\n\t   * Returns the dom element of the next or previous dom element of the same type\n\t   * Note: adjacent options may not be adjacent DOM elements (optgroups)\n\t   *\n\t   */\n\t  getAdjacent(option, direction, type = 'option') {\n\t    var self = this,\n\t      all;\n\t    if (!option) {\n\t      return null;\n\t    }\n\t    if (type == 'item') {\n\t      all = self.controlChildren();\n\t    } else {\n\t      all = self.dropdown_content.querySelectorAll('[data-selectable]');\n\t    }\n\t    for (let i = 0; i < all.length; i++) {\n\t      if (all[i] != option) {\n\t        continue;\n\t      }\n\t      if (direction > 0) {\n\t        return all[i + 1];\n\t      }\n\t      return all[i - 1];\n\t    }\n\t    return null;\n\t  }\n\n\t  /**\n\t   * Returns the dom element of the item\n\t   * matching the given value.\n\t   *\n\t   */\n\t  getItem(item) {\n\t    if (typeof item == 'object') {\n\t      return item;\n\t    }\n\t    var value = hash_key(item);\n\t    return value !== null ? this.control.querySelector(`[data-value=\"${addSlashes(value)}\"]`) : null;\n\t  }\n\n\t  /**\n\t   * \"Selects\" multiple items at once. Adds them to the list\n\t   * at the current caret position.\n\t   *\n\t   */\n\t  addItems(values, silent) {\n\t    var self = this;\n\t    var items = Array.isArray(values) ? values : [values];\n\t    items = items.filter(x => self.items.indexOf(x) === -1);\n\t    const last_item = items[items.length - 1];\n\t    items.forEach(item => {\n\t      self.isPending = item !== last_item;\n\t      self.addItem(item, silent);\n\t    });\n\t  }\n\n\t  /**\n\t   * \"Selects\" an item. Adds it to the list\n\t   * at the current caret position.\n\t   *\n\t   */\n\t  addItem(value, silent) {\n\t    var events = silent ? [] : ['change', 'dropdown_close'];\n\t    debounce_events(this, events, () => {\n\t      var item, wasFull;\n\t      const self = this;\n\t      const inputMode = self.settings.mode;\n\t      const hashed = hash_key(value);\n\t      if (hashed && self.items.indexOf(hashed) !== -1) {\n\t        if (inputMode === 'single') {\n\t          self.close();\n\t        }\n\t        if (inputMode === 'single' || !self.settings.duplicates) {\n\t          return;\n\t        }\n\t      }\n\t      if (hashed === null || !self.options.hasOwnProperty(hashed)) return;\n\t      if (inputMode === 'single') self.clear(silent);\n\t      if (inputMode === 'multi' && self.isFull()) return;\n\t      item = self._render('item', self.options[hashed]);\n\t      if (self.control.contains(item)) {\n\t        // duplicates\n\t        item = item.cloneNode(true);\n\t      }\n\t      wasFull = self.isFull();\n\t      self.items.splice(self.caretPos, 0, hashed);\n\t      self.insertAtCaret(item);\n\t      if (self.isSetup) {\n\t        // update menu / remove the option (if this is not one item being added as part of series)\n\t        if (!self.isPending && self.settings.hideSelected) {\n\t          let option = self.getOption(hashed);\n\t          let next = self.getAdjacent(option, 1);\n\t          if (next) {\n\t            self.setActiveOption(next);\n\t          }\n\t        }\n\n\t        // refreshOptions after setActiveOption(),\n\t        // otherwise setActiveOption() will be called by refreshOptions() with the wrong value\n\t        if (!self.isPending && !self.settings.closeAfterSelect) {\n\t          self.refreshOptions(self.isFocused && inputMode !== 'single');\n\t        }\n\n\t        // hide the menu if the maximum number of items have been selected or no options are left\n\t        if (self.settings.closeAfterSelect != false && self.isFull()) {\n\t          self.close();\n\t        } else if (!self.isPending) {\n\t          self.positionDropdown();\n\t        }\n\t        self.trigger('item_add', hashed, item);\n\t        if (!self.isPending) {\n\t          self.updateOriginalInput({\n\t            silent: silent\n\t          });\n\t        }\n\t      }\n\t      if (!self.isPending || !wasFull && self.isFull()) {\n\t        self.inputState();\n\t        self.refreshState();\n\t      }\n\t    });\n\t  }\n\n\t  /**\n\t   * Removes the selected item matching\n\t   * the provided value.\n\t   *\n\t   */\n\t  removeItem(item = null, silent) {\n\t    const self = this;\n\t    item = self.getItem(item);\n\t    if (!item) return;\n\t    var i, idx;\n\t    const value = item.dataset.value;\n\t    i = nodeIndex(item);\n\t    item.remove();\n\t    if (item.classList.contains('active')) {\n\t      idx = self.activeItems.indexOf(item);\n\t      self.activeItems.splice(idx, 1);\n\t      removeClasses(item, 'active');\n\t    }\n\t    self.items.splice(i, 1);\n\t    self.lastQuery = null;\n\t    if (!self.settings.persist && self.userOptions.hasOwnProperty(value)) {\n\t      self.removeOption(value, silent);\n\t    }\n\t    if (i < self.caretPos) {\n\t      self.setCaret(self.caretPos - 1);\n\t    }\n\t    self.updateOriginalInput({\n\t      silent: silent\n\t    });\n\t    self.refreshState();\n\t    self.positionDropdown();\n\t    self.trigger('item_remove', value, item);\n\t  }\n\n\t  /**\n\t   * Invokes the `create` method provided in the\n\t   * TomSelect options that should provide the data\n\t   * for the new item, given the user input.\n\t   *\n\t   * Once this completes, it will be added\n\t   * to the item list.\n\t   *\n\t   */\n\t  createItem(input = null, callback = () => {}) {\n\t    // triggerDropdown parameter @deprecated 2.1.1\n\t    if (arguments.length === 3) {\n\t      callback = arguments[2];\n\t    }\n\t    if (typeof callback != 'function') {\n\t      callback = () => {};\n\t    }\n\t    var self = this;\n\t    var caret = self.caretPos;\n\t    var output;\n\t    input = input || self.inputValue();\n\t    if (!self.canCreate(input)) {\n\t      callback();\n\t      return false;\n\t    }\n\t    self.lock();\n\t    var created = false;\n\t    var create = data => {\n\t      self.unlock();\n\t      if (!data || typeof data !== 'object') return callback();\n\t      var value = hash_key(data[self.settings.valueField]);\n\t      if (typeof value !== 'string') {\n\t        return callback();\n\t      }\n\t      self.setTextboxValue();\n\t      self.addOption(data, true);\n\t      self.setCaret(caret);\n\t      self.addItem(value);\n\t      callback(data);\n\t      created = true;\n\t    };\n\t    if (typeof self.settings.create === 'function') {\n\t      output = self.settings.create.call(this, input, create);\n\t    } else {\n\t      output = {\n\t        [self.settings.labelField]: input,\n\t        [self.settings.valueField]: input\n\t      };\n\t    }\n\t    if (!created) {\n\t      create(output);\n\t    }\n\t    return true;\n\t  }\n\n\t  /**\n\t   * Re-renders the selected item lists.\n\t   */\n\t  refreshItems() {\n\t    var self = this;\n\t    self.lastQuery = null;\n\t    if (self.isSetup) {\n\t      self.addItems(self.items);\n\t    }\n\t    self.updateOriginalInput();\n\t    self.refreshState();\n\t  }\n\n\t  /**\n\t   * Updates all state-dependent attributes\n\t   * and CSS classes.\n\t   */\n\t  refreshState() {\n\t    const self = this;\n\t    self.refreshValidityState();\n\t    const isFull = self.isFull();\n\t    const isLocked = self.isLocked;\n\t    self.wrapper.classList.toggle('rtl', self.rtl);\n\t    const wrap_classList = self.wrapper.classList;\n\t    wrap_classList.toggle('focus', self.isFocused);\n\t    wrap_classList.toggle('disabled', self.isDisabled);\n\t    wrap_classList.toggle('readonly', self.isReadOnly);\n\t    wrap_classList.toggle('required', self.isRequired);\n\t    wrap_classList.toggle('invalid', !self.isValid);\n\t    wrap_classList.toggle('locked', isLocked);\n\t    wrap_classList.toggle('full', isFull);\n\t    wrap_classList.toggle('input-active', self.isFocused && !self.isInputHidden);\n\t    wrap_classList.toggle('dropdown-active', self.isOpen);\n\t    wrap_classList.toggle('has-options', isEmptyObject(self.options));\n\t    wrap_classList.toggle('has-items', self.items.length > 0);\n\t  }\n\n\t  /**\n\t   * Update the `required` attribute of both input and control input.\n\t   *\n\t   * The `required` property needs to be activated on the control input\n\t   * for the error to be displayed at the right place. `required` also\n\t   * needs to be temporarily deactivated on the input since the input is\n\t   * hidden and can't show errors.\n\t   */\n\t  refreshValidityState() {\n\t    var self = this;\n\t    if (!self.input.validity) {\n\t      return;\n\t    }\n\t    self.isValid = self.input.validity.valid;\n\t    self.isInvalid = !self.isValid;\n\t  }\n\n\t  /**\n\t   * Determines whether or not more items can be added\n\t   * to the control without exceeding the user-defined maximum.\n\t   *\n\t   * @returns {boolean}\n\t   */\n\t  isFull() {\n\t    return this.settings.maxItems !== null && this.items.length >= this.settings.maxItems;\n\t  }\n\n\t  /**\n\t   * Refreshes the original <select> or <input>\n\t   * element to reflect the current state.\n\t   *\n\t   */\n\t  updateOriginalInput(opts = {}) {\n\t    const self = this;\n\t    var option, label;\n\t    const empty_option = self.input.querySelector('option[value=\"\"]');\n\t    if (self.is_select_tag) {\n\t      const selected = [];\n\t      const has_selected = self.input.querySelectorAll('option:checked').length;\n\t      function AddSelected(option_el, value, label) {\n\t        if (!option_el) {\n\t          option_el = getDom('<option value=\"' + escape_html(value) + '\">' + escape_html(label) + '</option>');\n\t        }\n\n\t        // don't move empty option from top of list\n\t        // fixes bug in firefox https://bugzilla.mozilla.org/show_bug.cgi?id=1725293\n\t        if (option_el != empty_option) {\n\t          self.input.append(option_el);\n\t        }\n\t        selected.push(option_el);\n\n\t        // marking empty option as selected can break validation\n\t        // fixes https://github.com/orchidjs/tom-select/issues/303\n\t        if (option_el != empty_option || has_selected > 0) {\n\t          option_el.selected = true;\n\t        }\n\t        return option_el;\n\t      }\n\n\t      // unselect all selected options\n\t      self.input.querySelectorAll('option:checked').forEach(option_el => {\n\t        option_el.selected = false;\n\t      });\n\n\t      // nothing selected?\n\t      if (self.items.length == 0 && self.settings.mode == 'single') {\n\t        AddSelected(empty_option, \"\", \"\");\n\n\t        // order selected <option> tags for values in self.items\n\t      } else {\n\t        self.items.forEach(value => {\n\t          option = self.options[value];\n\t          label = option[self.settings.labelField] || '';\n\t          if (selected.includes(option.$option)) {\n\t            const reuse_opt = self.input.querySelector(`option[value=\"${addSlashes(value)}\"]:not(:checked)`);\n\t            AddSelected(reuse_opt, value, label);\n\t          } else {\n\t            option.$option = AddSelected(option.$option, value, label);\n\t          }\n\t        });\n\t      }\n\t    } else {\n\t      self.input.value = self.getValue();\n\t    }\n\t    if (self.isSetup) {\n\t      if (!opts.silent) {\n\t        self.trigger('change', self.getValue());\n\t      }\n\t    }\n\t  }\n\n\t  /**\n\t   * Shows the autocomplete dropdown containing\n\t   * the available options.\n\t   */\n\t  open() {\n\t    var self = this;\n\t    if (self.isLocked || self.isOpen || self.settings.mode === 'multi' && self.isFull()) return;\n\t    self.isOpen = true;\n\t    setAttr(self.focus_node, {\n\t      'aria-expanded': 'true'\n\t    });\n\t    self.refreshState();\n\t    applyCSS(self.dropdown, {\n\t      visibility: 'hidden',\n\t      display: 'block'\n\t    });\n\t    self.positionDropdown();\n\t    applyCSS(self.dropdown, {\n\t      visibility: 'visible',\n\t      display: 'block'\n\t    });\n\t    self.focus();\n\t    self.trigger('dropdown_open', self.dropdown);\n\t  }\n\n\t  /**\n\t   * Closes the autocomplete dropdown menu.\n\t   */\n\t  close(setTextboxValue = true) {\n\t    var self = this;\n\t    var trigger = self.isOpen;\n\t    if (setTextboxValue) {\n\t      // before blur() to prevent form onchange event\n\t      self.setTextboxValue();\n\t      if (self.settings.mode === 'single' && self.items.length) {\n\t        self.inputState();\n\t      }\n\t    }\n\t    self.isOpen = false;\n\t    setAttr(self.focus_node, {\n\t      'aria-expanded': 'false'\n\t    });\n\t    applyCSS(self.dropdown, {\n\t      display: 'none'\n\t    });\n\t    if (self.settings.hideSelected) {\n\t      self.clearActiveOption();\n\t    }\n\t    self.refreshState();\n\t    if (trigger) self.trigger('dropdown_close', self.dropdown);\n\t  }\n\n\t  /**\n\t   * Calculates and applies the appropriate\n\t   * position of the dropdown if dropdownParent = 'body'.\n\t   * Otherwise, position is determined by css\n\t   */\n\t  positionDropdown() {\n\t    if (this.settings.dropdownParent !== 'body') {\n\t      return;\n\t    }\n\t    var context = this.control;\n\t    var rect = context.getBoundingClientRect();\n\t    var top = context.offsetHeight + rect.top + window.scrollY;\n\t    var left = rect.left + window.scrollX;\n\t    applyCSS(this.dropdown, {\n\t      width: rect.width + 'px',\n\t      top: top + 'px',\n\t      left: left + 'px'\n\t    });\n\t  }\n\n\t  /**\n\t   * Resets / clears all selected items\n\t   * from the control.\n\t   *\n\t   */\n\t  clear(silent) {\n\t    var self = this;\n\t    if (!self.items.length) return;\n\t    var items = self.controlChildren();\n\t    iterate$1(items, item => {\n\t      self.removeItem(item, true);\n\t    });\n\t    self.inputState();\n\t    if (!silent) self.updateOriginalInput();\n\t    self.trigger('clear');\n\t  }\n\n\t  /**\n\t   * A helper method for inserting an element\n\t   * at the current caret position.\n\t   *\n\t   */\n\t  insertAtCaret(el) {\n\t    const self = this;\n\t    const caret = self.caretPos;\n\t    const target = self.control;\n\t    target.insertBefore(el, target.children[caret] || null);\n\t    self.setCaret(caret + 1);\n\t  }\n\n\t  /**\n\t   * Removes the current selected item(s).\n\t   *\n\t   */\n\t  deleteSelection(e) {\n\t    var direction, selection, caret, tail;\n\t    var self = this;\n\t    direction = e && e.keyCode === KEY_BACKSPACE ? -1 : 1;\n\t    selection = getSelection(self.control_input);\n\n\t    // determine items that will be removed\n\t    const rm_items = [];\n\t    if (self.activeItems.length) {\n\t      tail = getTail(self.activeItems, direction);\n\t      caret = nodeIndex(tail);\n\t      if (direction > 0) {\n\t        caret++;\n\t      }\n\t      iterate$1(self.activeItems, item => rm_items.push(item));\n\t    } else if ((self.isFocused || self.settings.mode === 'single') && self.items.length) {\n\t      const items = self.controlChildren();\n\t      let rm_item;\n\t      if (direction < 0 && selection.start === 0 && selection.length === 0) {\n\t        rm_item = items[self.caretPos - 1];\n\t      } else if (direction > 0 && selection.start === self.inputValue().length) {\n\t        rm_item = items[self.caretPos];\n\t      }\n\t      if (rm_item !== undefined) {\n\t        rm_items.push(rm_item);\n\t      }\n\t    }\n\t    if (!self.shouldDelete(rm_items, e)) {\n\t      return false;\n\t    }\n\t    preventDefault(e, true);\n\n\t    // perform removal\n\t    if (typeof caret !== 'undefined') {\n\t      self.setCaret(caret);\n\t    }\n\t    while (rm_items.length) {\n\t      self.removeItem(rm_items.pop());\n\t    }\n\t    self.inputState();\n\t    self.positionDropdown();\n\t    self.refreshOptions(false);\n\t    return true;\n\t  }\n\n\t  /**\n\t   * Return true if the items should be deleted\n\t   */\n\t  shouldDelete(items, evt) {\n\t    const values = items.map(item => item.dataset.value);\n\n\t    // allow the callback to abort\n\t    if (!values.length || typeof this.settings.onDelete === 'function' && this.settings.onDelete(values, evt) === false) {\n\t      return false;\n\t    }\n\t    return true;\n\t  }\n\n\t  /**\n\t   * Selects the previous / next item (depending on the `direction` argument).\n\t   *\n\t   * > 0 - right\n\t   * < 0 - left\n\t   *\n\t   */\n\t  advanceSelection(direction, e) {\n\t    var last_active,\n\t      adjacent,\n\t      self = this;\n\t    if (self.rtl) direction *= -1;\n\t    if (self.inputValue().length) return;\n\n\t    // add or remove to active items\n\t    if (isKeyDown(KEY_SHORTCUT, e) || isKeyDown('shiftKey', e)) {\n\t      last_active = self.getLastActive(direction);\n\t      if (last_active) {\n\t        if (!last_active.classList.contains('active')) {\n\t          adjacent = last_active;\n\t        } else {\n\t          adjacent = self.getAdjacent(last_active, direction, 'item');\n\t        }\n\n\t        // if no active item, get items adjacent to the control input\n\t      } else if (direction > 0) {\n\t        adjacent = self.control_input.nextElementSibling;\n\t      } else {\n\t        adjacent = self.control_input.previousElementSibling;\n\t      }\n\t      if (adjacent) {\n\t        if (adjacent.classList.contains('active')) {\n\t          self.removeActiveItem(last_active);\n\t        }\n\t        self.setActiveItemClass(adjacent); // mark as last_active !! after removeActiveItem() on last_active\n\t      }\n\n\t      // move caret to the left or right\n\t    } else {\n\t      self.moveCaret(direction);\n\t    }\n\t  }\n\t  moveCaret(direction) {}\n\n\t  /**\n\t   * Get the last active item\n\t   *\n\t   */\n\t  getLastActive(direction) {\n\t    let last_active = this.control.querySelector('.last-active');\n\t    if (last_active) {\n\t      return last_active;\n\t    }\n\t    var result = this.control.querySelectorAll('.active');\n\t    if (result) {\n\t      return getTail(result, direction);\n\t    }\n\t  }\n\n\t  /**\n\t   * Moves the caret to the specified index.\n\t   *\n\t   * The input must be moved by leaving it in place and moving the\n\t   * siblings, due to the fact that focus cannot be restored once lost\n\t   * on mobile webkit devices\n\t   *\n\t   */\n\t  setCaret(new_pos) {\n\t    this.caretPos = this.items.length;\n\t  }\n\n\t  /**\n\t   * Return list of item dom elements\n\t   *\n\t   */\n\t  controlChildren() {\n\t    return Array.from(this.control.querySelectorAll('[data-ts-item]'));\n\t  }\n\n\t  /**\n\t   * Disables user input on the control. Used while\n\t   * items are being asynchronously created.\n\t   */\n\t  lock() {\n\t    this.setLocked(true);\n\t  }\n\n\t  /**\n\t   * Re-enables user input on the control.\n\t   */\n\t  unlock() {\n\t    this.setLocked(false);\n\t  }\n\n\t  /**\n\t   * Disable or enable user input on the control\n\t   */\n\t  setLocked(lock = this.isReadOnly || this.isDisabled) {\n\t    this.isLocked = lock;\n\t    this.refreshState();\n\t  }\n\n\t  /**\n\t   * Disables user input on the control completely.\n\t   * While disabled, it cannot receive focus.\n\t   */\n\t  disable() {\n\t    this.setDisabled(true);\n\t    this.close();\n\t  }\n\n\t  /**\n\t   * Enables the control so that it can respond\n\t   * to focus and user input.\n\t   */\n\t  enable() {\n\t    this.setDisabled(false);\n\t  }\n\t  setDisabled(disabled) {\n\t    this.focus_node.tabIndex = disabled ? -1 : this.tabIndex;\n\t    this.isDisabled = disabled;\n\t    this.input.disabled = disabled;\n\t    this.control_input.disabled = disabled;\n\t    this.setLocked();\n\t  }\n\t  setReadOnly(isReadOnly) {\n\t    this.isReadOnly = isReadOnly;\n\t    this.input.readOnly = isReadOnly;\n\t    this.control_input.readOnly = isReadOnly;\n\t    this.setLocked();\n\t  }\n\n\t  /**\n\t   * Completely destroys the control and\n\t   * unbinds all event listeners so that it can\n\t   * be garbage collected.\n\t   */\n\t  destroy() {\n\t    var self = this;\n\t    var revertSettings = self.revertSettings;\n\t    self.trigger('destroy');\n\t    self.off();\n\t    self.wrapper.remove();\n\t    self.dropdown.remove();\n\t    self.input.innerHTML = revertSettings.innerHTML;\n\t    self.input.tabIndex = revertSettings.tabIndex;\n\t    removeClasses(self.input, 'tomselected', 'ts-hidden-accessible');\n\t    self._destroy();\n\t    delete self.input.tomselect;\n\t  }\n\n\t  /**\n\t   * A helper method for rendering \"item\" and\n\t   * \"option\" templates, given the data.\n\t   *\n\t   */\n\t  render(templateName, data) {\n\t    var id, html;\n\t    const self = this;\n\t    if (typeof this.settings.render[templateName] !== 'function') {\n\t      return null;\n\t    }\n\n\t    // render markup\n\t    html = self.settings.render[templateName].call(this, data, escape_html);\n\t    if (!html) {\n\t      return null;\n\t    }\n\t    html = getDom(html);\n\n\t    // add mandatory attributes\n\t    if (templateName === 'option' || templateName === 'option_create') {\n\t      if (data[self.settings.disabledField]) {\n\t        setAttr(html, {\n\t          'aria-disabled': 'true'\n\t        });\n\t      } else {\n\t        setAttr(html, {\n\t          'data-selectable': ''\n\t        });\n\t      }\n\t    } else if (templateName === 'optgroup') {\n\t      id = data.group[self.settings.optgroupValueField];\n\t      setAttr(html, {\n\t        'data-group': id\n\t      });\n\t      if (data.group[self.settings.disabledField]) {\n\t        setAttr(html, {\n\t          'data-disabled': ''\n\t        });\n\t      }\n\t    }\n\t    if (templateName === 'option' || templateName === 'item') {\n\t      const value = get_hash(data[self.settings.valueField]);\n\t      setAttr(html, {\n\t        'data-value': value\n\t      });\n\n\t      // make sure we have some classes if a template is overwritten\n\t      if (templateName === 'item') {\n\t        addClasses(html, self.settings.itemClass);\n\t        setAttr(html, {\n\t          'data-ts-item': ''\n\t        });\n\t      } else {\n\t        addClasses(html, self.settings.optionClass);\n\t        setAttr(html, {\n\t          role: 'option',\n\t          id: data.$id\n\t        });\n\n\t        // update cache\n\t        data.$div = html;\n\t        self.options[value] = data;\n\t      }\n\t    }\n\t    return html;\n\t  }\n\n\t  /**\n\t   * Type guarded rendering\n\t   *\n\t   */\n\t  _render(templateName, data) {\n\t    const html = this.render(templateName, data);\n\t    if (html == null) {\n\t      throw 'HTMLElement expected';\n\t    }\n\t    return html;\n\t  }\n\n\t  /**\n\t   * Clears the render cache for a template. If\n\t   * no template is given, clears all render\n\t   * caches.\n\t   *\n\t   */\n\t  clearCache() {\n\t    iterate$1(this.options, option => {\n\t      if (option.$div) {\n\t        option.$div.remove();\n\t        delete option.$div;\n\t      }\n\t    });\n\t  }\n\n\t  /**\n\t   * Removes a value from item and option caches\n\t   *\n\t   */\n\t  uncacheValue(value) {\n\t    const option_el = this.getOption(value);\n\t    if (option_el) option_el.remove();\n\t  }\n\n\t  /**\n\t   * Determines whether or not to display the\n\t   * create item prompt, given a user input.\n\t   *\n\t   */\n\t  canCreate(input) {\n\t    return this.settings.create && input.length > 0 && this.settings.createFilter.call(this, input);\n\t  }\n\n\t  /**\n\t   * Wraps this.`method` so that `new_fn` can be invoked 'before', 'after', or 'instead' of the original method\n\t   *\n\t   * this.hook('instead','onKeyDown',function( arg1, arg2 ...){\n\t   *\n\t   * });\n\t   */\n\t  hook(when, method, new_fn) {\n\t    var self = this;\n\t    var orig_method = self[method];\n\t    self[method] = function () {\n\t      var result, result_new;\n\t      if (when === 'after') {\n\t        result = orig_method.apply(self, arguments);\n\t      }\n\t      result_new = new_fn.apply(self, arguments);\n\t      if (when === 'instead') {\n\t        return result_new;\n\t      }\n\t      if (when === 'before') {\n\t        result = orig_method.apply(self, arguments);\n\t      }\n\t      return result;\n\t    };\n\t  }\n\t}\n\n\t/**\n\t * Plugin: \"change_listener\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\n\tfunction change_listener () {\n\t  addEvent(this.input, 'change', () => {\n\t    this.sync();\n\t  });\n\t}\n\n\t/**\n\t * Plugin: \"checkbox_options\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\n\tfunction checkbox_options (userOptions) {\n\t  var self = this;\n\t  var orig_onOptionSelect = self.onOptionSelect;\n\t  self.settings.hideSelected = false;\n\t  const cbOptions = Object.assign({\n\t    // so that the user may add different ones as well\n\t    className: \"tomselect-checkbox\",\n\t    // the following default to the historic plugin's values\n\t    checkedClassNames: undefined,\n\t    uncheckedClassNames: undefined\n\t  }, userOptions);\n\t  var UpdateChecked = function UpdateChecked(checkbox, toCheck) {\n\t    if (toCheck) {\n\t      checkbox.checked = true;\n\t      if (cbOptions.uncheckedClassNames) {\n\t        checkbox.classList.remove(...cbOptions.uncheckedClassNames);\n\t      }\n\t      if (cbOptions.checkedClassNames) {\n\t        checkbox.classList.add(...cbOptions.checkedClassNames);\n\t      }\n\t    } else {\n\t      checkbox.checked = false;\n\t      if (cbOptions.checkedClassNames) {\n\t        checkbox.classList.remove(...cbOptions.checkedClassNames);\n\t      }\n\t      if (cbOptions.uncheckedClassNames) {\n\t        checkbox.classList.add(...cbOptions.uncheckedClassNames);\n\t      }\n\t    }\n\t  };\n\n\t  // update the checkbox for an option\n\t  var UpdateCheckbox = function UpdateCheckbox(option) {\n\t    setTimeout(() => {\n\t      var checkbox = option.querySelector('input.' + cbOptions.className);\n\t      if (checkbox instanceof HTMLInputElement) {\n\t        UpdateChecked(checkbox, option.classList.contains('selected'));\n\t      }\n\t    }, 1);\n\t  };\n\n\t  // add checkbox to option template\n\t  self.hook('after', 'setupTemplates', () => {\n\t    var orig_render_option = self.settings.render.option;\n\t    self.settings.render.option = (data, escape_html) => {\n\t      var rendered = getDom(orig_render_option.call(self, data, escape_html));\n\t      var checkbox = document.createElement('input');\n\t      if (cbOptions.className) {\n\t        checkbox.classList.add(cbOptions.className);\n\t      }\n\t      checkbox.addEventListener('click', function (evt) {\n\t        preventDefault(evt);\n\t      });\n\t      checkbox.type = 'checkbox';\n\t      const hashed = hash_key(data[self.settings.valueField]);\n\t      UpdateChecked(checkbox, !!(hashed && self.items.indexOf(hashed) > -1));\n\t      rendered.prepend(checkbox);\n\t      return rendered;\n\t    };\n\t  });\n\n\t  // uncheck when item removed\n\t  self.on('item_remove', value => {\n\t    var option = self.getOption(value);\n\t    if (option) {\n\t      // if dropdown hasn't been opened yet, the option won't exist\n\t      option.classList.remove('selected'); // selected class won't be removed yet\n\t      UpdateCheckbox(option);\n\t    }\n\t  });\n\n\t  // check when item added\n\t  self.on('item_add', value => {\n\t    var option = self.getOption(value);\n\t    if (option) {\n\t      // if dropdown hasn't been opened yet, the option won't exist\n\t      UpdateCheckbox(option);\n\t    }\n\t  });\n\n\t  // remove items when selected option is clicked\n\t  self.hook('instead', 'onOptionSelect', (evt, option) => {\n\t    if (option.classList.contains('selected')) {\n\t      option.classList.remove('selected');\n\t      self.removeItem(option.dataset.value);\n\t      self.refreshOptions();\n\t      preventDefault(evt, true);\n\t      return;\n\t    }\n\t    orig_onOptionSelect.call(self, evt, option);\n\t    UpdateCheckbox(option);\n\t  });\n\t}\n\n\t/**\n\t * Plugin: \"dropdown_header\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\n\tfunction clear_button (userOptions) {\n\t  const self = this;\n\t  const options = Object.assign({\n\t    className: 'clear-button',\n\t    title: 'Clear All',\n\t    html: data => {\n\t      return `<div class=\"${data.className}\" title=\"${data.title}\">&#10799;</div>`;\n\t    }\n\t  }, userOptions);\n\t  self.on('initialize', () => {\n\t    var button = getDom(options.html(options));\n\t    button.addEventListener('click', evt => {\n\t      if (self.isLocked) return;\n\t      self.clear();\n\t      if (self.settings.mode === 'single' && self.settings.allowEmptyOption) {\n\t        self.addItem('');\n\t      }\n\t      evt.preventDefault();\n\t      evt.stopPropagation();\n\t    });\n\t    self.control.appendChild(button);\n\t  });\n\t}\n\n\t/**\n\t * Plugin: \"drag_drop\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\n\tconst insertAfter = (referenceNode, newNode) => {\n\t  var _referenceNode$parent;\n\t  (_referenceNode$parent = referenceNode.parentNode) == null || _referenceNode$parent.insertBefore(newNode, referenceNode.nextSibling);\n\t};\n\tconst insertBefore = (referenceNode, newNode) => {\n\t  var _referenceNode$parent2;\n\t  (_referenceNode$parent2 = referenceNode.parentNode) == null || _referenceNode$parent2.insertBefore(newNode, referenceNode);\n\t};\n\tconst isBefore = (referenceNode, newNode) => {\n\t  do {\n\t    var _newNode;\n\t    newNode = (_newNode = newNode) == null ? void 0 : _newNode.previousElementSibling;\n\t    if (referenceNode == newNode) {\n\t      return true;\n\t    }\n\t  } while (newNode && newNode.previousElementSibling);\n\t  return false;\n\t};\n\tfunction drag_drop () {\n\t  var self = this;\n\t  if (self.settings.mode !== 'multi') return;\n\t  var orig_lock = self.lock;\n\t  var orig_unlock = self.unlock;\n\t  let sortable = true;\n\t  let drag_item;\n\n\t  /**\n\t   * Add draggable attribute to item\n\t   */\n\t  self.hook('after', 'setupTemplates', () => {\n\t    var orig_render_item = self.settings.render.item;\n\t    self.settings.render.item = (data, escape) => {\n\t      const item = getDom(orig_render_item.call(self, data, escape));\n\t      setAttr(item, {\n\t        'draggable': 'true'\n\t      });\n\n\t      // prevent doc_mousedown (see tom-select.ts)\n\t      const mousedown = evt => {\n\t        if (!sortable) preventDefault(evt);\n\t        evt.stopPropagation();\n\t      };\n\t      const dragStart = evt => {\n\t        drag_item = item;\n\t        setTimeout(() => {\n\t          item.classList.add('ts-dragging');\n\t        }, 0);\n\t      };\n\t      const dragOver = evt => {\n\t        evt.preventDefault();\n\t        item.classList.add('ts-drag-over');\n\t        moveitem(item, drag_item);\n\t      };\n\t      const dragLeave = () => {\n\t        item.classList.remove('ts-drag-over');\n\t      };\n\t      const moveitem = (targetitem, dragitem) => {\n\t        if (dragitem === undefined) return;\n\t        if (isBefore(dragitem, item)) {\n\t          insertAfter(targetitem, dragitem);\n\t        } else {\n\t          insertBefore(targetitem, dragitem);\n\t        }\n\t      };\n\t      const dragend = () => {\n\t        var _drag_item;\n\t        document.querySelectorAll('.ts-drag-over').forEach(el => el.classList.remove('ts-drag-over'));\n\t        (_drag_item = drag_item) == null || _drag_item.classList.remove('ts-dragging');\n\t        drag_item = undefined;\n\t        var values = [];\n\t        self.control.querySelectorAll(`[data-value]`).forEach(el => {\n\t          if (el.dataset.value) {\n\t            let value = el.dataset.value;\n\t            if (value) {\n\t              values.push(value);\n\t            }\n\t          }\n\t        });\n\t        self.setValue(values);\n\t      };\n\t      addEvent(item, 'mousedown', mousedown);\n\t      addEvent(item, 'dragstart', dragStart);\n\t      addEvent(item, 'dragenter', dragOver);\n\t      addEvent(item, 'dragover', dragOver);\n\t      addEvent(item, 'dragleave', dragLeave);\n\t      addEvent(item, 'dragend', dragend);\n\t      return item;\n\t    };\n\t  });\n\t  self.hook('instead', 'lock', () => {\n\t    sortable = false;\n\t    return orig_lock.call(self);\n\t  });\n\t  self.hook('instead', 'unlock', () => {\n\t    sortable = true;\n\t    return orig_unlock.call(self);\n\t  });\n\t}\n\n\t/**\n\t * Plugin: \"dropdown_header\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\n\tfunction dropdown_header (userOptions) {\n\t  const self = this;\n\t  const options = Object.assign({\n\t    title: 'Untitled',\n\t    headerClass: 'dropdown-header',\n\t    titleRowClass: 'dropdown-header-title',\n\t    labelClass: 'dropdown-header-label',\n\t    closeClass: 'dropdown-header-close',\n\t    html: data => {\n\t      return '<div class=\"' + data.headerClass + '\">' + '<div class=\"' + data.titleRowClass + '\">' + '<span class=\"' + data.labelClass + '\">' + data.title + '</span>' + '<a class=\"' + data.closeClass + '\">&times;</a>' + '</div>' + '</div>';\n\t    }\n\t  }, userOptions);\n\t  self.on('initialize', () => {\n\t    var header = getDom(options.html(options));\n\t    var close_link = header.querySelector('.' + options.closeClass);\n\t    if (close_link) {\n\t      close_link.addEventListener('click', evt => {\n\t        preventDefault(evt, true);\n\t        self.close();\n\t      });\n\t    }\n\t    self.dropdown.insertBefore(header, self.dropdown.firstChild);\n\t  });\n\t}\n\n\t/**\n\t * Plugin: \"dropdown_input\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\n\tfunction caret_position () {\n\t  var self = this;\n\n\t  /**\n\t   * Moves the caret to the specified index.\n\t   *\n\t   * The input must be moved by leaving it in place and moving the\n\t   * siblings, due to the fact that focus cannot be restored once lost\n\t   * on mobile webkit devices\n\t   *\n\t   */\n\t  self.hook('instead', 'setCaret', new_pos => {\n\t    if (self.settings.mode === 'single' || !self.control.contains(self.control_input)) {\n\t      new_pos = self.items.length;\n\t    } else {\n\t      new_pos = Math.max(0, Math.min(self.items.length, new_pos));\n\t      if (new_pos != self.caretPos && !self.isPending) {\n\t        self.controlChildren().forEach((child, j) => {\n\t          if (j < new_pos) {\n\t            self.control_input.insertAdjacentElement('beforebegin', child);\n\t          } else {\n\t            self.control.appendChild(child);\n\t          }\n\t        });\n\t      }\n\t    }\n\t    self.caretPos = new_pos;\n\t  });\n\t  self.hook('instead', 'moveCaret', direction => {\n\t    if (!self.isFocused) return;\n\n\t    // move caret before or after selected items\n\t    const last_active = self.getLastActive(direction);\n\t    if (last_active) {\n\t      const idx = nodeIndex(last_active);\n\t      self.setCaret(direction > 0 ? idx + 1 : idx);\n\t      self.setActiveItem();\n\t      removeClasses(last_active, 'last-active');\n\n\t      // move caret left or right of current position\n\t    } else {\n\t      self.setCaret(self.caretPos + direction);\n\t    }\n\t  });\n\t}\n\n\t/**\n\t * Plugin: \"dropdown_input\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\n\tfunction dropdown_input () {\n\t  const self = this;\n\t  self.settings.shouldOpen = true; // make sure the input is shown even if there are no options to display in the dropdown\n\n\t  self.hook('before', 'setup', () => {\n\t    self.focus_node = self.control;\n\t    addClasses(self.control_input, 'dropdown-input');\n\t    const div = getDom('<div class=\"dropdown-input-wrap\">');\n\t    div.append(self.control_input);\n\t    self.dropdown.insertBefore(div, self.dropdown.firstChild);\n\n\t    // set a placeholder in the select control\n\t    const placeholder = getDom('<input class=\"items-placeholder\" tabindex=\"-1\" />');\n\t    placeholder.placeholder = self.settings.placeholder || '';\n\t    self.control.append(placeholder);\n\t  });\n\t  self.on('initialize', () => {\n\t    // set tabIndex on control to -1, otherwise [shift+tab] will put focus right back on control_input\n\t    self.control_input.addEventListener('keydown', evt => {\n\t      //addEvent(self.control_input,'keydown' as const,(evt:KeyboardEvent) =>{\n\t      switch (evt.keyCode) {\n\t        case KEY_ESC:\n\t          if (self.isOpen) {\n\t            preventDefault(evt, true);\n\t            self.close();\n\t          }\n\t          self.clearActiveItems();\n\t          return;\n\t        case KEY_TAB:\n\t          self.focus_node.tabIndex = -1;\n\t          break;\n\t      }\n\t      return self.onKeyDown.call(self, evt);\n\t    });\n\t    self.on('blur', () => {\n\t      self.focus_node.tabIndex = self.isDisabled ? -1 : self.tabIndex;\n\t    });\n\n\t    // give the control_input focus when the dropdown is open\n\t    self.on('dropdown_open', () => {\n\t      self.control_input.focus();\n\t    });\n\n\t    // prevent onBlur from closing when focus is on the control_input\n\t    const orig_onBlur = self.onBlur;\n\t    self.hook('instead', 'onBlur', evt => {\n\t      if (evt && evt.relatedTarget == self.control_input) return;\n\t      return orig_onBlur.call(self);\n\t    });\n\t    addEvent(self.control_input, 'blur', () => self.onBlur());\n\n\t    // return focus to control to allow further keyboard input\n\t    self.hook('before', 'close', () => {\n\t      if (!self.isOpen) return;\n\t      self.focus_node.focus({\n\t        preventScroll: true\n\t      });\n\t    });\n\t  });\n\t}\n\n\t/**\n\t * Plugin: \"input_autogrow\" (Tom Select)\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\n\tfunction input_autogrow () {\n\t  var self = this;\n\t  self.on('initialize', () => {\n\t    var test_input = document.createElement('span');\n\t    var control = self.control_input;\n\t    test_input.style.cssText = 'position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ';\n\t    self.wrapper.appendChild(test_input);\n\t    var transfer_styles = ['letterSpacing', 'fontSize', 'fontFamily', 'fontWeight', 'textTransform'];\n\t    for (const style_name of transfer_styles) {\n\t      // @ts-ignore TS7015 https://stackoverflow.com/a/50506154/697576\n\t      test_input.style[style_name] = control.style[style_name];\n\t    }\n\n\t    /**\n\t     * Set the control width\n\t     *\n\t     */\n\t    var resize = () => {\n\t      test_input.textContent = control.value;\n\t      control.style.width = test_input.clientWidth + 'px';\n\t    };\n\t    resize();\n\t    self.on('update item_add item_remove', resize);\n\t    addEvent(control, 'input', resize);\n\t    addEvent(control, 'keyup', resize);\n\t    addEvent(control, 'blur', resize);\n\t    addEvent(control, 'update', resize);\n\t  });\n\t}\n\n\t/**\n\t * Plugin: \"input_autogrow\" (Tom Select)\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\n\tfunction no_backspace_delete () {\n\t  var self = this;\n\t  var orig_deleteSelection = self.deleteSelection;\n\t  this.hook('instead', 'deleteSelection', evt => {\n\t    if (self.activeItems.length) {\n\t      return orig_deleteSelection.call(self, evt);\n\t    }\n\t    return false;\n\t  });\n\t}\n\n\t/**\n\t * Plugin: \"no_active_items\" (Tom Select)\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\n\tfunction no_active_items () {\n\t  this.hook('instead', 'setActiveItem', () => {});\n\t  this.hook('instead', 'selectAll', () => {});\n\t}\n\n\t/**\n\t * Plugin: \"optgroup_columns\" (Tom Select.js)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\n\tfunction optgroup_columns () {\n\t  var self = this;\n\t  var orig_keydown = self.onKeyDown;\n\t  self.hook('instead', 'onKeyDown', evt => {\n\t    var index, option, options, optgroup;\n\t    if (!self.isOpen || !(evt.keyCode === KEY_LEFT || evt.keyCode === KEY_RIGHT)) {\n\t      return orig_keydown.call(self, evt);\n\t    }\n\t    self.ignoreHover = true;\n\t    optgroup = parentMatch(self.activeOption, '[data-group]');\n\t    index = nodeIndex(self.activeOption, '[data-selectable]');\n\t    if (!optgroup) {\n\t      return;\n\t    }\n\t    if (evt.keyCode === KEY_LEFT) {\n\t      optgroup = optgroup.previousSibling;\n\t    } else {\n\t      optgroup = optgroup.nextSibling;\n\t    }\n\t    if (!optgroup) {\n\t      return;\n\t    }\n\t    options = optgroup.querySelectorAll('[data-selectable]');\n\t    option = options[Math.min(options.length - 1, index)];\n\t    if (option) {\n\t      self.setActiveOption(option);\n\t    }\n\t  });\n\t}\n\n\t/**\n\t * Plugin: \"remove_button\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\n\tfunction remove_button (userOptions) {\n\t  const options = Object.assign({\n\t    label: '&times;',\n\t    title: 'Remove',\n\t    className: 'remove',\n\t    append: true\n\t  }, userOptions);\n\n\t  //options.className = 'remove-single';\n\t  var self = this;\n\n\t  // override the render method to add remove button to each item\n\t  if (!options.append) {\n\t    return;\n\t  }\n\t  var html = '<a href=\"javascript:void(0)\" class=\"' + options.className + '\" tabindex=\"-1\" title=\"' + escape_html(options.title) + '\">' + options.label + '</a>';\n\t  self.hook('after', 'setupTemplates', () => {\n\t    var orig_render_item = self.settings.render.item;\n\t    self.settings.render.item = (data, escape) => {\n\t      var item = getDom(orig_render_item.call(self, data, escape));\n\t      var close_button = getDom(html);\n\t      item.appendChild(close_button);\n\t      addEvent(close_button, 'mousedown', evt => {\n\t        preventDefault(evt, true);\n\t      });\n\t      addEvent(close_button, 'click', evt => {\n\t        if (self.isLocked) return;\n\n\t        // propagating will trigger the dropdown to show for single mode\n\t        preventDefault(evt, true);\n\t        if (self.isLocked) return;\n\t        if (!self.shouldDelete([item], evt)) return;\n\t        self.removeItem(item);\n\t        self.refreshOptions(false);\n\t        self.inputState();\n\t      });\n\t      return item;\n\t    };\n\t  });\n\t}\n\n\t/**\n\t * Plugin: \"restore_on_backspace\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\n\tfunction restore_on_backspace (userOptions) {\n\t  const self = this;\n\t  const options = Object.assign({\n\t    text: option => {\n\t      return option[self.settings.labelField];\n\t    }\n\t  }, userOptions);\n\t  self.on('item_remove', function (value) {\n\t    if (!self.isFocused) {\n\t      return;\n\t    }\n\t    if (self.control_input.value.trim() === '') {\n\t      var option = self.options[value];\n\t      if (option) {\n\t        self.setTextboxValue(options.text.call(self, option));\n\t      }\n\t    }\n\t  });\n\t}\n\n\t/**\n\t * Plugin: \"restore_on_backspace\" (Tom Select)\n\t * Copyright (c) contributors\n\t *\n\t * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n\t * file except in compliance with the License. You may obtain a copy of the License at:\n\t * http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t * Unless required by applicable law or agreed to in writing, software distributed under\n\t * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n\t * ANY KIND, either express or implied. See the License for the specific language\n\t * governing permissions and limitations under the License.\n\t *\n\t */\n\n\tfunction virtual_scroll () {\n\t  const self = this;\n\t  const orig_canLoad = self.canLoad;\n\t  const orig_clearActiveOption = self.clearActiveOption;\n\t  const orig_loadCallback = self.loadCallback;\n\t  var pagination = {};\n\t  var dropdown_content;\n\t  var loading_more = false;\n\t  var load_more_opt;\n\t  var default_values = [];\n\t  if (!self.settings.shouldLoadMore) {\n\t    // return true if additional results should be loaded\n\t    self.settings.shouldLoadMore = () => {\n\t      const scroll_percent = dropdown_content.clientHeight / (dropdown_content.scrollHeight - dropdown_content.scrollTop);\n\t      if (scroll_percent > 0.9) {\n\t        return true;\n\t      }\n\t      if (self.activeOption) {\n\t        var selectable = self.selectable();\n\t        var index = Array.from(selectable).indexOf(self.activeOption);\n\t        if (index >= selectable.length - 2) {\n\t          return true;\n\t        }\n\t      }\n\t      return false;\n\t    };\n\t  }\n\t  if (!self.settings.firstUrl) {\n\t    throw 'virtual_scroll plugin requires a firstUrl() method';\n\t  }\n\n\t  // in order for virtual scrolling to work,\n\t  // options need to be ordered the same way they're returned from the remote data source\n\t  self.settings.sortField = [{\n\t    field: '$order'\n\t  }, {\n\t    field: '$score'\n\t  }];\n\n\t  // can we load more results for given query?\n\t  const canLoadMore = query => {\n\t    if (typeof self.settings.maxOptions === 'number' && dropdown_content.children.length >= self.settings.maxOptions) {\n\t      return false;\n\t    }\n\t    if (query in pagination && pagination[query]) {\n\t      return true;\n\t    }\n\t    return false;\n\t  };\n\t  const clearFilter = (option, value) => {\n\t    if (self.items.indexOf(value) >= 0 || default_values.indexOf(value) >= 0) {\n\t      return true;\n\t    }\n\t    return false;\n\t  };\n\n\t  // set the next url that will be\n\t  self.setNextUrl = (value, next_url) => {\n\t    pagination[value] = next_url;\n\t  };\n\n\t  // getUrl() to be used in settings.load()\n\t  self.getUrl = query => {\n\t    if (query in pagination) {\n\t      const next_url = pagination[query];\n\t      pagination[query] = false;\n\t      return next_url;\n\t    }\n\n\t    // if the user goes back to a previous query\n\t    // we need to load the first page again\n\t    self.clearPagination();\n\t    return self.settings.firstUrl.call(self, query);\n\t  };\n\n\t  // clear pagination\n\t  self.clearPagination = () => {\n\t    pagination = {};\n\t  };\n\n\t  // don't clear the active option (and cause unwanted dropdown scroll)\n\t  // while loading more results\n\t  self.hook('instead', 'clearActiveOption', () => {\n\t    if (loading_more) {\n\t      return;\n\t    }\n\t    return orig_clearActiveOption.call(self);\n\t  });\n\n\t  // override the canLoad method\n\t  self.hook('instead', 'canLoad', query => {\n\t    // first time the query has been seen\n\t    if (!(query in pagination)) {\n\t      return orig_canLoad.call(self, query);\n\t    }\n\t    return canLoadMore(query);\n\t  });\n\n\t  // wrap the load\n\t  self.hook('instead', 'loadCallback', (options, optgroups) => {\n\t    if (!loading_more) {\n\t      self.clearOptions(clearFilter);\n\t    } else if (load_more_opt) {\n\t      const first_option = options[0];\n\t      if (first_option !== undefined) {\n\t        load_more_opt.dataset.value = first_option[self.settings.valueField];\n\t      }\n\t    }\n\t    orig_loadCallback.call(self, options, optgroups);\n\t    loading_more = false;\n\t  });\n\n\t  // add templates to dropdown\n\t  //\tloading_more if we have another url in the queue\n\t  //\tno_more_results if we don't have another url in the queue\n\t  self.hook('after', 'refreshOptions', () => {\n\t    const query = self.lastValue;\n\t    var option;\n\t    if (canLoadMore(query)) {\n\t      option = self.render('loading_more', {\n\t        query: query\n\t      });\n\t      if (option) {\n\t        option.setAttribute('data-selectable', ''); // so that navigating dropdown with [down] keypresses can navigate to this node\n\t        load_more_opt = option;\n\t      }\n\t    } else if (query in pagination && !dropdown_content.querySelector('.no-results')) {\n\t      option = self.render('no_more_results', {\n\t        query: query\n\t      });\n\t    }\n\t    if (option) {\n\t      addClasses(option, self.settings.optionClass);\n\t      dropdown_content.append(option);\n\t    }\n\t  });\n\n\t  // add scroll listener and default templates\n\t  self.on('initialize', () => {\n\t    default_values = Object.keys(self.options);\n\t    dropdown_content = self.dropdown_content;\n\n\t    // default templates\n\t    self.settings.render = Object.assign({}, {\n\t      loading_more: () => {\n\t        return `<div class=\"loading-more-results\">Loading more results ... </div>`;\n\t      },\n\t      no_more_results: () => {\n\t        return `<div class=\"no-more-results\">No more results</div>`;\n\t      }\n\t    }, self.settings.render);\n\n\t    // watch dropdown content scroll position\n\t    dropdown_content.addEventListener('scroll', () => {\n\t      if (!self.settings.shouldLoadMore.call(self)) {\n\t        return;\n\t      }\n\n\t      // !important: this will get checked again in load() but we still need to check here otherwise loading_more will be set to true\n\t      if (!canLoadMore(self.lastValue)) {\n\t        return;\n\t      }\n\n\t      // don't call load() too much\n\t      if (loading_more) return;\n\t      loading_more = true;\n\t      self.load.call(self, self.lastValue);\n\t    });\n\t  });\n\t}\n\n\tTomSelect.define('change_listener', change_listener);\n\tTomSelect.define('checkbox_options', checkbox_options);\n\tTomSelect.define('clear_button', clear_button);\n\tTomSelect.define('drag_drop', drag_drop);\n\tTomSelect.define('dropdown_header', dropdown_header);\n\tTomSelect.define('caret_position', caret_position);\n\tTomSelect.define('dropdown_input', dropdown_input);\n\tTomSelect.define('input_autogrow', input_autogrow);\n\tTomSelect.define('no_backspace_delete', no_backspace_delete);\n\tTomSelect.define('no_active_items', no_active_items);\n\tTomSelect.define('optgroup_columns', optgroup_columns);\n\tTomSelect.define('remove_button', remove_button);\n\tTomSelect.define('restore_on_backspace', restore_on_backspace);\n\tTomSelect.define('virtual_scroll', virtual_scroll);\n\n\treturn TomSelect;\n\n}));\nvar tomSelect=function(el,opts){return new TomSelect(el,opts);} \n//# sourceMappingURL=tom-select.complete.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// nb. This is for IE10 and lower _only_.\nvar supportCustomEvent = window.CustomEvent;\nif (!supportCustomEvent || typeof supportCustomEvent === 'object') {\n  supportCustomEvent = function CustomEvent(event, x) {\n    x = x || {};\n    var ev = document.createEvent('CustomEvent');\n    ev.initCustomEvent(event, !!x.bubbles, !!x.cancelable, x.detail || null);\n    return ev;\n  };\n  supportCustomEvent.prototype = window.Event.prototype;\n}\n\n/**\n * Dispatches the passed event to both an \"on<type>\" handler as well as via the\n * normal dispatch operation. Does not bubble.\n *\n * @param {!EventTarget} target\n * @param {!Event} event\n * @return {boolean}\n */\nfunction safeDispatchEvent(target, event) {\n  var check = 'on' + event.type.toLowerCase();\n  if (typeof target[check] === 'function') {\n    target[check](event);\n  }\n  return target.dispatchEvent(event);\n}\n\n/**\n * @param {Element} el to check for stacking context\n * @return {boolean} whether this el or its parents creates a stacking context\n */\nfunction createsStackingContext(el) {\n  while (el && el !== document.body) {\n    var s = window.getComputedStyle(el);\n    var invalid = function(k, ok) {\n      return !(s[k] === undefined || s[k] === ok);\n    };\n\n    if (s.opacity < 1 ||\n        invalid('zIndex', 'auto') ||\n        invalid('transform', 'none') ||\n        invalid('mixBlendMode', 'normal') ||\n        invalid('filter', 'none') ||\n        invalid('perspective', 'none') ||\n        s['isolation'] === 'isolate' ||\n        s.position === 'fixed' ||\n        s.webkitOverflowScrolling === 'touch') {\n      return true;\n    }\n    el = el.parentElement;\n  }\n  return false;\n}\n\n/**\n * Finds the nearest <dialog> from the passed element.\n *\n * @param {Element} el to search from\n * @return {HTMLDialogElement} dialog found\n */\nfunction findNearestDialog(el) {\n  while (el) {\n    if (el.localName === 'dialog') {\n      return /** @type {HTMLDialogElement} */ (el);\n    }\n    if (el.parentElement) {\n      el = el.parentElement;\n    } else if (el.parentNode) {\n      el = el.parentNode.host;\n    } else {\n      el = null;\n    }\n  }\n  return null;\n}\n\n/**\n * Blur the specified element, as long as it's not the HTML body element.\n * This works around an IE9/10 bug - blurring the body causes Windows to\n * blur the whole application.\n *\n * @param {Element} el to blur\n */\nfunction safeBlur(el) {\n  // Find the actual focused element when the active element is inside a shadow root\n  while (el && el.shadowRoot && el.shadowRoot.activeElement) {\n    el = el.shadowRoot.activeElement;\n  }\n\n  if (el && el.blur && el !== document.body) {\n    el.blur();\n  }\n}\n\n/**\n * @param {!NodeList} nodeList to search\n * @param {Node} node to find\n * @return {boolean} whether node is inside nodeList\n */\nfunction inNodeList(nodeList, node) {\n  for (var i = 0; i < nodeList.length; ++i) {\n    if (nodeList[i] === node) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * @param {HTMLFormElement} el to check\n * @return {boolean} whether this form has method=\"dialog\"\n */\nfunction isFormMethodDialog(el) {\n  if (!el || !el.hasAttribute('method')) {\n    return false;\n  }\n  return el.getAttribute('method').toLowerCase() === 'dialog';\n}\n\n/**\n * @param {!DocumentFragment|!Element} hostElement\n * @return {?Element}\n */\nfunction findFocusableElementWithin(hostElement) {\n  // Note that this is 'any focusable area'. This list is probably not exhaustive, but the\n  // alternative involves stepping through and trying to focus everything.\n  var opts = ['button', 'input', 'keygen', 'select', 'textarea'];\n  var query = opts.map(function(el) {\n    return el + ':not([disabled])';\n  });\n  // TODO(samthor): tabindex values that are not numeric are not focusable.\n  query.push('[tabindex]:not([disabled]):not([tabindex=\"\"])');  // tabindex != \"\", not disabled\n  var target = hostElement.querySelector(query.join(', '));\n\n  if (!target && 'attachShadow' in Element.prototype) {\n    // If we haven't found a focusable target, see if the host element contains an element\n    // which has a shadowRoot.\n    // Recursively search for the first focusable item in shadow roots.\n    var elems = hostElement.querySelectorAll('*');\n    for (var i = 0; i < elems.length; i++) {\n      if (elems[i].tagName && elems[i].shadowRoot) {\n        target = findFocusableElementWithin(elems[i].shadowRoot);\n        if (target) {\n          break;\n        }\n      }\n    }\n  }\n  return target;\n}\n\n/**\n * Determines if an element is attached to the DOM.\n * @param {Element} element to check\n * @return {boolean} whether the element is in DOM\n */\nfunction isConnected(element) {\n  return element.isConnected || document.body.contains(element);\n}\n\n/**\n * @param {!Event} event\n * @return {?Element}\n */\nfunction findFormSubmitter(event) {\n  if (event.submitter) {\n    return event.submitter;\n  }\n\n  var form = event.target;\n  if (!(form instanceof HTMLFormElement)) {\n    return null;\n  }\n\n  var submitter = dialogPolyfill.formSubmitter;\n  if (!submitter) {\n    var target = event.target;\n    var root = ('getRootNode' in target && target.getRootNode() || document);\n    submitter = root.activeElement;\n  }\n\n  if (!submitter || submitter.form !== form) {\n    return null;\n  }\n  return submitter;\n}\n\n/**\n * @param {!Event} event\n */\nfunction maybeHandleSubmit(event) {\n  if (event.defaultPrevented) {\n    return;\n  }\n  var form = /** @type {!HTMLFormElement} */ (event.target);\n\n  // We'd have a value if we clicked on an imagemap.\n  var value = dialogPolyfill.imagemapUseValue;\n  var submitter = findFormSubmitter(event);\n  if (value === null && submitter) {\n    value = submitter.value;\n  }\n\n  // There should always be a dialog as this handler is added specifically on them, but check just\n  // in case.\n  var dialog = findNearestDialog(form);\n  if (!dialog) {\n    return;\n  }\n\n  // Prefer formmethod on the button.\n  var formmethod = submitter && submitter.getAttribute('formmethod') || form.getAttribute('method');\n  if (formmethod !== 'dialog') {\n    return;\n  }\n  event.preventDefault();\n\n  if (value != null) {\n    // nb. we explicitly check against null/undefined\n    dialog.close(value);\n  } else {\n    dialog.close();\n  }\n}\n\n/**\n * @param {!HTMLDialogElement} dialog to upgrade\n * @constructor\n */\nfunction dialogPolyfillInfo(dialog) {\n  this.dialog_ = dialog;\n  this.replacedStyleTop_ = false;\n  this.openAsModal_ = false;\n\n  // Set a11y role. Browsers that support dialog implicitly know this already.\n  if (!dialog.hasAttribute('role')) {\n    dialog.setAttribute('role', 'dialog');\n  }\n\n  dialog.show = this.show.bind(this);\n  dialog.showModal = this.showModal.bind(this);\n  dialog.close = this.close.bind(this);\n\n  dialog.addEventListener('submit', maybeHandleSubmit, false);\n\n  if (!('returnValue' in dialog)) {\n    dialog.returnValue = '';\n  }\n\n  if ('MutationObserver' in window) {\n    var mo = new MutationObserver(this.maybeHideModal.bind(this));\n    mo.observe(dialog, {attributes: true, attributeFilter: ['open']});\n  } else {\n    // IE10 and below support. Note that DOMNodeRemoved etc fire _before_ removal. They also\n    // seem to fire even if the element was removed as part of a parent removal. Use the removed\n    // events to force downgrade (useful if removed/immediately added).\n    var removed = false;\n    var cb = function() {\n      removed ? this.downgradeModal() : this.maybeHideModal();\n      removed = false;\n    }.bind(this);\n    var timeout;\n    var delayModel = function(ev) {\n      if (ev.target !== dialog) { return; }  // not for a child element\n      var cand = 'DOMNodeRemoved';\n      removed |= (ev.type.substr(0, cand.length) === cand);\n      window.clearTimeout(timeout);\n      timeout = window.setTimeout(cb, 0);\n    };\n    ['DOMAttrModified', 'DOMNodeRemoved', 'DOMNodeRemovedFromDocument'].forEach(function(name) {\n      dialog.addEventListener(name, delayModel);\n    });\n  }\n  // Note that the DOM is observed inside DialogManager while any dialog\n  // is being displayed as a modal, to catch modal removal from the DOM.\n\n  Object.defineProperty(dialog, 'open', {\n    set: this.setOpen.bind(this),\n    get: dialog.hasAttribute.bind(dialog, 'open')\n  });\n\n  this.backdrop_ = document.createElement('div');\n  this.backdrop_.className = 'backdrop';\n  this.backdrop_.addEventListener('mouseup'  , this.backdropMouseEvent_.bind(this));\n  this.backdrop_.addEventListener('mousedown', this.backdropMouseEvent_.bind(this));\n  this.backdrop_.addEventListener('click'    , this.backdropMouseEvent_.bind(this));\n}\n\ndialogPolyfillInfo.prototype = /** @type {HTMLDialogElement.prototype} */ ({\n\n  get dialog() {\n    return this.dialog_;\n  },\n\n  /**\n   * Maybe remove this dialog from the modal top layer. This is called when\n   * a modal dialog may no longer be tenable, e.g., when the dialog is no\n   * longer open or is no longer part of the DOM.\n   */\n  maybeHideModal: function() {\n    if (this.dialog_.hasAttribute('open') && isConnected(this.dialog_)) { return; }\n    this.downgradeModal();\n  },\n\n  /**\n   * Remove this dialog from the modal top layer, leaving it as a non-modal.\n   */\n  downgradeModal: function() {\n    if (!this.openAsModal_) { return; }\n    this.openAsModal_ = false;\n    this.dialog_.style.zIndex = '';\n\n    // This won't match the native <dialog> exactly because if the user set top on a centered\n    // polyfill dialog, that top gets thrown away when the dialog is closed. Not sure it's\n    // possible to polyfill this perfectly.\n    if (this.replacedStyleTop_) {\n      this.dialog_.style.top = '';\n      this.replacedStyleTop_ = false;\n    }\n\n    // Clear the backdrop and remove from the manager.\n    this.backdrop_.parentNode && this.backdrop_.parentNode.removeChild(this.backdrop_);\n    dialogPolyfill.dm.removeDialog(this);\n  },\n\n  /**\n   * @param {boolean} value whether to open or close this dialog\n   */\n  setOpen: function(value) {\n    if (value) {\n      this.dialog_.hasAttribute('open') || this.dialog_.setAttribute('open', '');\n    } else {\n      this.dialog_.removeAttribute('open');\n      this.maybeHideModal();  // nb. redundant with MutationObserver\n    }\n  },\n\n  /**\n   * Handles mouse events ('mouseup', 'mousedown', 'click') on the fake .backdrop element, redirecting them as if\n   * they were on the dialog itself.\n   *\n   * @param {!Event} e to redirect\n   */\n  backdropMouseEvent_: function(e) {\n    if (!this.dialog_.hasAttribute('tabindex')) {\n      // Clicking on the backdrop should move the implicit cursor, even if dialog cannot be\n      // focused. Create a fake thing to focus on. If the backdrop was _before_ the dialog, this\n      // would not be needed - clicks would move the implicit cursor there.\n      var fake = document.createElement('div');\n      this.dialog_.insertBefore(fake, this.dialog_.firstChild);\n      fake.tabIndex = -1;\n      fake.focus();\n      this.dialog_.removeChild(fake);\n    } else {\n      this.dialog_.focus();\n    }\n\n    var redirectedEvent = document.createEvent('MouseEvents');\n    redirectedEvent.initMouseEvent(e.type, e.bubbles, e.cancelable, window,\n        e.detail, e.screenX, e.screenY, e.clientX, e.clientY, e.ctrlKey,\n        e.altKey, e.shiftKey, e.metaKey, e.button, e.relatedTarget);\n    this.dialog_.dispatchEvent(redirectedEvent);\n    e.stopPropagation();\n  },\n\n  /**\n   * Focuses on the first focusable element within the dialog. This will always blur the current\n   * focus, even if nothing within the dialog is found.\n   */\n  focus_: function() {\n    // Find element with `autofocus` attribute, or fall back to the first form/tabindex control.\n    var target = this.dialog_.querySelector('[autofocus]:not([disabled])');\n    if (!target && this.dialog_.tabIndex >= 0) {\n      target = this.dialog_;\n    }\n    if (!target) {\n      target = findFocusableElementWithin(this.dialog_);\n    }\n    safeBlur(document.activeElement);\n    target && target.focus();\n  },\n\n  /**\n   * Sets the zIndex for the backdrop and dialog.\n   *\n   * @param {number} dialogZ\n   * @param {number} backdropZ\n   */\n  updateZIndex: function(dialogZ, backdropZ) {\n    if (dialogZ < backdropZ) {\n      throw new Error('dialogZ should never be < backdropZ');\n    }\n    this.dialog_.style.zIndex = dialogZ;\n    this.backdrop_.style.zIndex = backdropZ;\n  },\n\n  /**\n   * Shows the dialog. If the dialog is already open, this does nothing.\n   */\n  show: function() {\n    if (!this.dialog_.open) {\n      this.setOpen(true);\n      this.focus_();\n    }\n  },\n\n  /**\n   * Show this dialog modally.\n   */\n  showModal: function() {\n    if (this.dialog_.hasAttribute('open')) {\n      throw new Error('Failed to execute \\'showModal\\' on dialog: The element is already open, and therefore cannot be opened modally.');\n    }\n    if (!isConnected(this.dialog_)) {\n      throw new Error('Failed to execute \\'showModal\\' on dialog: The element is not in a Document.');\n    }\n    if (!dialogPolyfill.dm.pushDialog(this)) {\n      throw new Error('Failed to execute \\'showModal\\' on dialog: There are too many open modal dialogs.');\n    }\n\n    if (createsStackingContext(this.dialog_.parentElement)) {\n      console.warn('A dialog is being shown inside a stacking context. ' +\n          'This may cause it to be unusable. For more information, see this link: ' +\n          'https://github.com/GoogleChrome/dialog-polyfill/#stacking-context');\n    }\n\n    this.setOpen(true);\n    this.openAsModal_ = true;\n\n    // Optionally center vertically, relative to the current viewport.\n    if (dialogPolyfill.needsCentering(this.dialog_)) {\n      dialogPolyfill.reposition(this.dialog_);\n      this.replacedStyleTop_ = true;\n    } else {\n      this.replacedStyleTop_ = false;\n    }\n\n    // Insert backdrop.\n    this.dialog_.parentNode.insertBefore(this.backdrop_, this.dialog_.nextSibling);\n\n    // Focus on whatever inside the dialog.\n    this.focus_();\n  },\n\n  /**\n   * Closes this HTMLDialogElement. This is optional vs clearing the open\n   * attribute, however this fires a 'close' event.\n   *\n   * @param {string=} opt_returnValue to use as the returnValue\n   */\n  close: function(opt_returnValue) {\n    if (!this.dialog_.hasAttribute('open')) {\n      throw new Error('Failed to execute \\'close\\' on dialog: The element does not have an \\'open\\' attribute, and therefore cannot be closed.');\n    }\n    this.setOpen(false);\n\n    // Leave returnValue untouched in case it was set directly on the element\n    if (opt_returnValue !== undefined) {\n      this.dialog_.returnValue = opt_returnValue;\n    }\n\n    // Triggering \"close\" event for any attached listeners on the <dialog>.\n    var closeEvent = new supportCustomEvent('close', {\n      bubbles: false,\n      cancelable: false\n    });\n    safeDispatchEvent(this.dialog_, closeEvent);\n  }\n\n});\n\nvar dialogPolyfill = {};\n\ndialogPolyfill.reposition = function(element) {\n  var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n  var topValue = scrollTop + (window.innerHeight - element.offsetHeight) / 2;\n  element.style.top = Math.max(scrollTop, topValue) + 'px';\n};\n\ndialogPolyfill.isInlinePositionSetByStylesheet = function(element) {\n  for (var i = 0; i < document.styleSheets.length; ++i) {\n    var styleSheet = document.styleSheets[i];\n    var cssRules = null;\n    // Some browsers throw on cssRules.\n    try {\n      cssRules = styleSheet.cssRules;\n    } catch (e) {}\n    if (!cssRules) { continue; }\n    for (var j = 0; j < cssRules.length; ++j) {\n      var rule = cssRules[j];\n      var selectedNodes = null;\n      // Ignore errors on invalid selector texts.\n      try {\n        selectedNodes = document.querySelectorAll(rule.selectorText);\n      } catch(e) {}\n      if (!selectedNodes || !inNodeList(selectedNodes, element)) {\n        continue;\n      }\n      var cssTop = rule.style.getPropertyValue('top');\n      var cssBottom = rule.style.getPropertyValue('bottom');\n      if ((cssTop && cssTop !== 'auto') || (cssBottom && cssBottom !== 'auto')) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\ndialogPolyfill.needsCentering = function(dialog) {\n  var computedStyle = window.getComputedStyle(dialog);\n  if (computedStyle.position !== 'absolute') {\n    return false;\n  }\n\n  // We must determine whether the top/bottom specified value is non-auto.  In\n  // WebKit/Blink, checking computedStyle.top == 'auto' is sufficient, but\n  // Firefox returns the used value. So we do this crazy thing instead: check\n  // the inline style and then go through CSS rules.\n  if ((dialog.style.top !== 'auto' && dialog.style.top !== '') ||\n      (dialog.style.bottom !== 'auto' && dialog.style.bottom !== '')) {\n    return false;\n  }\n  return !dialogPolyfill.isInlinePositionSetByStylesheet(dialog);\n};\n\n/**\n * @param {!Element} element to force upgrade\n */\ndialogPolyfill.forceRegisterDialog = function(element) {\n  if (window.HTMLDialogElement || element.showModal) {\n    console.warn('This browser already supports <dialog>, the polyfill ' +\n        'may not work correctly', element);\n  }\n  if (element.localName !== 'dialog') {\n    throw new Error('Failed to register dialog: The element is not a dialog.');\n  }\n  new dialogPolyfillInfo(/** @type {!HTMLDialogElement} */ (element));\n};\n\n/**\n * @param {!Element} element to upgrade, if necessary\n */\ndialogPolyfill.registerDialog = function(element) {\n  if (!element.showModal) {\n    dialogPolyfill.forceRegisterDialog(element);\n  }\n};\n\n/**\n * @constructor\n */\ndialogPolyfill.DialogManager = function() {\n  /** @type {!Array<!dialogPolyfillInfo>} */\n  this.pendingDialogStack = [];\n\n  var checkDOM = this.checkDOM_.bind(this);\n\n  // The overlay is used to simulate how a modal dialog blocks the document.\n  // The blocking dialog is positioned on top of the overlay, and the rest of\n  // the dialogs on the pending dialog stack are positioned below it. In the\n  // actual implementation, the modal dialog stacking is controlled by the\n  // top layer, where z-index has no effect.\n  this.overlay = document.createElement('div');\n  this.overlay.className = '_dialog_overlay';\n  this.overlay.addEventListener('click', function(e) {\n    this.forwardTab_ = undefined;\n    e.stopPropagation();\n    checkDOM([]);  // sanity-check DOM\n  }.bind(this));\n\n  this.handleKey_ = this.handleKey_.bind(this);\n  this.handleFocus_ = this.handleFocus_.bind(this);\n\n  this.zIndexLow_ = 100000;\n  this.zIndexHigh_ = 100000 + 150;\n\n  this.forwardTab_ = undefined;\n\n  if ('MutationObserver' in window) {\n    this.mo_ = new MutationObserver(function(records) {\n      var removed = [];\n      records.forEach(function(rec) {\n        for (var i = 0, c; c = rec.removedNodes[i]; ++i) {\n          if (!(c instanceof Element)) {\n            continue;\n          } else if (c.localName === 'dialog') {\n            removed.push(c);\n          }\n          removed = removed.concat(c.querySelectorAll('dialog'));\n        }\n      });\n      removed.length && checkDOM(removed);\n    });\n  }\n};\n\n/**\n * Called on the first modal dialog being shown. Adds the overlay and related\n * handlers.\n */\ndialogPolyfill.DialogManager.prototype.blockDocument = function() {\n  document.documentElement.addEventListener('focus', this.handleFocus_, true);\n  document.addEventListener('keydown', this.handleKey_);\n  this.mo_ && this.mo_.observe(document, {childList: true, subtree: true});\n};\n\n/**\n * Called on the first modal dialog being removed, i.e., when no more modal\n * dialogs are visible.\n */\ndialogPolyfill.DialogManager.prototype.unblockDocument = function() {\n  document.documentElement.removeEventListener('focus', this.handleFocus_, true);\n  document.removeEventListener('keydown', this.handleKey_);\n  this.mo_ && this.mo_.disconnect();\n};\n\n/**\n * Updates the stacking of all known dialogs.\n */\ndialogPolyfill.DialogManager.prototype.updateStacking = function() {\n  var zIndex = this.zIndexHigh_;\n\n  for (var i = 0, dpi; dpi = this.pendingDialogStack[i]; ++i) {\n    dpi.updateZIndex(--zIndex, --zIndex);\n    if (i === 0) {\n      this.overlay.style.zIndex = --zIndex;\n    }\n  }\n\n  // Make the overlay a sibling of the dialog itself.\n  var last = this.pendingDialogStack[0];\n  if (last) {\n    var p = last.dialog.parentNode || document.body;\n    p.appendChild(this.overlay);\n  } else if (this.overlay.parentNode) {\n    this.overlay.parentNode.removeChild(this.overlay);\n  }\n};\n\n/**\n * @param {Element} candidate to check if contained or is the top-most modal dialog\n * @return {boolean} whether candidate is contained in top dialog\n */\ndialogPolyfill.DialogManager.prototype.containedByTopDialog_ = function(candidate) {\n  while (candidate = findNearestDialog(candidate)) {\n    for (var i = 0, dpi; dpi = this.pendingDialogStack[i]; ++i) {\n      if (dpi.dialog === candidate) {\n        return i === 0;  // only valid if top-most\n      }\n    }\n    candidate = candidate.parentElement;\n  }\n  return false;\n};\n\ndialogPolyfill.DialogManager.prototype.handleFocus_ = function(event) {\n  var target = event.composedPath ? event.composedPath()[0] : event.target;\n\n  if (this.containedByTopDialog_(target)) { return; }\n\n  if (document.activeElement === document.documentElement) { return; }\n\n  event.preventDefault();\n  event.stopPropagation();\n  safeBlur(/** @type {Element} */ (target));\n\n  if (this.forwardTab_ === undefined) { return; }  // move focus only from a tab key\n\n  var dpi = this.pendingDialogStack[0];\n  var dialog = dpi.dialog;\n  var position = dialog.compareDocumentPosition(target);\n  if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n    if (this.forwardTab_) {\n      // forward\n      dpi.focus_();\n    } else if (target !== document.documentElement) {\n      // backwards if we're not already focused on <html>\n      document.documentElement.focus();\n    }\n  }\n\n  return false;\n};\n\ndialogPolyfill.DialogManager.prototype.handleKey_ = function(event) {\n  this.forwardTab_ = undefined;\n  if (event.keyCode === 27) {\n    event.preventDefault();\n    event.stopPropagation();\n    var cancelEvent = new supportCustomEvent('cancel', {\n      bubbles: false,\n      cancelable: true\n    });\n    var dpi = this.pendingDialogStack[0];\n    if (dpi && safeDispatchEvent(dpi.dialog, cancelEvent)) {\n      dpi.dialog.close();\n    }\n  } else if (event.keyCode === 9) {\n    this.forwardTab_ = !event.shiftKey;\n  }\n};\n\n/**\n * Finds and downgrades any known modal dialogs that are no longer displayed. Dialogs that are\n * removed and immediately readded don't stay modal, they become normal.\n *\n * @param {!Array<!HTMLDialogElement>} removed that have definitely been removed\n */\ndialogPolyfill.DialogManager.prototype.checkDOM_ = function(removed) {\n  // This operates on a clone because it may cause it to change. Each change also calls\n  // updateStacking, which only actually needs to happen once. But who removes many modal dialogs\n  // at a time?!\n  var clone = this.pendingDialogStack.slice();\n  clone.forEach(function(dpi) {\n    if (removed.indexOf(dpi.dialog) !== -1) {\n      dpi.downgradeModal();\n    } else {\n      dpi.maybeHideModal();\n    }\n  });\n};\n\n/**\n * @param {!dialogPolyfillInfo} dpi\n * @return {boolean} whether the dialog was allowed\n */\ndialogPolyfill.DialogManager.prototype.pushDialog = function(dpi) {\n  var allowed = (this.zIndexHigh_ - this.zIndexLow_) / 2 - 1;\n  if (this.pendingDialogStack.length >= allowed) {\n    return false;\n  }\n  if (this.pendingDialogStack.unshift(dpi) === 1) {\n    this.blockDocument();\n  }\n  this.updateStacking();\n  return true;\n};\n\n/**\n * @param {!dialogPolyfillInfo} dpi\n */\ndialogPolyfill.DialogManager.prototype.removeDialog = function(dpi) {\n  var index = this.pendingDialogStack.indexOf(dpi);\n  if (index === -1) { return; }\n\n  this.pendingDialogStack.splice(index, 1);\n  if (this.pendingDialogStack.length === 0) {\n    this.unblockDocument();\n  }\n  this.updateStacking();\n};\n\ndialogPolyfill.dm = new dialogPolyfill.DialogManager();\ndialogPolyfill.formSubmitter = null;\ndialogPolyfill.imagemapUseValue = null;\n\n/**\n * Installs global handlers, such as click listers and native method overrides. These are needed\n * even if a no dialog is registered, as they deal with <form method=\"dialog\">.\n */\nif (window.HTMLDialogElement === undefined) {\n\n  /**\n   * If HTMLFormElement translates method=\"DIALOG\" into 'get', then replace the descriptor with\n   * one that returns the correct value.\n   */\n  var testForm = document.createElement('form');\n  testForm.setAttribute('method', 'dialog');\n  if (testForm.method !== 'dialog') {\n    var methodDescriptor = Object.getOwnPropertyDescriptor(HTMLFormElement.prototype, 'method');\n    if (methodDescriptor) {\n      // nb. Some older iOS and older PhantomJS fail to return the descriptor. Don't do anything\n      // and don't bother to update the element.\n      var realGet = methodDescriptor.get;\n      methodDescriptor.get = function() {\n        if (isFormMethodDialog(this)) {\n          return 'dialog';\n        }\n        return realGet.call(this);\n      };\n      var realSet = methodDescriptor.set;\n      /** @this {HTMLElement} */\n      methodDescriptor.set = function(v) {\n        if (typeof v === 'string' && v.toLowerCase() === 'dialog') {\n          return this.setAttribute('method', v);\n        }\n        return realSet.call(this, v);\n      };\n      Object.defineProperty(HTMLFormElement.prototype, 'method', methodDescriptor);\n    }\n  }\n\n  /**\n   * Global 'click' handler, to capture the <input type=\"submit\"> or <button> element which has\n   * submitted a <form method=\"dialog\">. Needed as Safari and others don't report this inside\n   * document.activeElement.\n   */\n  document.addEventListener('click', function(ev) {\n    dialogPolyfill.formSubmitter = null;\n    dialogPolyfill.imagemapUseValue = null;\n    if (ev.defaultPrevented) { return; }  // e.g. a submit which prevents default submission\n\n    var target = /** @type {Element} */ (ev.target);\n    if ('composedPath' in ev) {\n      var path = ev.composedPath();\n      target = path.shift() || target;\n    }\n    if (!target || !isFormMethodDialog(target.form)) { return; }\n\n    var valid = (target.type === 'submit' && ['button', 'input'].indexOf(target.localName) > -1);\n    if (!valid) {\n      if (!(target.localName === 'input' && target.type === 'image')) { return; }\n      // this is a <input type=\"image\">, which can submit forms\n      dialogPolyfill.imagemapUseValue = ev.offsetX + ',' + ev.offsetY;\n    }\n\n    var dialog = findNearestDialog(target);\n    if (!dialog) { return; }\n\n    dialogPolyfill.formSubmitter = target;\n\n  }, false);\n\n  /**\n   * Global 'submit' handler. This handles submits of `method=\"dialog\"` which are invalid, i.e.,\n   * outside a dialog. They get prevented.\n   */\n  document.addEventListener('submit', function(ev) {\n    var form = ev.target;\n    var dialog = findNearestDialog(form);\n    if (dialog) {\n      return;  // ignore, handle there\n    }\n\n    var submitter = findFormSubmitter(ev);\n    var formmethod = submitter && submitter.getAttribute('formmethod') || form.getAttribute('method');\n    if (formmethod === 'dialog') {\n      ev.preventDefault();\n    }\n  });\n\n  /**\n   * Replace the native HTMLFormElement.submit() method, as it won't fire the\n   * submit event and give us a chance to respond.\n   */\n  var nativeFormSubmit = HTMLFormElement.prototype.submit;\n  var replacementFormSubmit = function () {\n    if (!isFormMethodDialog(this)) {\n      return nativeFormSubmit.call(this);\n    }\n    var dialog = findNearestDialog(this);\n    dialog && dialog.close();\n  };\n  HTMLFormElement.prototype.submit = replacementFormSubmit;\n}\n\n/**\n * Module for creating modals for the DHIL\n * @author Joey Takeda\n */\n\nlet _;\nconst parser = new DOMParser();\nconst body = document.body;\n\n/** Class for creating modals */\nclass Modals {\n    /** Constructs the set of modals to use from the selector */\n    constructor(selector) {\n        this.selector = selector;\n        /** Index to store retrieved fragments */\n        this.el = body;\n        this.index = new Map();\n        this.debug = false;\n        this.linkClass = 'modal-link';\n        this.ignoreIndexes = true;\n        this.observerConfig =  {\n            attributes:true,\n            childList:false,\n            subtree:false\n        };\n        this.observer = new MutationObserver(this.checkDialog.bind(this));\n        this.active = false;\n        this.backdropClose = true;\n        this.filterParentsSelector = null;\n        this.fetching = false;\n    }\n\n    // Getters\n    get links(){\n        let allLinks = this.el.querySelectorAll(this.selector);\n        let filtered = Array.from(allLinks).filter(this.defaultLinkFilter.bind(this));\n        return filtered;\n    }\n\n    get dialogs(){\n        let values = [];\n        this.index.forEach((v, k, m) => values.push(v));\n        return [...values];\n    }\n\n    // Methods\n\n    /**\n     * Set the click event for each link\n     *\n     * @returns null\n     */\n    init(){\n        _ = this;\n        window.Modals = this;\n        this.log(this);\n        for (const link of this.links){\n            this.log(link);\n            link.classList.add(this.linkClass);\n            link.addEventListener('click', this.clickHandler.bind(this));\n        }\n    }\n\n    /**\n     * Handles click event for any modal link\n     *\n     * @param {Object} e - The event object\n     * @returns {Promise<void>}\n     */\n    async clickHandler(e){\n        this.caller = e.currentTarget;\n        try{\n            e.preventDefault();\n            // Don't do anything if we're already fetching\n            if (this.fetching){\n                console.log(`Tried to fetch again, so blocking `);\n                return;\n            }\n            this.fetching = true;\n            this.current = await this.getDialog(this.caller);\n            this.observer.observe(this.current, this.observerConfig);\n            this.current.showModal();\n            this.fetching = false;\n        } catch(err){\n            this.errorHandler(err).bind(this);\n        }\n    }\n\n    /**\n     * Retrieves the fragment either from the index or by fetching\n     * the content externally\n     *\n     * @param {HTMLAnchorElement} link - The link for that modal\n     * @returns {Promise<HTMLDialogElement|void>}\n     */\n    async getDialog(link){\n        let uri = this.modalURI(link);\n        return new Promise( (resolve, reject) => {\n            if (this.index.has(uri)) {\n                return resolve(this.index.get(uri));\n            }\n            fetch(uri)\n                .then(response => response.text())\n                .then(text => {\n                    let dialog = this.getDialogFromText(text);\n                    this.processDialog(dialog);\n                    // Register the dialog if necessary\n                    dialogPolyfill.registerDialog(dialog);\n                    if (!(typeof dialog.close === 'function')){\n                        dialog.close = function(){\n                            dialog.querySelector(\"form[method='close']\").submit();\n                        };\n                    }\n                    document.body.appendChild(dialog);\n                    this.index.set(uri, dialog);\n                    return resolve(dialog);\n                })\n                .catch(this.errorHandler.bind(this));\n        });\n    }\n\n    /**\n     * Retrieves the dialog from the text response\n     *\n     * @param text - String response\n     * @returns {HTMLDialogElement|void}\n     */\n    getDialogFromText(text){\n        let DOM = parser.parseFromString(text, 'text/html');\n        let dialog = DOM.querySelector('dialog');\n        return dialog\n    }\n\n    checkDialog(mutations){\n        for (const mutation of mutations){\n            if (mutation.attributeName === 'open'){\n                this.active = !this.active;\n                this.toggle();\n            }\n        }\n    }\n\n    toggle(){\n        // Toggle the aux classes for scrolling stuff\n        body.classList.toggle('dialog-active');\n        this.caller.classList.toggle('active');\n        // Set the event listener on the document to close on backdrop\n        if (this.active){\n            if (this.backdropClose) body.addEventListener('click', this.bodyClickHandler, true);\n            return;\n        }\n        if (this.backdropClose) body.removeEventListener('click', this.bodyClickHandler, true);\n        this.observer.disconnect();\n        this.caller = null;\n    }\n\n    bodyClickHandler(e){\n        // We can't bind this to the bodyClickHandler so that it can be removed,\n        // so use the Window.modals object (also known as _);\n        let el = (typeof e.path === 'object') ? e.path[0] : e.target;\n        if (el === _.current){\n            _.current.close();\n        }\n    }\n\n    /**\n     * Filters sets of links. By default, it only returns links that\n     * end with digits\n     *\n     * @param {HTMLAnchorElement} link - The link to use\n     * @returns {boolean}\n     */\n    defaultLinkFilter(link){\n\n\n        if (this.filterParentsSelector !== null){\n            if (link.closest(this.filterParentsSelector) !== null){\n                 return false;\n            }\n        }\n\n        if (typeof this.linkFilter === 'function'){\n            console.log(this.linkFilter(link));\n            if (!this.linkFilter(link)){\n                return false;\n            }        }\n\n        return /\\d+\\/?$/.test(link.getAttribute('href'));\n\n\n    }\n\n    /**\n     * Processes the dialog element; by default, this removes an open attribute\n     * (if it exists) but otherwise does nothing else\n     *\n     * @param dialog\n     * @returns {null}\n     */\n    processDialog(dialog){\n        if (dialog.hasAttribute('open')){\n            dialog.removeAttribute('open');\n        }\n    }\n\n    /**\n     * Utility function to retrieve get the URI for the modal\n     *\n     * @param link\n     * @returns {string}\n     */\n    modalURI(link){\n        return link.getAttribute('href') + '/modal';\n    }\n\n    /**\n     * Error handling function\n     *\n     * @param err\n     * @returns void\n     */\n    errorHandler(err){\n        console.trace(err);\n        window.location = this.caller.href;\n    }\n\n\n    log(msg){\n        if (this.debug){\n            console.log(msg);\n        }\n    }\n}\n\nexport default Modals;\n","/**\n * Set of Javascript to creates responsive, accessible tables; most of this is\n * taken from Adrian Rosseli's https://adrianroselli.com/2017/11/a-responsive-accessible-table.html\n * But with some slight adaptations\n *\n */\n\n\nexport default class A11YTables{\n    constructor(q = 'table'){\n        this.query = q;\n        this.tables = [];\n    }\n\n    init() {\n        document.querySelectorAll(this.query).forEach((tbl, i) => {\n            this.tables.push(new A11YTable(tbl, i));\n        });\n    }\n}\n\nclass A11YTable{\n    constructor(tbl, pos){\n        console.log(this);\n        this.table = tbl;\n        this.pos = pos;\n        this.stylesheet = null;\n        if (this.table.tagName != \"TABLE\"){\n            console.log('Not a table, bailing');\n            return;\n        }\n        this.init();\n    }\n\n    get ariaRoles(){\n        return {\n            'tbody, thead, tfoot': 'rowgroup',\n            'tr': 'row',\n            'td': 'cell',\n            'thead th': 'columnheader',\n            'tbody tr th': 'rowheader'\n        }\n    }\n\n    get headers(){\n        return [...this.table.querySelectorAll('thead th')].map(th => th.innerText);\n    }\n\n\n\n    addARIA(){\n        let _ = this;\n        const setRole = (el, role) => {\n            if (!el.getAttribute('role')) el.setAttribute('role', role);\n        }\n        setRole(this.table, 'table');\n        for (const q in this.ariaRoles){\n            const elements = [...this.table.querySelectorAll(q)];\n            const role = _.ariaRoles[q];\n            elements.forEach(el => {\n                setRole(el, _.ariaRoles[q]);\n                if (role == 'cell'){\n                    _.handleCell(el);\n                }\n            });\n        }\n    }\n\n    handleCell(cell){\n        if (cell.innerText.trim().length == 0){\n            cell.classList.add('empty-cell');\n        } else {\n            let wrapper = `<div class=\"cell-content\">${cell.innerHTML}</div>`;\n            cell.innerHTML = wrapper;\n        }\n        if (this.headers.length > 0){\n            cell.setAttribute('data-value', this.headers[cell.cellIndex]);\n        }\n    }\n\n    init(){\n        if (!this.table.id) {\n            this.table.id = `tbl_${this.pos}`;\n        }\n        this.addARIA();\n\n    }\n}","/* Accordion constructor that uses the Web Animations API for fast and smooth\ntransitions. Taken from: https://css-tricks.com/how-to-animate-the-details-element-using-waapi/\nand subsequently modified by Joey Takeda.\n */\n\n\"use strict\";\n\nexport default class Accordion {\n    constructor(el) {\n        try{\n            // Store the <details> element\n            this.el = el;\n\n            // Store the <summary> element\n            this.summary = el.querySelector('summary');\n\n            // Store the <div class=\"content\"> element\n            this.content = this.makeContent();\n\n            // Store the animation object (so we can cancel it if needed)\n            this.animation = null;\n\n            //It's not doing anything at the moment.\n            this.state = [0];\n\n            // Create configuration for easing function;\n            this.easing = this.getCustomProp('easing', 'ease-in-out');\n\n            // Create an option for timing\n            this.duration = this.convertDuration(this.getCustomProp('duration', '400').trim());\n\n            // Make the heights\n            this.startHeight = null;\n            this.endHeight = null;\n\n            // Now init the actual element stuff\n            this.init();\n\n        } catch(e){\n            console.log(`${e}`);\n        }\n    }\n\n    init() {\n        // Set the aria role\n        this.el.setAttribute('aria-expanded', this.el.open);\n        // Add a class to the element\n        this.el.classList.add('accordion');\n        // Detect user clicks on the summary element\n        this.summary.addEventListener('click', (e) => this.onClick(e));\n    }\n\n    // Function to get custom properties\n    // so to align any duration/easing stuff in the CSS\n    // This can be overridden by the object declaration, however\n    getCustomProp(prop, defaultVal) {\n        //Get the actual declaration;\n        let propDecl = `--accordion-${prop}`;\n        //Get the computed style\n        let style = getComputedStyle(this.el);\n        //Get the property value\n        let propVal = style.getPropertyValue(propDecl);\n        return (propVal) ? propVal : defaultVal;\n    }\n\n    // Create the click listener\n    onClick(e) {\n        // Stop default behaviour from the browser\n        e.preventDefault();\n\n        // Add an overflow on the <details> to avoid content overflowing\n        this.el.style.overflow = 'hidden';\n\n        //Prevent any further clicking from happening\n        this.el.style.pointerEvents = 'none';\n\n        // Check if the element is being closed or is already closed\n        if (!this.el.open) {\n            this.open();\n            // Check if the element is being opened or is already open\n        } else {\n            this.close();\n        }\n    }\n\n    makeContent() {\n        let nodes = [...this.el.childNodes].filter(n => !n.isSameNode(this.summary));\n        let div = document.createElement('div');\n        div.classList.add('accordion__content');\n        nodes.forEach(node => div.appendChild(node));\n        this.el.appendChild(div);\n        return div;\n    }\n\n    open() {\n        // Apply a fixed height on the element\n        this.el.style.height = `${this.el.offsetHeight}px`;\n        // Force the [open] attribute on the details element\n        this.el.open = true;\n        // Wait for the next frame to call the expand function\n        window.requestAnimationFrame(() => this.expand());\n    }\n\n    close() {\n        //Add the aria label\n        window.requestAnimationFrame(() => this.shrink());\n    }\n\n    expand() {\n        // Set the element as \"being expanding\"\n        this.state.push(1);\n        // Get the current fixed height of the element\n        this.startHeight = `${this.el.offsetHeight}px`;\n        // Calculate the open height of the element (summary height + content height)\n        this.endHeight = `${this.summary.offsetHeight + this.content.offsetHeight}px`;\n        this.el.setAttribute('aria-expanded', 'true');\n        //Now animate\n        this.animate();\n    }\n\n    shrink() {\n        // Set the element as \"being closed\"\n        this.state.push(-1);\n        // Store the current height of the element\n        this.startHeight = `${this.el.offsetHeight}px`;\n        // Calculate the height of the summary\n        this.endHeight = `${this.summary.offsetHeight}px`;\n        this.el.setAttribute('aria-expanded', 'false');\n        this.animate();\n    }\n\n    animate() {\n        // If there is already an animation running\n        if (this.animation) {\n            // Cancel the current animation\n            this.animation.cancel();\n        }\n\n        // Start a WAAPI animation\n        this.animation = this.el.animate({\n            // Set the keyframes from the startHeight to endHeight\n            height: [this.startHeight, this.endHeight]\n        }, {\n            duration: this.duration,\n            easing: this.easing\n        });\n\n        // When the animation is complete, call onAnimationFinish()\n        this.animation.onfinish = () => this.onAnimationFinish();\n        // If the animation is cancelled, isExpanding variable is set to false\n        this.animation.oncancel = () => this.state.slice(0, 1);\n    }\n\n    onAnimationFinish() {\n        // Set the open attribute based on the parameter\n        this.el.open = this.state[1] > 0;\n        // Clear the stored animation\n        this.animation = null;\n        // Reset state\n        this.state = [0];\n        this.startHeight = this.endHeight = null;\n        // Remove the overflow hidden and the fixed height\n        this.el.style.height = this.el.style.overflow = '';\n        this.el.style.pointerEvents = 'auto';\n    }\n\n    convertDuration(dur) {\n        if (/[\\d]s$/g.test(dur)){\n            return parseFloat(dur) * 1000;\n        } else {\n            parseInt(dur, 10);\n        }\n    }\n}\n\n\n\n\n\n\n\n\n","/**\n * SSR Window 4.0.2\n * Better handling for window object in SSR environment\n * https://github.com/nolimits4web/ssr-window\n *\n * Copyright 2021, Vladimir Kharlampidi\n *\n * Licensed under MIT\n *\n * Released on: December 13, 2021\n */\n/* eslint-disable no-param-reassign */\nfunction isObject(obj) {\n    return (obj !== null &&\n        typeof obj === 'object' &&\n        'constructor' in obj &&\n        obj.constructor === Object);\n}\nfunction extend(target = {}, src = {}) {\n    Object.keys(src).forEach((key) => {\n        if (typeof target[key] === 'undefined')\n            target[key] = src[key];\n        else if (isObject(src[key]) &&\n            isObject(target[key]) &&\n            Object.keys(src[key]).length > 0) {\n            extend(target[key], src[key]);\n        }\n    });\n}\n\nconst ssrDocument = {\n    body: {},\n    addEventListener() { },\n    removeEventListener() { },\n    activeElement: {\n        blur() { },\n        nodeName: '',\n    },\n    querySelector() {\n        return null;\n    },\n    querySelectorAll() {\n        return [];\n    },\n    getElementById() {\n        return null;\n    },\n    createEvent() {\n        return {\n            initEvent() { },\n        };\n    },\n    createElement() {\n        return {\n            children: [],\n            childNodes: [],\n            style: {},\n            setAttribute() { },\n            getElementsByTagName() {\n                return [];\n            },\n        };\n    },\n    createElementNS() {\n        return {};\n    },\n    importNode() {\n        return null;\n    },\n    location: {\n        hash: '',\n        host: '',\n        hostname: '',\n        href: '',\n        origin: '',\n        pathname: '',\n        protocol: '',\n        search: '',\n    },\n};\nfunction getDocument() {\n    const doc = typeof document !== 'undefined' ? document : {};\n    extend(doc, ssrDocument);\n    return doc;\n}\n\nconst ssrWindow = {\n    document: ssrDocument,\n    navigator: {\n        userAgent: '',\n    },\n    location: {\n        hash: '',\n        host: '',\n        hostname: '',\n        href: '',\n        origin: '',\n        pathname: '',\n        protocol: '',\n        search: '',\n    },\n    history: {\n        replaceState() { },\n        pushState() { },\n        go() { },\n        back() { },\n    },\n    CustomEvent: function CustomEvent() {\n        return this;\n    },\n    addEventListener() { },\n    removeEventListener() { },\n    getComputedStyle() {\n        return {\n            getPropertyValue() {\n                return '';\n            },\n        };\n    },\n    Image() { },\n    Date() { },\n    screen: {},\n    setTimeout() { },\n    clearTimeout() { },\n    matchMedia() {\n        return {};\n    },\n    requestAnimationFrame(callback) {\n        if (typeof setTimeout === 'undefined') {\n            callback();\n            return null;\n        }\n        return setTimeout(callback, 0);\n    },\n    cancelAnimationFrame(id) {\n        if (typeof setTimeout === 'undefined') {\n            return;\n        }\n        clearTimeout(id);\n    },\n};\nfunction getWindow() {\n    const win = typeof window !== 'undefined' ? window : {};\n    extend(win, ssrWindow);\n    return win;\n}\n\nexport { extend, getDocument, getWindow, ssrDocument, ssrWindow };\n","/**\n * Dom7 4.0.6\n * Minimalistic JavaScript library for DOM manipulation, with a jQuery-compatible API\n * https://framework7.io/docs/dom7.html\n *\n * Copyright 2023, Vladimir Kharlampidi\n *\n * Licensed under MIT\n *\n * Released on: February 2, 2023\n */\nimport { getWindow, getDocument } from 'ssr-window';\n\n/* eslint-disable no-proto */\nfunction makeReactive(obj) {\n  const proto = obj.__proto__;\n  Object.defineProperty(obj, '__proto__', {\n    get() {\n      return proto;\n    },\n\n    set(value) {\n      proto.__proto__ = value;\n    }\n\n  });\n}\n\nclass Dom7 extends Array {\n  constructor(items) {\n    if (typeof items === 'number') {\n      super(items);\n    } else {\n      super(...(items || []));\n      makeReactive(this);\n    }\n  }\n\n}\n\nfunction arrayFlat(arr = []) {\n  const res = [];\n  arr.forEach(el => {\n    if (Array.isArray(el)) {\n      res.push(...arrayFlat(el));\n    } else {\n      res.push(el);\n    }\n  });\n  return res;\n}\nfunction arrayFilter(arr, callback) {\n  return Array.prototype.filter.call(arr, callback);\n}\nfunction arrayUnique(arr) {\n  const uniqueArray = [];\n\n  for (let i = 0; i < arr.length; i += 1) {\n    if (uniqueArray.indexOf(arr[i]) === -1) uniqueArray.push(arr[i]);\n  }\n\n  return uniqueArray;\n}\nfunction toCamelCase(string) {\n  return string.toLowerCase().replace(/-(.)/g, (match, group) => group.toUpperCase());\n}\n\n// eslint-disable-next-line\n\nfunction qsa(selector, context) {\n  if (typeof selector !== 'string') {\n    return [selector];\n  }\n\n  const a = [];\n  const res = context.querySelectorAll(selector);\n\n  for (let i = 0; i < res.length; i += 1) {\n    a.push(res[i]);\n  }\n\n  return a;\n}\n\nfunction $(selector, context) {\n  const window = getWindow();\n  const document = getDocument();\n  let arr = [];\n\n  if (!context && selector instanceof Dom7) {\n    return selector;\n  }\n\n  if (!selector) {\n    return new Dom7(arr);\n  }\n\n  if (typeof selector === 'string') {\n    const html = selector.trim();\n\n    if (html.indexOf('<') >= 0 && html.indexOf('>') >= 0) {\n      let toCreate = 'div';\n      if (html.indexOf('<li') === 0) toCreate = 'ul';\n      if (html.indexOf('<tr') === 0) toCreate = 'tbody';\n      if (html.indexOf('<td') === 0 || html.indexOf('<th') === 0) toCreate = 'tr';\n      if (html.indexOf('<tbody') === 0) toCreate = 'table';\n      if (html.indexOf('<option') === 0) toCreate = 'select';\n      const tempParent = document.createElement(toCreate);\n      tempParent.innerHTML = html;\n\n      for (let i = 0; i < tempParent.childNodes.length; i += 1) {\n        arr.push(tempParent.childNodes[i]);\n      }\n    } else {\n      arr = qsa(selector.trim(), context || document);\n    } // arr = qsa(selector, document);\n\n  } else if (selector.nodeType || selector === window || selector === document) {\n    arr.push(selector);\n  } else if (Array.isArray(selector)) {\n    if (selector instanceof Dom7) return selector;\n    arr = selector;\n  }\n\n  return new Dom7(arrayUnique(arr));\n}\n\n$.fn = Dom7.prototype;\n\n// eslint-disable-next-line\n\nfunction addClass(...classes) {\n  const classNames = arrayFlat(classes.map(c => c.split(' ')));\n  this.forEach(el => {\n    el.classList.add(...classNames);\n  });\n  return this;\n}\n\nfunction removeClass(...classes) {\n  const classNames = arrayFlat(classes.map(c => c.split(' ')));\n  this.forEach(el => {\n    el.classList.remove(...classNames);\n  });\n  return this;\n}\n\nfunction toggleClass(...classes) {\n  const classNames = arrayFlat(classes.map(c => c.split(' ')));\n  this.forEach(el => {\n    classNames.forEach(className => {\n      el.classList.toggle(className);\n    });\n  });\n}\n\nfunction hasClass(...classes) {\n  const classNames = arrayFlat(classes.map(c => c.split(' ')));\n  return arrayFilter(this, el => {\n    return classNames.filter(className => el.classList.contains(className)).length > 0;\n  }).length > 0;\n}\n\nfunction attr(attrs, value) {\n  if (arguments.length === 1 && typeof attrs === 'string') {\n    // Get attr\n    if (this[0]) return this[0].getAttribute(attrs);\n    return undefined;\n  } // Set attrs\n\n\n  for (let i = 0; i < this.length; i += 1) {\n    if (arguments.length === 2) {\n      // String\n      this[i].setAttribute(attrs, value);\n    } else {\n      // Object\n      for (const attrName in attrs) {\n        this[i][attrName] = attrs[attrName];\n        this[i].setAttribute(attrName, attrs[attrName]);\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction removeAttr(attr) {\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].removeAttribute(attr);\n  }\n\n  return this;\n}\n\nfunction prop(props, value) {\n  if (arguments.length === 1 && typeof props === 'string') {\n    // Get prop\n    if (this[0]) return this[0][props];\n  } else {\n    // Set props\n    for (let i = 0; i < this.length; i += 1) {\n      if (arguments.length === 2) {\n        // String\n        this[i][props] = value;\n      } else {\n        // Object\n        for (const propName in props) {\n          this[i][propName] = props[propName];\n        }\n      }\n    }\n\n    return this;\n  }\n\n  return this;\n}\n\nfunction data(key, value) {\n  let el;\n\n  if (typeof value === 'undefined') {\n    el = this[0];\n    if (!el) return undefined; // Get value\n\n    if (el.dom7ElementDataStorage && key in el.dom7ElementDataStorage) {\n      return el.dom7ElementDataStorage[key];\n    }\n\n    const dataKey = el.getAttribute(`data-${key}`);\n\n    if (dataKey) {\n      return dataKey;\n    }\n\n    return undefined;\n  } // Set value\n\n\n  for (let i = 0; i < this.length; i += 1) {\n    el = this[i];\n    if (!el.dom7ElementDataStorage) el.dom7ElementDataStorage = {};\n    el.dom7ElementDataStorage[key] = value;\n  }\n\n  return this;\n}\n\nfunction removeData(key) {\n  for (let i = 0; i < this.length; i += 1) {\n    const el = this[i];\n\n    if (el.dom7ElementDataStorage && el.dom7ElementDataStorage[key]) {\n      el.dom7ElementDataStorage[key] = null;\n      delete el.dom7ElementDataStorage[key];\n    }\n  }\n}\n\nfunction dataset() {\n  const el = this[0];\n  if (!el) return undefined;\n  const dataset = {}; // eslint-disable-line\n\n  if (el.dataset) {\n    for (const dataKey in el.dataset) {\n      dataset[dataKey] = el.dataset[dataKey];\n    }\n  } else {\n    for (let i = 0; i < el.attributes.length; i += 1) {\n      const attr = el.attributes[i];\n\n      if (attr.name.indexOf('data-') >= 0) {\n        dataset[toCamelCase(attr.name.split('data-')[1])] = attr.value;\n      }\n    }\n  }\n\n  for (const key in dataset) {\n    if (dataset[key] === 'false') dataset[key] = false;else if (dataset[key] === 'true') dataset[key] = true;else if (parseFloat(dataset[key]) === dataset[key] * 1) dataset[key] *= 1;\n  }\n\n  return dataset;\n}\n\nfunction val(value) {\n  if (typeof value === 'undefined') {\n    // get value\n    const el = this[0];\n    if (!el) return undefined;\n\n    if (el.multiple && el.nodeName.toLowerCase() === 'select') {\n      const values = [];\n\n      for (let i = 0; i < el.selectedOptions.length; i += 1) {\n        values.push(el.selectedOptions[i].value);\n      }\n\n      return values;\n    }\n\n    return el.value;\n  } // set value\n\n\n  for (let i = 0; i < this.length; i += 1) {\n    const el = this[i];\n\n    if (Array.isArray(value) && el.multiple && el.nodeName.toLowerCase() === 'select') {\n      for (let j = 0; j < el.options.length; j += 1) {\n        el.options[j].selected = value.indexOf(el.options[j].value) >= 0;\n      }\n    } else {\n      el.value = value;\n    }\n  }\n\n  return this;\n}\n\nfunction value(value) {\n  return this.val(value);\n}\n\nfunction transform(transform) {\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].style.transform = transform;\n  }\n\n  return this;\n}\n\nfunction transition(duration) {\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].style.transitionDuration = typeof duration !== 'string' ? `${duration}ms` : duration;\n  }\n\n  return this;\n}\n\nfunction on(...args) {\n  let [eventType, targetSelector, listener, capture] = args;\n\n  if (typeof args[1] === 'function') {\n    [eventType, listener, capture] = args;\n    targetSelector = undefined;\n  }\n\n  if (!capture) capture = false;\n\n  function handleLiveEvent(e) {\n    const target = e.target;\n    if (!target) return;\n    const eventData = e.target.dom7EventData || [];\n\n    if (eventData.indexOf(e) < 0) {\n      eventData.unshift(e);\n    }\n\n    if ($(target).is(targetSelector)) listener.apply(target, eventData);else {\n      const parents = $(target).parents(); // eslint-disable-line\n\n      for (let k = 0; k < parents.length; k += 1) {\n        if ($(parents[k]).is(targetSelector)) listener.apply(parents[k], eventData);\n      }\n    }\n  }\n\n  function handleEvent(e) {\n    const eventData = e && e.target ? e.target.dom7EventData || [] : [];\n\n    if (eventData.indexOf(e) < 0) {\n      eventData.unshift(e);\n    }\n\n    listener.apply(this, eventData);\n  }\n\n  const events = eventType.split(' ');\n  let j;\n\n  for (let i = 0; i < this.length; i += 1) {\n    const el = this[i];\n\n    if (!targetSelector) {\n      for (j = 0; j < events.length; j += 1) {\n        const event = events[j];\n        if (!el.dom7Listeners) el.dom7Listeners = {};\n        if (!el.dom7Listeners[event]) el.dom7Listeners[event] = [];\n        el.dom7Listeners[event].push({\n          listener,\n          proxyListener: handleEvent\n        });\n        el.addEventListener(event, handleEvent, capture);\n      }\n    } else {\n      // Live events\n      for (j = 0; j < events.length; j += 1) {\n        const event = events[j];\n        if (!el.dom7LiveListeners) el.dom7LiveListeners = {};\n        if (!el.dom7LiveListeners[event]) el.dom7LiveListeners[event] = [];\n        el.dom7LiveListeners[event].push({\n          listener,\n          proxyListener: handleLiveEvent\n        });\n        el.addEventListener(event, handleLiveEvent, capture);\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction off(...args) {\n  let [eventType, targetSelector, listener, capture] = args;\n\n  if (typeof args[1] === 'function') {\n    [eventType, listener, capture] = args;\n    targetSelector = undefined;\n  }\n\n  if (!capture) capture = false;\n  const events = eventType.split(' ');\n\n  for (let i = 0; i < events.length; i += 1) {\n    const event = events[i];\n\n    for (let j = 0; j < this.length; j += 1) {\n      const el = this[j];\n      let handlers;\n\n      if (!targetSelector && el.dom7Listeners) {\n        handlers = el.dom7Listeners[event];\n      } else if (targetSelector && el.dom7LiveListeners) {\n        handlers = el.dom7LiveListeners[event];\n      }\n\n      if (handlers && handlers.length) {\n        for (let k = handlers.length - 1; k >= 0; k -= 1) {\n          const handler = handlers[k];\n\n          if (listener && handler.listener === listener) {\n            el.removeEventListener(event, handler.proxyListener, capture);\n            handlers.splice(k, 1);\n          } else if (listener && handler.listener && handler.listener.dom7proxy && handler.listener.dom7proxy === listener) {\n            el.removeEventListener(event, handler.proxyListener, capture);\n            handlers.splice(k, 1);\n          } else if (!listener) {\n            el.removeEventListener(event, handler.proxyListener, capture);\n            handlers.splice(k, 1);\n          }\n        }\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction once(...args) {\n  const dom = this;\n  let [eventName, targetSelector, listener, capture] = args;\n\n  if (typeof args[1] === 'function') {\n    [eventName, listener, capture] = args;\n    targetSelector = undefined;\n  }\n\n  function onceHandler(...eventArgs) {\n    listener.apply(this, eventArgs);\n    dom.off(eventName, targetSelector, onceHandler, capture);\n\n    if (onceHandler.dom7proxy) {\n      delete onceHandler.dom7proxy;\n    }\n  }\n\n  onceHandler.dom7proxy = listener;\n  return dom.on(eventName, targetSelector, onceHandler, capture);\n}\n\nfunction trigger(...args) {\n  const window = getWindow();\n  const events = args[0].split(' ');\n  const eventData = args[1];\n\n  for (let i = 0; i < events.length; i += 1) {\n    const event = events[i];\n\n    for (let j = 0; j < this.length; j += 1) {\n      const el = this[j];\n\n      if (window.CustomEvent) {\n        const evt = new window.CustomEvent(event, {\n          detail: eventData,\n          bubbles: true,\n          cancelable: true\n        });\n        el.dom7EventData = args.filter((data, dataIndex) => dataIndex > 0);\n        el.dispatchEvent(evt);\n        el.dom7EventData = [];\n        delete el.dom7EventData;\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction transitionStart(callback) {\n  const dom = this;\n\n  function fireCallBack(e) {\n    if (e.target !== this) return;\n    callback.call(this, e);\n    dom.off('transitionstart', fireCallBack);\n  }\n\n  if (callback) {\n    dom.on('transitionstart', fireCallBack);\n  }\n\n  return this;\n}\n\nfunction transitionEnd(callback) {\n  const dom = this;\n\n  function fireCallBack(e) {\n    if (e.target !== this) return;\n    callback.call(this, e);\n    dom.off('transitionend', fireCallBack);\n  }\n\n  if (callback) {\n    dom.on('transitionend', fireCallBack);\n  }\n\n  return this;\n}\n\nfunction animationEnd(callback) {\n  const dom = this;\n\n  function fireCallBack(e) {\n    if (e.target !== this) return;\n    callback.call(this, e);\n    dom.off('animationend', fireCallBack);\n  }\n\n  if (callback) {\n    dom.on('animationend', fireCallBack);\n  }\n\n  return this;\n}\n\nfunction width() {\n  const window = getWindow();\n\n  if (this[0] === window) {\n    return window.innerWidth;\n  }\n\n  if (this.length > 0) {\n    return parseFloat(this.css('width'));\n  }\n\n  return null;\n}\n\nfunction outerWidth(includeMargins) {\n  if (this.length > 0) {\n    if (includeMargins) {\n      const styles = this.styles();\n      return this[0].offsetWidth + parseFloat(styles.getPropertyValue('margin-right')) + parseFloat(styles.getPropertyValue('margin-left'));\n    }\n\n    return this[0].offsetWidth;\n  }\n\n  return null;\n}\n\nfunction height() {\n  const window = getWindow();\n\n  if (this[0] === window) {\n    return window.innerHeight;\n  }\n\n  if (this.length > 0) {\n    return parseFloat(this.css('height'));\n  }\n\n  return null;\n}\n\nfunction outerHeight(includeMargins) {\n  if (this.length > 0) {\n    if (includeMargins) {\n      const styles = this.styles();\n      return this[0].offsetHeight + parseFloat(styles.getPropertyValue('margin-top')) + parseFloat(styles.getPropertyValue('margin-bottom'));\n    }\n\n    return this[0].offsetHeight;\n  }\n\n  return null;\n}\n\nfunction offset() {\n  if (this.length > 0) {\n    const window = getWindow();\n    const document = getDocument();\n    const el = this[0];\n    const box = el.getBoundingClientRect();\n    const body = document.body;\n    const clientTop = el.clientTop || body.clientTop || 0;\n    const clientLeft = el.clientLeft || body.clientLeft || 0;\n    const scrollTop = el === window ? window.scrollY : el.scrollTop;\n    const scrollLeft = el === window ? window.scrollX : el.scrollLeft;\n    return {\n      top: box.top + scrollTop - clientTop,\n      left: box.left + scrollLeft - clientLeft\n    };\n  }\n\n  return null;\n}\n\nfunction hide() {\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].style.display = 'none';\n  }\n\n  return this;\n}\n\nfunction show() {\n  const window = getWindow();\n\n  for (let i = 0; i < this.length; i += 1) {\n    const el = this[i];\n\n    if (el.style.display === 'none') {\n      el.style.display = '';\n    }\n\n    if (window.getComputedStyle(el, null).getPropertyValue('display') === 'none') {\n      // Still not visible\n      el.style.display = 'block';\n    }\n  }\n\n  return this;\n}\n\nfunction styles() {\n  const window = getWindow();\n  if (this[0]) return window.getComputedStyle(this[0], null);\n  return {};\n}\n\nfunction css(props, value) {\n  const window = getWindow();\n  let i;\n\n  if (arguments.length === 1) {\n    if (typeof props === 'string') {\n      // .css('width')\n      if (this[0]) return window.getComputedStyle(this[0], null).getPropertyValue(props);\n    } else {\n      // .css({ width: '100px' })\n      for (i = 0; i < this.length; i += 1) {\n        for (const prop in props) {\n          this[i].style[prop] = props[prop];\n        }\n      }\n\n      return this;\n    }\n  }\n\n  if (arguments.length === 2 && typeof props === 'string') {\n    // .css('width', '100px')\n    for (i = 0; i < this.length; i += 1) {\n      this[i].style[props] = value;\n    }\n\n    return this;\n  }\n\n  return this;\n}\n\nfunction each(callback) {\n  if (!callback) return this;\n  this.forEach((el, index) => {\n    callback.apply(el, [el, index]);\n  });\n  return this;\n}\n\nfunction filter(callback) {\n  const result = arrayFilter(this, callback);\n  return $(result);\n}\n\nfunction html(html) {\n  if (typeof html === 'undefined') {\n    return this[0] ? this[0].innerHTML : null;\n  }\n\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].innerHTML = html;\n  }\n\n  return this;\n}\n\nfunction text(text) {\n  if (typeof text === 'undefined') {\n    return this[0] ? this[0].textContent.trim() : null;\n  }\n\n  for (let i = 0; i < this.length; i += 1) {\n    this[i].textContent = text;\n  }\n\n  return this;\n}\n\nfunction is(selector) {\n  const window = getWindow();\n  const document = getDocument();\n  const el = this[0];\n  let compareWith;\n  let i;\n  if (!el || typeof selector === 'undefined') return false;\n\n  if (typeof selector === 'string') {\n    if (el.matches) return el.matches(selector);\n    if (el.webkitMatchesSelector) return el.webkitMatchesSelector(selector);\n    if (el.msMatchesSelector) return el.msMatchesSelector(selector);\n    compareWith = $(selector);\n\n    for (i = 0; i < compareWith.length; i += 1) {\n      if (compareWith[i] === el) return true;\n    }\n\n    return false;\n  }\n\n  if (selector === document) {\n    return el === document;\n  }\n\n  if (selector === window) {\n    return el === window;\n  }\n\n  if (selector.nodeType || selector instanceof Dom7) {\n    compareWith = selector.nodeType ? [selector] : selector;\n\n    for (i = 0; i < compareWith.length; i += 1) {\n      if (compareWith[i] === el) return true;\n    }\n\n    return false;\n  }\n\n  return false;\n}\n\nfunction index() {\n  let child = this[0];\n  let i;\n\n  if (child) {\n    i = 0; // eslint-disable-next-line\n\n    while ((child = child.previousSibling) !== null) {\n      if (child.nodeType === 1) i += 1;\n    }\n\n    return i;\n  }\n\n  return undefined;\n}\n\nfunction eq(index) {\n  if (typeof index === 'undefined') return this;\n  const length = this.length;\n\n  if (index > length - 1) {\n    return $([]);\n  }\n\n  if (index < 0) {\n    const returnIndex = length + index;\n    if (returnIndex < 0) return $([]);\n    return $([this[returnIndex]]);\n  }\n\n  return $([this[index]]);\n}\n\nfunction append(...els) {\n  let newChild;\n  const document = getDocument();\n\n  for (let k = 0; k < els.length; k += 1) {\n    newChild = els[k];\n\n    for (let i = 0; i < this.length; i += 1) {\n      if (typeof newChild === 'string') {\n        const tempDiv = document.createElement('div');\n        tempDiv.innerHTML = newChild;\n\n        while (tempDiv.firstChild) {\n          this[i].appendChild(tempDiv.firstChild);\n        }\n      } else if (newChild instanceof Dom7) {\n        for (let j = 0; j < newChild.length; j += 1) {\n          this[i].appendChild(newChild[j]);\n        }\n      } else {\n        this[i].appendChild(newChild);\n      }\n    }\n  }\n\n  return this;\n}\n\nfunction appendTo(parent) {\n  $(parent).append(this);\n  return this;\n}\n\nfunction prepend(newChild) {\n  const document = getDocument();\n  let i;\n  let j;\n\n  for (i = 0; i < this.length; i += 1) {\n    if (typeof newChild === 'string') {\n      const tempDiv = document.createElement('div');\n      tempDiv.innerHTML = newChild;\n\n      for (j = tempDiv.childNodes.length - 1; j >= 0; j -= 1) {\n        this[i].insertBefore(tempDiv.childNodes[j], this[i].childNodes[0]);\n      }\n    } else if (newChild instanceof Dom7) {\n      for (j = 0; j < newChild.length; j += 1) {\n        this[i].insertBefore(newChild[j], this[i].childNodes[0]);\n      }\n    } else {\n      this[i].insertBefore(newChild, this[i].childNodes[0]);\n    }\n  }\n\n  return this;\n}\n\nfunction prependTo(parent) {\n  $(parent).prepend(this);\n  return this;\n}\n\nfunction insertBefore(selector) {\n  const before = $(selector);\n\n  for (let i = 0; i < this.length; i += 1) {\n    if (before.length === 1) {\n      before[0].parentNode.insertBefore(this[i], before[0]);\n    } else if (before.length > 1) {\n      for (let j = 0; j < before.length; j += 1) {\n        before[j].parentNode.insertBefore(this[i].cloneNode(true), before[j]);\n      }\n    }\n  }\n}\n\nfunction insertAfter(selector) {\n  const after = $(selector);\n\n  for (let i = 0; i < this.length; i += 1) {\n    if (after.length === 1) {\n      after[0].parentNode.insertBefore(this[i], after[0].nextSibling);\n    } else if (after.length > 1) {\n      for (let j = 0; j < after.length; j += 1) {\n        after[j].parentNode.insertBefore(this[i].cloneNode(true), after[j].nextSibling);\n      }\n    }\n  }\n}\n\nfunction next(selector) {\n  if (this.length > 0) {\n    if (selector) {\n      if (this[0].nextElementSibling && $(this[0].nextElementSibling).is(selector)) {\n        return $([this[0].nextElementSibling]);\n      }\n\n      return $([]);\n    }\n\n    if (this[0].nextElementSibling) return $([this[0].nextElementSibling]);\n    return $([]);\n  }\n\n  return $([]);\n}\n\nfunction nextAll(selector) {\n  const nextEls = [];\n  let el = this[0];\n  if (!el) return $([]);\n\n  while (el.nextElementSibling) {\n    const next = el.nextElementSibling; // eslint-disable-line\n\n    if (selector) {\n      if ($(next).is(selector)) nextEls.push(next);\n    } else nextEls.push(next);\n\n    el = next;\n  }\n\n  return $(nextEls);\n}\n\nfunction prev(selector) {\n  if (this.length > 0) {\n    const el = this[0];\n\n    if (selector) {\n      if (el.previousElementSibling && $(el.previousElementSibling).is(selector)) {\n        return $([el.previousElementSibling]);\n      }\n\n      return $([]);\n    }\n\n    if (el.previousElementSibling) return $([el.previousElementSibling]);\n    return $([]);\n  }\n\n  return $([]);\n}\n\nfunction prevAll(selector) {\n  const prevEls = [];\n  let el = this[0];\n  if (!el) return $([]);\n\n  while (el.previousElementSibling) {\n    const prev = el.previousElementSibling; // eslint-disable-line\n\n    if (selector) {\n      if ($(prev).is(selector)) prevEls.push(prev);\n    } else prevEls.push(prev);\n\n    el = prev;\n  }\n\n  return $(prevEls);\n}\n\nfunction siblings(selector) {\n  return this.nextAll(selector).add(this.prevAll(selector));\n}\n\nfunction parent(selector) {\n  const parents = []; // eslint-disable-line\n\n  for (let i = 0; i < this.length; i += 1) {\n    if (this[i].parentNode !== null) {\n      if (selector) {\n        if ($(this[i].parentNode).is(selector)) parents.push(this[i].parentNode);\n      } else {\n        parents.push(this[i].parentNode);\n      }\n    }\n  }\n\n  return $(parents);\n}\n\nfunction parents(selector) {\n  const parents = []; // eslint-disable-line\n\n  for (let i = 0; i < this.length; i += 1) {\n    let parent = this[i].parentNode; // eslint-disable-line\n\n    while (parent) {\n      if (selector) {\n        if ($(parent).is(selector)) parents.push(parent);\n      } else {\n        parents.push(parent);\n      }\n\n      parent = parent.parentNode;\n    }\n  }\n\n  return $(parents);\n}\n\nfunction closest(selector) {\n  let closest = this; // eslint-disable-line\n\n  if (typeof selector === 'undefined') {\n    return $([]);\n  }\n\n  if (!closest.is(selector)) {\n    closest = closest.parents(selector).eq(0);\n  }\n\n  return closest;\n}\n\nfunction find(selector) {\n  const foundElements = [];\n\n  for (let i = 0; i < this.length; i += 1) {\n    const found = this[i].querySelectorAll(selector);\n\n    for (let j = 0; j < found.length; j += 1) {\n      foundElements.push(found[j]);\n    }\n  }\n\n  return $(foundElements);\n}\n\nfunction children(selector) {\n  const children = []; // eslint-disable-line\n\n  for (let i = 0; i < this.length; i += 1) {\n    const childNodes = this[i].children;\n\n    for (let j = 0; j < childNodes.length; j += 1) {\n      if (!selector || $(childNodes[j]).is(selector)) {\n        children.push(childNodes[j]);\n      }\n    }\n  }\n\n  return $(children);\n}\n\nfunction remove() {\n  for (let i = 0; i < this.length; i += 1) {\n    if (this[i].parentNode) this[i].parentNode.removeChild(this[i]);\n  }\n\n  return this;\n}\n\nfunction detach() {\n  return this.remove();\n}\n\nfunction add(...els) {\n  const dom = this;\n  let i;\n  let j;\n\n  for (i = 0; i < els.length; i += 1) {\n    const toAdd = $(els[i]);\n\n    for (j = 0; j < toAdd.length; j += 1) {\n      dom.push(toAdd[j]);\n    }\n  }\n\n  return dom;\n}\n\nfunction empty() {\n  for (let i = 0; i < this.length; i += 1) {\n    const el = this[i];\n\n    if (el.nodeType === 1) {\n      for (let j = 0; j < el.childNodes.length; j += 1) {\n        if (el.childNodes[j].parentNode) {\n          el.childNodes[j].parentNode.removeChild(el.childNodes[j]);\n        }\n      }\n\n      el.textContent = '';\n    }\n  }\n\n  return this;\n}\n\n// eslint-disable-next-line\n\nfunction scrollTo(...args) {\n  const window = getWindow();\n  let [left, top, duration, easing, callback] = args;\n\n  if (args.length === 4 && typeof easing === 'function') {\n    callback = easing;\n    [left, top, duration, callback, easing] = args;\n  }\n\n  if (typeof easing === 'undefined') easing = 'swing';\n  return this.each(function animate() {\n    const el = this;\n    let currentTop;\n    let currentLeft;\n    let maxTop;\n    let maxLeft;\n    let newTop;\n    let newLeft;\n    let scrollTop; // eslint-disable-line\n\n    let scrollLeft; // eslint-disable-line\n\n    let animateTop = top > 0 || top === 0;\n    let animateLeft = left > 0 || left === 0;\n\n    if (typeof easing === 'undefined') {\n      easing = 'swing';\n    }\n\n    if (animateTop) {\n      currentTop = el.scrollTop;\n\n      if (!duration) {\n        el.scrollTop = top;\n      }\n    }\n\n    if (animateLeft) {\n      currentLeft = el.scrollLeft;\n\n      if (!duration) {\n        el.scrollLeft = left;\n      }\n    }\n\n    if (!duration) return;\n\n    if (animateTop) {\n      maxTop = el.scrollHeight - el.offsetHeight;\n      newTop = Math.max(Math.min(top, maxTop), 0);\n    }\n\n    if (animateLeft) {\n      maxLeft = el.scrollWidth - el.offsetWidth;\n      newLeft = Math.max(Math.min(left, maxLeft), 0);\n    }\n\n    let startTime = null;\n    if (animateTop && newTop === currentTop) animateTop = false;\n    if (animateLeft && newLeft === currentLeft) animateLeft = false;\n\n    function render(time = new Date().getTime()) {\n      if (startTime === null) {\n        startTime = time;\n      }\n\n      const progress = Math.max(Math.min((time - startTime) / duration, 1), 0);\n      const easeProgress = easing === 'linear' ? progress : 0.5 - Math.cos(progress * Math.PI) / 2;\n      let done;\n      if (animateTop) scrollTop = currentTop + easeProgress * (newTop - currentTop);\n      if (animateLeft) scrollLeft = currentLeft + easeProgress * (newLeft - currentLeft);\n\n      if (animateTop && newTop > currentTop && scrollTop >= newTop) {\n        el.scrollTop = newTop;\n        done = true;\n      }\n\n      if (animateTop && newTop < currentTop && scrollTop <= newTop) {\n        el.scrollTop = newTop;\n        done = true;\n      }\n\n      if (animateLeft && newLeft > currentLeft && scrollLeft >= newLeft) {\n        el.scrollLeft = newLeft;\n        done = true;\n      }\n\n      if (animateLeft && newLeft < currentLeft && scrollLeft <= newLeft) {\n        el.scrollLeft = newLeft;\n        done = true;\n      }\n\n      if (done) {\n        if (callback) callback();\n        return;\n      }\n\n      if (animateTop) el.scrollTop = scrollTop;\n      if (animateLeft) el.scrollLeft = scrollLeft;\n      window.requestAnimationFrame(render);\n    }\n\n    window.requestAnimationFrame(render);\n  });\n} // scrollTop(top, duration, easing, callback) {\n\n\nfunction scrollTop(...args) {\n  let [top, duration, easing, callback] = args;\n\n  if (args.length === 3 && typeof easing === 'function') {\n    [top, duration, callback, easing] = args;\n  }\n\n  const dom = this;\n\n  if (typeof top === 'undefined') {\n    if (dom.length > 0) return dom[0].scrollTop;\n    return null;\n  }\n\n  return dom.scrollTo(undefined, top, duration, easing, callback);\n}\n\nfunction scrollLeft(...args) {\n  let [left, duration, easing, callback] = args;\n\n  if (args.length === 3 && typeof easing === 'function') {\n    [left, duration, callback, easing] = args;\n  }\n\n  const dom = this;\n\n  if (typeof left === 'undefined') {\n    if (dom.length > 0) return dom[0].scrollLeft;\n    return null;\n  }\n\n  return dom.scrollTo(left, undefined, duration, easing, callback);\n}\n\n// eslint-disable-next-line\n\nfunction animate(initialProps, initialParams) {\n  const window = getWindow();\n  const els = this;\n  const a = {\n    props: Object.assign({}, initialProps),\n    params: Object.assign({\n      duration: 300,\n      easing: 'swing' // or 'linear'\n\n      /* Callbacks\n      begin(elements)\n      complete(elements)\n      progress(elements, complete, remaining, start, tweenValue)\n      */\n\n    }, initialParams),\n    elements: els,\n    animating: false,\n    que: [],\n\n    easingProgress(easing, progress) {\n      if (easing === 'swing') {\n        return 0.5 - Math.cos(progress * Math.PI) / 2;\n      }\n\n      if (typeof easing === 'function') {\n        return easing(progress);\n      }\n\n      return progress;\n    },\n\n    stop() {\n      if (a.frameId) {\n        window.cancelAnimationFrame(a.frameId);\n      }\n\n      a.animating = false;\n      a.elements.each(el => {\n        const element = el;\n        delete element.dom7AnimateInstance;\n      });\n      a.que = [];\n    },\n\n    done(complete) {\n      a.animating = false;\n      a.elements.each(el => {\n        const element = el;\n        delete element.dom7AnimateInstance;\n      });\n      if (complete) complete(els);\n\n      if (a.que.length > 0) {\n        const que = a.que.shift();\n        a.animate(que[0], que[1]);\n      }\n    },\n\n    animate(props, params) {\n      if (a.animating) {\n        a.que.push([props, params]);\n        return a;\n      }\n\n      const elements = []; // Define & Cache Initials & Units\n\n      a.elements.each((el, index) => {\n        let initialFullValue;\n        let initialValue;\n        let unit;\n        let finalValue;\n        let finalFullValue;\n        if (!el.dom7AnimateInstance) a.elements[index].dom7AnimateInstance = a;\n        elements[index] = {\n          container: el\n        };\n        Object.keys(props).forEach(prop => {\n          initialFullValue = window.getComputedStyle(el, null).getPropertyValue(prop).replace(',', '.');\n          initialValue = parseFloat(initialFullValue);\n          unit = initialFullValue.replace(initialValue, '');\n          finalValue = parseFloat(props[prop]);\n          finalFullValue = props[prop] + unit;\n          elements[index][prop] = {\n            initialFullValue,\n            initialValue,\n            unit,\n            finalValue,\n            finalFullValue,\n            currentValue: initialValue\n          };\n        });\n      });\n      let startTime = null;\n      let time;\n      let elementsDone = 0;\n      let propsDone = 0;\n      let done;\n      let began = false;\n      a.animating = true;\n\n      function render() {\n        time = new Date().getTime();\n        let progress;\n        let easeProgress; // let el;\n\n        if (!began) {\n          began = true;\n          if (params.begin) params.begin(els);\n        }\n\n        if (startTime === null) {\n          startTime = time;\n        }\n\n        if (params.progress) {\n          // eslint-disable-next-line\n          params.progress(els, Math.max(Math.min((time - startTime) / params.duration, 1), 0), startTime + params.duration - time < 0 ? 0 : startTime + params.duration - time, startTime);\n        }\n\n        elements.forEach(element => {\n          const el = element;\n          if (done || el.done) return;\n          Object.keys(props).forEach(prop => {\n            if (done || el.done) return;\n            progress = Math.max(Math.min((time - startTime) / params.duration, 1), 0);\n            easeProgress = a.easingProgress(params.easing, progress);\n            const {\n              initialValue,\n              finalValue,\n              unit\n            } = el[prop];\n            el[prop].currentValue = initialValue + easeProgress * (finalValue - initialValue);\n            const currentValue = el[prop].currentValue;\n\n            if (finalValue > initialValue && currentValue >= finalValue || finalValue < initialValue && currentValue <= finalValue) {\n              el.container.style[prop] = finalValue + unit;\n              propsDone += 1;\n\n              if (propsDone === Object.keys(props).length) {\n                el.done = true;\n                elementsDone += 1;\n              }\n\n              if (elementsDone === elements.length) {\n                done = true;\n              }\n            }\n\n            if (done) {\n              a.done(params.complete);\n              return;\n            }\n\n            el.container.style[prop] = currentValue + unit;\n          });\n        });\n        if (done) return; // Then call\n\n        a.frameId = window.requestAnimationFrame(render);\n      }\n\n      a.frameId = window.requestAnimationFrame(render);\n      return a;\n    }\n\n  };\n\n  if (a.elements.length === 0) {\n    return els;\n  }\n\n  let animateInstance;\n\n  for (let i = 0; i < a.elements.length; i += 1) {\n    if (a.elements[i].dom7AnimateInstance) {\n      animateInstance = a.elements[i].dom7AnimateInstance;\n    } else a.elements[i].dom7AnimateInstance = a;\n  }\n\n  if (!animateInstance) {\n    animateInstance = a;\n  }\n\n  if (initialProps === 'stop') {\n    animateInstance.stop();\n  } else {\n    animateInstance.animate(a.props, a.params);\n  }\n\n  return els;\n}\n\nfunction stop() {\n  const els = this;\n\n  for (let i = 0; i < els.length; i += 1) {\n    if (els[i].dom7AnimateInstance) {\n      els[i].dom7AnimateInstance.stop();\n    }\n  }\n}\n\nconst noTrigger = 'resize scroll'.split(' ');\n\nfunction shortcut(name) {\n  function eventHandler(...args) {\n    if (typeof args[0] === 'undefined') {\n      for (let i = 0; i < this.length; i += 1) {\n        if (noTrigger.indexOf(name) < 0) {\n          if (name in this[i]) this[i][name]();else {\n            $(this[i]).trigger(name);\n          }\n        }\n      }\n\n      return this;\n    }\n\n    return this.on(name, ...args);\n  }\n\n  return eventHandler;\n}\n\nconst click = shortcut('click');\nconst blur = shortcut('blur');\nconst focus = shortcut('focus');\nconst focusin = shortcut('focusin');\nconst focusout = shortcut('focusout');\nconst keyup = shortcut('keyup');\nconst keydown = shortcut('keydown');\nconst keypress = shortcut('keypress');\nconst submit = shortcut('submit');\nconst change = shortcut('change');\nconst mousedown = shortcut('mousedown');\nconst mousemove = shortcut('mousemove');\nconst mouseup = shortcut('mouseup');\nconst mouseenter = shortcut('mouseenter');\nconst mouseleave = shortcut('mouseleave');\nconst mouseout = shortcut('mouseout');\nconst mouseover = shortcut('mouseover');\nconst touchstart = shortcut('touchstart');\nconst touchend = shortcut('touchend');\nconst touchmove = shortcut('touchmove');\nconst resize = shortcut('resize');\nconst scroll = shortcut('scroll');\n\nexport default $;\nexport { $, add, addClass, animate, animationEnd, append, appendTo, attr, blur, change, children, click, closest, css, data, dataset, detach, each, empty, eq, filter, find, focus, focusin, focusout, hasClass, height, hide, html, index, insertAfter, insertBefore, is, keydown, keypress, keyup, mousedown, mouseenter, mouseleave, mousemove, mouseout, mouseover, mouseup, next, nextAll, off, offset, on, once, outerHeight, outerWidth, parent, parents, prepend, prependTo, prev, prevAll, prop, remove, removeAttr, removeClass, removeData, resize, scroll, scrollLeft, scrollTo, scrollTop, show, siblings, stop, styles, submit, text, toggleClass, touchend, touchmove, touchstart, transform, transition, transitionEnd, transitionStart, trigger, val, value, width };\n","import { $, addClass, removeClass, hasClass, toggleClass, attr, removeAttr, transform, transition, on, off, trigger, transitionEnd, outerWidth, outerHeight, styles, offset, css, each, html, text, is, index, eq, append, prepend, next, nextAll, prev, prevAll, parent, parents, closest, find, children, filter, remove } from 'dom7';\nconst Methods = {\n  addClass,\n  removeClass,\n  hasClass,\n  toggleClass,\n  attr,\n  removeAttr,\n  transform,\n  transition,\n  on,\n  off,\n  trigger,\n  transitionEnd,\n  outerWidth,\n  outerHeight,\n  styles,\n  offset,\n  css,\n  each,\n  html,\n  text,\n  is,\n  index,\n  eq,\n  append,\n  prepend,\n  next,\n  nextAll,\n  prev,\n  prevAll,\n  parent,\n  parents,\n  closest,\n  find,\n  children,\n  filter,\n  remove\n};\nObject.keys(Methods).forEach(methodName => {\n  Object.defineProperty($.fn, methodName, {\n    value: Methods[methodName],\n    writable: true\n  });\n});\nexport default $;","import { getWindow } from 'ssr-window';\n\nfunction deleteProps(obj) {\n  const object = obj;\n  Object.keys(object).forEach(key => {\n    try {\n      object[key] = null;\n    } catch (e) {// no getter for object\n    }\n\n    try {\n      delete object[key];\n    } catch (e) {// something got wrong\n    }\n  });\n}\n\nfunction nextTick(callback, delay = 0) {\n  return setTimeout(callback, delay);\n}\n\nfunction now() {\n  return Date.now();\n}\n\nfunction getComputedStyle(el) {\n  const window = getWindow();\n  let style;\n\n  if (window.getComputedStyle) {\n    style = window.getComputedStyle(el, null);\n  }\n\n  if (!style && el.currentStyle) {\n    style = el.currentStyle;\n  }\n\n  if (!style) {\n    style = el.style;\n  }\n\n  return style;\n}\n\nfunction getTranslate(el, axis = 'x') {\n  const window = getWindow();\n  let matrix;\n  let curTransform;\n  let transformMatrix;\n  const curStyle = getComputedStyle(el, null);\n\n  if (window.WebKitCSSMatrix) {\n    curTransform = curStyle.transform || curStyle.webkitTransform;\n\n    if (curTransform.split(',').length > 6) {\n      curTransform = curTransform.split(', ').map(a => a.replace(',', '.')).join(', ');\n    } // Some old versions of Webkit choke when 'none' is passed; pass\n    // empty string instead in this case\n\n\n    transformMatrix = new window.WebKitCSSMatrix(curTransform === 'none' ? '' : curTransform);\n  } else {\n    transformMatrix = curStyle.MozTransform || curStyle.OTransform || curStyle.MsTransform || curStyle.msTransform || curStyle.transform || curStyle.getPropertyValue('transform').replace('translate(', 'matrix(1, 0, 0, 1,');\n    matrix = transformMatrix.toString().split(',');\n  }\n\n  if (axis === 'x') {\n    // Latest Chrome and webkits Fix\n    if (window.WebKitCSSMatrix) curTransform = transformMatrix.m41; // Crazy IE10 Matrix\n    else if (matrix.length === 16) curTransform = parseFloat(matrix[12]); // Normal Browsers\n    else curTransform = parseFloat(matrix[4]);\n  }\n\n  if (axis === 'y') {\n    // Latest Chrome and webkits Fix\n    if (window.WebKitCSSMatrix) curTransform = transformMatrix.m42; // Crazy IE10 Matrix\n    else if (matrix.length === 16) curTransform = parseFloat(matrix[13]); // Normal Browsers\n    else curTransform = parseFloat(matrix[5]);\n  }\n\n  return curTransform || 0;\n}\n\nfunction isObject(o) {\n  return typeof o === 'object' && o !== null && o.constructor && Object.prototype.toString.call(o).slice(8, -1) === 'Object';\n}\n\nfunction isNode(node) {\n  // eslint-disable-next-line\n  if (typeof window !== 'undefined' && typeof window.HTMLElement !== 'undefined') {\n    return node instanceof HTMLElement;\n  }\n\n  return node && (node.nodeType === 1 || node.nodeType === 11);\n}\n\nfunction extend(...args) {\n  const to = Object(args[0]);\n  const noExtend = ['__proto__', 'constructor', 'prototype'];\n\n  for (let i = 1; i < args.length; i += 1) {\n    const nextSource = args[i];\n\n    if (nextSource !== undefined && nextSource !== null && !isNode(nextSource)) {\n      const keysArray = Object.keys(Object(nextSource)).filter(key => noExtend.indexOf(key) < 0);\n\n      for (let nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex += 1) {\n        const nextKey = keysArray[nextIndex];\n        const desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n\n        if (desc !== undefined && desc.enumerable) {\n          if (isObject(to[nextKey]) && isObject(nextSource[nextKey])) {\n            if (nextSource[nextKey].__swiper__) {\n              to[nextKey] = nextSource[nextKey];\n            } else {\n              extend(to[nextKey], nextSource[nextKey]);\n            }\n          } else if (!isObject(to[nextKey]) && isObject(nextSource[nextKey])) {\n            to[nextKey] = {};\n\n            if (nextSource[nextKey].__swiper__) {\n              to[nextKey] = nextSource[nextKey];\n            } else {\n              extend(to[nextKey], nextSource[nextKey]);\n            }\n          } else {\n            to[nextKey] = nextSource[nextKey];\n          }\n        }\n      }\n    }\n  }\n\n  return to;\n}\n\nfunction setCSSProperty(el, varName, varValue) {\n  el.style.setProperty(varName, varValue);\n}\n\nfunction animateCSSModeScroll({\n  swiper,\n  targetPosition,\n  side\n}) {\n  const window = getWindow();\n  const startPosition = -swiper.translate;\n  let startTime = null;\n  let time;\n  const duration = swiper.params.speed;\n  swiper.wrapperEl.style.scrollSnapType = 'none';\n  window.cancelAnimationFrame(swiper.cssModeFrameID);\n  const dir = targetPosition > startPosition ? 'next' : 'prev';\n\n  const isOutOfBound = (current, target) => {\n    return dir === 'next' && current >= target || dir === 'prev' && current <= target;\n  };\n\n  const animate = () => {\n    time = new Date().getTime();\n\n    if (startTime === null) {\n      startTime = time;\n    }\n\n    const progress = Math.max(Math.min((time - startTime) / duration, 1), 0);\n    const easeProgress = 0.5 - Math.cos(progress * Math.PI) / 2;\n    let currentPosition = startPosition + easeProgress * (targetPosition - startPosition);\n\n    if (isOutOfBound(currentPosition, targetPosition)) {\n      currentPosition = targetPosition;\n    }\n\n    swiper.wrapperEl.scrollTo({\n      [side]: currentPosition\n    });\n\n    if (isOutOfBound(currentPosition, targetPosition)) {\n      swiper.wrapperEl.style.overflow = 'hidden';\n      swiper.wrapperEl.style.scrollSnapType = '';\n      setTimeout(() => {\n        swiper.wrapperEl.style.overflow = '';\n        swiper.wrapperEl.scrollTo({\n          [side]: currentPosition\n        });\n      });\n      window.cancelAnimationFrame(swiper.cssModeFrameID);\n      return;\n    }\n\n    swiper.cssModeFrameID = window.requestAnimationFrame(animate);\n  };\n\n  animate();\n}\n\nexport { animateCSSModeScroll, deleteProps, nextTick, now, getTranslate, isObject, extend, getComputedStyle, setCSSProperty };","import { getWindow, getDocument } from 'ssr-window';\nlet support;\n\nfunction calcSupport() {\n  const window = getWindow();\n  const document = getDocument();\n  return {\n    smoothScroll: document.documentElement && 'scrollBehavior' in document.documentElement.style,\n    touch: !!('ontouchstart' in window || window.DocumentTouch && document instanceof window.DocumentTouch),\n    passiveListener: function checkPassiveListener() {\n      let supportsPassive = false;\n\n      try {\n        const opts = Object.defineProperty({}, 'passive', {\n          // eslint-disable-next-line\n          get() {\n            supportsPassive = true;\n          }\n\n        });\n        window.addEventListener('testPassiveListener', null, opts);\n      } catch (e) {// No support\n      }\n\n      return supportsPassive;\n    }(),\n    gestures: function checkGestures() {\n      return 'ongesturestart' in window;\n    }()\n  };\n}\n\nfunction getSupport() {\n  if (!support) {\n    support = calcSupport();\n  }\n\n  return support;\n}\n\nexport { getSupport };","import { getWindow } from 'ssr-window';\nimport { getSupport } from './get-support.js';\nlet deviceCached;\n\nfunction calcDevice({\n  userAgent\n} = {}) {\n  const support = getSupport();\n  const window = getWindow();\n  const platform = window.navigator.platform;\n  const ua = userAgent || window.navigator.userAgent;\n  const device = {\n    ios: false,\n    android: false\n  };\n  const screenWidth = window.screen.width;\n  const screenHeight = window.screen.height;\n  const android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/); // eslint-disable-line\n\n  let ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n  const ipod = ua.match(/(iPod)(.*OS\\s([\\d_]+))?/);\n  const iphone = !ipad && ua.match(/(iPhone\\sOS|iOS)\\s([\\d_]+)/);\n  const windows = platform === 'Win32';\n  let macos = platform === 'MacIntel'; // iPadOs 13 fix\n\n  const iPadScreens = ['1024x1366', '1366x1024', '834x1194', '1194x834', '834x1112', '1112x834', '768x1024', '1024x768', '820x1180', '1180x820', '810x1080', '1080x810'];\n\n  if (!ipad && macos && support.touch && iPadScreens.indexOf(`${screenWidth}x${screenHeight}`) >= 0) {\n    ipad = ua.match(/(Version)\\/([\\d.]+)/);\n    if (!ipad) ipad = [0, 1, '13_0_0'];\n    macos = false;\n  } // Android\n\n\n  if (android && !windows) {\n    device.os = 'android';\n    device.android = true;\n  }\n\n  if (ipad || iphone || ipod) {\n    device.os = 'ios';\n    device.ios = true;\n  } // Export object\n\n\n  return device;\n}\n\nfunction getDevice(overrides = {}) {\n  if (!deviceCached) {\n    deviceCached = calcDevice(overrides);\n  }\n\n  return deviceCached;\n}\n\nexport { getDevice };","import { getWindow } from 'ssr-window';\nlet browser;\n\nfunction calcBrowser() {\n  const window = getWindow();\n\n  function isSafari() {\n    const ua = window.navigator.userAgent.toLowerCase();\n    return ua.indexOf('safari') >= 0 && ua.indexOf('chrome') < 0 && ua.indexOf('android') < 0;\n  }\n\n  return {\n    isSafari: isSafari(),\n    isWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(window.navigator.userAgent)\n  };\n}\n\nfunction getBrowser() {\n  if (!browser) {\n    browser = calcBrowser();\n  }\n\n  return browser;\n}\n\nexport { getBrowser };","/* eslint-disable no-underscore-dangle */\nexport default {\n  on(events, handler, priority) {\n    const self = this;\n    if (typeof handler !== 'function') return self;\n    const method = priority ? 'unshift' : 'push';\n    events.split(' ').forEach(event => {\n      if (!self.eventsListeners[event]) self.eventsListeners[event] = [];\n      self.eventsListeners[event][method](handler);\n    });\n    return self;\n  },\n\n  once(events, handler, priority) {\n    const self = this;\n    if (typeof handler !== 'function') return self;\n\n    function onceHandler(...args) {\n      self.off(events, onceHandler);\n\n      if (onceHandler.__emitterProxy) {\n        delete onceHandler.__emitterProxy;\n      }\n\n      handler.apply(self, args);\n    }\n\n    onceHandler.__emitterProxy = handler;\n    return self.on(events, onceHandler, priority);\n  },\n\n  onAny(handler, priority) {\n    const self = this;\n    if (typeof handler !== 'function') return self;\n    const method = priority ? 'unshift' : 'push';\n\n    if (self.eventsAnyListeners.indexOf(handler) < 0) {\n      self.eventsAnyListeners[method](handler);\n    }\n\n    return self;\n  },\n\n  offAny(handler) {\n    const self = this;\n    if (!self.eventsAnyListeners) return self;\n    const index = self.eventsAnyListeners.indexOf(handler);\n\n    if (index >= 0) {\n      self.eventsAnyListeners.splice(index, 1);\n    }\n\n    return self;\n  },\n\n  off(events, handler) {\n    const self = this;\n    if (!self.eventsListeners) return self;\n    events.split(' ').forEach(event => {\n      if (typeof handler === 'undefined') {\n        self.eventsListeners[event] = [];\n      } else if (self.eventsListeners[event]) {\n        self.eventsListeners[event].forEach((eventHandler, index) => {\n          if (eventHandler === handler || eventHandler.__emitterProxy && eventHandler.__emitterProxy === handler) {\n            self.eventsListeners[event].splice(index, 1);\n          }\n        });\n      }\n    });\n    return self;\n  },\n\n  emit(...args) {\n    const self = this;\n    if (!self.eventsListeners) return self;\n    let events;\n    let data;\n    let context;\n\n    if (typeof args[0] === 'string' || Array.isArray(args[0])) {\n      events = args[0];\n      data = args.slice(1, args.length);\n      context = self;\n    } else {\n      events = args[0].events;\n      data = args[0].data;\n      context = args[0].context || self;\n    }\n\n    data.unshift(context);\n    const eventsArray = Array.isArray(events) ? events : events.split(' ');\n    eventsArray.forEach(event => {\n      if (self.eventsAnyListeners && self.eventsAnyListeners.length) {\n        self.eventsAnyListeners.forEach(eventHandler => {\n          eventHandler.apply(context, [event, ...data]);\n        });\n      }\n\n      if (self.eventsListeners && self.eventsListeners[event]) {\n        self.eventsListeners[event].forEach(eventHandler => {\n          eventHandler.apply(context, data);\n        });\n      }\n    });\n    return self;\n  }\n\n};","import updateSize from './updateSize.js';\nimport updateSlides from './updateSlides.js';\nimport updateAutoHeight from './updateAutoHeight.js';\nimport updateSlidesOffset from './updateSlidesOffset.js';\nimport updateSlidesProgress from './updateSlidesProgress.js';\nimport updateProgress from './updateProgress.js';\nimport updateSlidesClasses from './updateSlidesClasses.js';\nimport updateActiveIndex from './updateActiveIndex.js';\nimport updateClickedSlide from './updateClickedSlide.js';\nexport default {\n  updateSize,\n  updateSlides,\n  updateAutoHeight,\n  updateSlidesOffset,\n  updateSlidesProgress,\n  updateProgress,\n  updateSlidesClasses,\n  updateActiveIndex,\n  updateClickedSlide\n};","export default function updateSize() {\n  const swiper = this;\n  let width;\n  let height;\n  const $el = swiper.$el;\n\n  if (typeof swiper.params.width !== 'undefined' && swiper.params.width !== null) {\n    width = swiper.params.width;\n  } else {\n    width = $el[0].clientWidth;\n  }\n\n  if (typeof swiper.params.height !== 'undefined' && swiper.params.height !== null) {\n    height = swiper.params.height;\n  } else {\n    height = $el[0].clientHeight;\n  }\n\n  if (width === 0 && swiper.isHorizontal() || height === 0 && swiper.isVertical()) {\n    return;\n  } // Subtract paddings\n\n\n  width = width - parseInt($el.css('padding-left') || 0, 10) - parseInt($el.css('padding-right') || 0, 10);\n  height = height - parseInt($el.css('padding-top') || 0, 10) - parseInt($el.css('padding-bottom') || 0, 10);\n  if (Number.isNaN(width)) width = 0;\n  if (Number.isNaN(height)) height = 0;\n  Object.assign(swiper, {\n    width,\n    height,\n    size: swiper.isHorizontal() ? width : height\n  });\n}","import { setCSSProperty } from '../../shared/utils.js';\nexport default function updateSlides() {\n  const swiper = this;\n\n  function getDirectionLabel(property) {\n    if (swiper.isHorizontal()) {\n      return property;\n    } // prettier-ignore\n\n\n    return {\n      'width': 'height',\n      'margin-top': 'margin-left',\n      'margin-bottom ': 'margin-right',\n      'margin-left': 'margin-top',\n      'margin-right': 'margin-bottom',\n      'padding-left': 'padding-top',\n      'padding-right': 'padding-bottom',\n      'marginRight': 'marginBottom'\n    }[property];\n  }\n\n  function getDirectionPropertyValue(node, label) {\n    return parseFloat(node.getPropertyValue(getDirectionLabel(label)) || 0);\n  }\n\n  const params = swiper.params;\n  const {\n    $wrapperEl,\n    size: swiperSize,\n    rtlTranslate: rtl,\n    wrongRTL\n  } = swiper;\n  const isVirtual = swiper.virtual && params.virtual.enabled;\n  const previousSlidesLength = isVirtual ? swiper.virtual.slides.length : swiper.slides.length;\n  const slides = $wrapperEl.children(`.${swiper.params.slideClass}`);\n  const slidesLength = isVirtual ? swiper.virtual.slides.length : slides.length;\n  let snapGrid = [];\n  const slidesGrid = [];\n  const slidesSizesGrid = [];\n  let offsetBefore = params.slidesOffsetBefore;\n\n  if (typeof offsetBefore === 'function') {\n    offsetBefore = params.slidesOffsetBefore.call(swiper);\n  }\n\n  let offsetAfter = params.slidesOffsetAfter;\n\n  if (typeof offsetAfter === 'function') {\n    offsetAfter = params.slidesOffsetAfter.call(swiper);\n  }\n\n  const previousSnapGridLength = swiper.snapGrid.length;\n  const previousSlidesGridLength = swiper.slidesGrid.length;\n  let spaceBetween = params.spaceBetween;\n  let slidePosition = -offsetBefore;\n  let prevSlideSize = 0;\n  let index = 0;\n\n  if (typeof swiperSize === 'undefined') {\n    return;\n  }\n\n  if (typeof spaceBetween === 'string' && spaceBetween.indexOf('%') >= 0) {\n    spaceBetween = parseFloat(spaceBetween.replace('%', '')) / 100 * swiperSize;\n  }\n\n  swiper.virtualSize = -spaceBetween; // reset margins\n\n  if (rtl) slides.css({\n    marginLeft: '',\n    marginBottom: '',\n    marginTop: ''\n  });else slides.css({\n    marginRight: '',\n    marginBottom: '',\n    marginTop: ''\n  }); // reset cssMode offsets\n\n  if (params.centeredSlides && params.cssMode) {\n    setCSSProperty(swiper.wrapperEl, '--swiper-centered-offset-before', '');\n    setCSSProperty(swiper.wrapperEl, '--swiper-centered-offset-after', '');\n  }\n\n  const gridEnabled = params.grid && params.grid.rows > 1 && swiper.grid;\n\n  if (gridEnabled) {\n    swiper.grid.initSlides(slidesLength);\n  } // Calc slides\n\n\n  let slideSize;\n  const shouldResetSlideSize = params.slidesPerView === 'auto' && params.breakpoints && Object.keys(params.breakpoints).filter(key => {\n    return typeof params.breakpoints[key].slidesPerView !== 'undefined';\n  }).length > 0;\n\n  for (let i = 0; i < slidesLength; i += 1) {\n    slideSize = 0;\n    const slide = slides.eq(i);\n\n    if (gridEnabled) {\n      swiper.grid.updateSlide(i, slide, slidesLength, getDirectionLabel);\n    }\n\n    if (slide.css('display') === 'none') continue; // eslint-disable-line\n\n    if (params.slidesPerView === 'auto') {\n      if (shouldResetSlideSize) {\n        slides[i].style[getDirectionLabel('width')] = ``;\n      }\n\n      const slideStyles = getComputedStyle(slide[0]);\n      const currentTransform = slide[0].style.transform;\n      const currentWebKitTransform = slide[0].style.webkitTransform;\n\n      if (currentTransform) {\n        slide[0].style.transform = 'none';\n      }\n\n      if (currentWebKitTransform) {\n        slide[0].style.webkitTransform = 'none';\n      }\n\n      if (params.roundLengths) {\n        slideSize = swiper.isHorizontal() ? slide.outerWidth(true) : slide.outerHeight(true);\n      } else {\n        // eslint-disable-next-line\n        const width = getDirectionPropertyValue(slideStyles, 'width');\n        const paddingLeft = getDirectionPropertyValue(slideStyles, 'padding-left');\n        const paddingRight = getDirectionPropertyValue(slideStyles, 'padding-right');\n        const marginLeft = getDirectionPropertyValue(slideStyles, 'margin-left');\n        const marginRight = getDirectionPropertyValue(slideStyles, 'margin-right');\n        const boxSizing = slideStyles.getPropertyValue('box-sizing');\n\n        if (boxSizing && boxSizing === 'border-box') {\n          slideSize = width + marginLeft + marginRight;\n        } else {\n          const {\n            clientWidth,\n            offsetWidth\n          } = slide[0];\n          slideSize = width + paddingLeft + paddingRight + marginLeft + marginRight + (offsetWidth - clientWidth);\n        }\n      }\n\n      if (currentTransform) {\n        slide[0].style.transform = currentTransform;\n      }\n\n      if (currentWebKitTransform) {\n        slide[0].style.webkitTransform = currentWebKitTransform;\n      }\n\n      if (params.roundLengths) slideSize = Math.floor(slideSize);\n    } else {\n      slideSize = (swiperSize - (params.slidesPerView - 1) * spaceBetween) / params.slidesPerView;\n      if (params.roundLengths) slideSize = Math.floor(slideSize);\n\n      if (slides[i]) {\n        slides[i].style[getDirectionLabel('width')] = `${slideSize}px`;\n      }\n    }\n\n    if (slides[i]) {\n      slides[i].swiperSlideSize = slideSize;\n    }\n\n    slidesSizesGrid.push(slideSize);\n\n    if (params.centeredSlides) {\n      slidePosition = slidePosition + slideSize / 2 + prevSlideSize / 2 + spaceBetween;\n      if (prevSlideSize === 0 && i !== 0) slidePosition = slidePosition - swiperSize / 2 - spaceBetween;\n      if (i === 0) slidePosition = slidePosition - swiperSize / 2 - spaceBetween;\n      if (Math.abs(slidePosition) < 1 / 1000) slidePosition = 0;\n      if (params.roundLengths) slidePosition = Math.floor(slidePosition);\n      if (index % params.slidesPerGroup === 0) snapGrid.push(slidePosition);\n      slidesGrid.push(slidePosition);\n    } else {\n      if (params.roundLengths) slidePosition = Math.floor(slidePosition);\n      if ((index - Math.min(swiper.params.slidesPerGroupSkip, index)) % swiper.params.slidesPerGroup === 0) snapGrid.push(slidePosition);\n      slidesGrid.push(slidePosition);\n      slidePosition = slidePosition + slideSize + spaceBetween;\n    }\n\n    swiper.virtualSize += slideSize + spaceBetween;\n    prevSlideSize = slideSize;\n    index += 1;\n  }\n\n  swiper.virtualSize = Math.max(swiper.virtualSize, swiperSize) + offsetAfter;\n\n  if (rtl && wrongRTL && (params.effect === 'slide' || params.effect === 'coverflow')) {\n    $wrapperEl.css({\n      width: `${swiper.virtualSize + params.spaceBetween}px`\n    });\n  }\n\n  if (params.setWrapperSize) {\n    $wrapperEl.css({\n      [getDirectionLabel('width')]: `${swiper.virtualSize + params.spaceBetween}px`\n    });\n  }\n\n  if (gridEnabled) {\n    swiper.grid.updateWrapperSize(slideSize, snapGrid, getDirectionLabel);\n  } // Remove last grid elements depending on width\n\n\n  if (!params.centeredSlides) {\n    const newSlidesGrid = [];\n\n    for (let i = 0; i < snapGrid.length; i += 1) {\n      let slidesGridItem = snapGrid[i];\n      if (params.roundLengths) slidesGridItem = Math.floor(slidesGridItem);\n\n      if (snapGrid[i] <= swiper.virtualSize - swiperSize) {\n        newSlidesGrid.push(slidesGridItem);\n      }\n    }\n\n    snapGrid = newSlidesGrid;\n\n    if (Math.floor(swiper.virtualSize - swiperSize) - Math.floor(snapGrid[snapGrid.length - 1]) > 1) {\n      snapGrid.push(swiper.virtualSize - swiperSize);\n    }\n  }\n\n  if (snapGrid.length === 0) snapGrid = [0];\n\n  if (params.spaceBetween !== 0) {\n    const key = swiper.isHorizontal() && rtl ? 'marginLeft' : getDirectionLabel('marginRight');\n    slides.filter((_, slideIndex) => {\n      if (!params.cssMode) return true;\n\n      if (slideIndex === slides.length - 1) {\n        return false;\n      }\n\n      return true;\n    }).css({\n      [key]: `${spaceBetween}px`\n    });\n  }\n\n  if (params.centeredSlides && params.centeredSlidesBounds) {\n    let allSlidesSize = 0;\n    slidesSizesGrid.forEach(slideSizeValue => {\n      allSlidesSize += slideSizeValue + (params.spaceBetween ? params.spaceBetween : 0);\n    });\n    allSlidesSize -= params.spaceBetween;\n    const maxSnap = allSlidesSize - swiperSize;\n    snapGrid = snapGrid.map(snap => {\n      if (snap < 0) return -offsetBefore;\n      if (snap > maxSnap) return maxSnap + offsetAfter;\n      return snap;\n    });\n  }\n\n  if (params.centerInsufficientSlides) {\n    let allSlidesSize = 0;\n    slidesSizesGrid.forEach(slideSizeValue => {\n      allSlidesSize += slideSizeValue + (params.spaceBetween ? params.spaceBetween : 0);\n    });\n    allSlidesSize -= params.spaceBetween;\n\n    if (allSlidesSize < swiperSize) {\n      const allSlidesOffset = (swiperSize - allSlidesSize) / 2;\n      snapGrid.forEach((snap, snapIndex) => {\n        snapGrid[snapIndex] = snap - allSlidesOffset;\n      });\n      slidesGrid.forEach((snap, snapIndex) => {\n        slidesGrid[snapIndex] = snap + allSlidesOffset;\n      });\n    }\n  }\n\n  Object.assign(swiper, {\n    slides,\n    snapGrid,\n    slidesGrid,\n    slidesSizesGrid\n  });\n\n  if (params.centeredSlides && params.cssMode && !params.centeredSlidesBounds) {\n    setCSSProperty(swiper.wrapperEl, '--swiper-centered-offset-before', `${-snapGrid[0]}px`);\n    setCSSProperty(swiper.wrapperEl, '--swiper-centered-offset-after', `${swiper.size / 2 - slidesSizesGrid[slidesSizesGrid.length - 1] / 2}px`);\n    const addToSnapGrid = -swiper.snapGrid[0];\n    const addToSlidesGrid = -swiper.slidesGrid[0];\n    swiper.snapGrid = swiper.snapGrid.map(v => v + addToSnapGrid);\n    swiper.slidesGrid = swiper.slidesGrid.map(v => v + addToSlidesGrid);\n  }\n\n  if (slidesLength !== previousSlidesLength) {\n    swiper.emit('slidesLengthChange');\n  }\n\n  if (snapGrid.length !== previousSnapGridLength) {\n    if (swiper.params.watchOverflow) swiper.checkOverflow();\n    swiper.emit('snapGridLengthChange');\n  }\n\n  if (slidesGrid.length !== previousSlidesGridLength) {\n    swiper.emit('slidesGridLengthChange');\n  }\n\n  if (params.watchSlidesProgress) {\n    swiper.updateSlidesOffset();\n  }\n}","export default function updateAutoHeight(speed) {\n  const swiper = this;\n  const activeSlides = [];\n  const isVirtual = swiper.virtual && swiper.params.virtual.enabled;\n  let newHeight = 0;\n  let i;\n\n  if (typeof speed === 'number') {\n    swiper.setTransition(speed);\n  } else if (speed === true) {\n    swiper.setTransition(swiper.params.speed);\n  }\n\n  const getSlideByIndex = index => {\n    if (isVirtual) {\n      return swiper.slides.filter(el => parseInt(el.getAttribute('data-swiper-slide-index'), 10) === index)[0];\n    }\n\n    return swiper.slides.eq(index)[0];\n  }; // Find slides currently in view\n\n\n  if (swiper.params.slidesPerView !== 'auto' && swiper.params.slidesPerView > 1) {\n    if (swiper.params.centeredSlides) {\n      swiper.visibleSlides.each(slide => {\n        activeSlides.push(slide);\n      });\n    } else {\n      for (i = 0; i < Math.ceil(swiper.params.slidesPerView); i += 1) {\n        const index = swiper.activeIndex + i;\n        if (index > swiper.slides.length && !isVirtual) break;\n        activeSlides.push(getSlideByIndex(index));\n      }\n    }\n  } else {\n    activeSlides.push(getSlideByIndex(swiper.activeIndex));\n  } // Find new height from highest slide in view\n\n\n  for (i = 0; i < activeSlides.length; i += 1) {\n    if (typeof activeSlides[i] !== 'undefined') {\n      const height = activeSlides[i].offsetHeight;\n      newHeight = height > newHeight ? height : newHeight;\n    }\n  } // Update Height\n\n\n  if (newHeight || newHeight === 0) swiper.$wrapperEl.css('height', `${newHeight}px`);\n}","export default function updateSlidesOffset() {\n  const swiper = this;\n  const slides = swiper.slides;\n\n  for (let i = 0; i < slides.length; i += 1) {\n    slides[i].swiperSlideOffset = swiper.isHorizontal() ? slides[i].offsetLeft : slides[i].offsetTop;\n  }\n}","import $ from '../../shared/dom.js';\nexport default function updateSlidesProgress(translate = this && this.translate || 0) {\n  const swiper = this;\n  const params = swiper.params;\n  const {\n    slides,\n    rtlTranslate: rtl,\n    snapGrid\n  } = swiper;\n  if (slides.length === 0) return;\n  if (typeof slides[0].swiperSlideOffset === 'undefined') swiper.updateSlidesOffset();\n  let offsetCenter = -translate;\n  if (rtl) offsetCenter = translate; // Visible Slides\n\n  slides.removeClass(params.slideVisibleClass);\n  swiper.visibleSlidesIndexes = [];\n  swiper.visibleSlides = [];\n\n  for (let i = 0; i < slides.length; i += 1) {\n    const slide = slides[i];\n    let slideOffset = slide.swiperSlideOffset;\n\n    if (params.cssMode && params.centeredSlides) {\n      slideOffset -= slides[0].swiperSlideOffset;\n    }\n\n    const slideProgress = (offsetCenter + (params.centeredSlides ? swiper.minTranslate() : 0) - slideOffset) / (slide.swiperSlideSize + params.spaceBetween);\n    const originalSlideProgress = (offsetCenter - snapGrid[0] + (params.centeredSlides ? swiper.minTranslate() : 0) - slideOffset) / (slide.swiperSlideSize + params.spaceBetween);\n    const slideBefore = -(offsetCenter - slideOffset);\n    const slideAfter = slideBefore + swiper.slidesSizesGrid[i];\n    const isVisible = slideBefore >= 0 && slideBefore < swiper.size - 1 || slideAfter > 1 && slideAfter <= swiper.size || slideBefore <= 0 && slideAfter >= swiper.size;\n\n    if (isVisible) {\n      swiper.visibleSlides.push(slide);\n      swiper.visibleSlidesIndexes.push(i);\n      slides.eq(i).addClass(params.slideVisibleClass);\n    }\n\n    slide.progress = rtl ? -slideProgress : slideProgress;\n    slide.originalProgress = rtl ? -originalSlideProgress : originalSlideProgress;\n  }\n\n  swiper.visibleSlides = $(swiper.visibleSlides);\n}","export default function updateProgress(translate) {\n  const swiper = this;\n\n  if (typeof translate === 'undefined') {\n    const multiplier = swiper.rtlTranslate ? -1 : 1; // eslint-disable-next-line\n\n    translate = swiper && swiper.translate && swiper.translate * multiplier || 0;\n  }\n\n  const params = swiper.params;\n  const translatesDiff = swiper.maxTranslate() - swiper.minTranslate();\n  let {\n    progress,\n    isBeginning,\n    isEnd\n  } = swiper;\n  const wasBeginning = isBeginning;\n  const wasEnd = isEnd;\n\n  if (translatesDiff === 0) {\n    progress = 0;\n    isBeginning = true;\n    isEnd = true;\n  } else {\n    progress = (translate - swiper.minTranslate()) / translatesDiff;\n    isBeginning = progress <= 0;\n    isEnd = progress >= 1;\n  }\n\n  Object.assign(swiper, {\n    progress,\n    isBeginning,\n    isEnd\n  });\n  if (params.watchSlidesProgress || params.centeredSlides && params.autoHeight) swiper.updateSlidesProgress(translate);\n\n  if (isBeginning && !wasBeginning) {\n    swiper.emit('reachBeginning toEdge');\n  }\n\n  if (isEnd && !wasEnd) {\n    swiper.emit('reachEnd toEdge');\n  }\n\n  if (wasBeginning && !isBeginning || wasEnd && !isEnd) {\n    swiper.emit('fromEdge');\n  }\n\n  swiper.emit('progress', progress);\n}","export default function updateSlidesClasses() {\n  const swiper = this;\n  const {\n    slides,\n    params,\n    $wrapperEl,\n    activeIndex,\n    realIndex\n  } = swiper;\n  const isVirtual = swiper.virtual && params.virtual.enabled;\n  slides.removeClass(`${params.slideActiveClass} ${params.slideNextClass} ${params.slidePrevClass} ${params.slideDuplicateActiveClass} ${params.slideDuplicateNextClass} ${params.slideDuplicatePrevClass}`);\n  let activeSlide;\n\n  if (isVirtual) {\n    activeSlide = swiper.$wrapperEl.find(`.${params.slideClass}[data-swiper-slide-index=\"${activeIndex}\"]`);\n  } else {\n    activeSlide = slides.eq(activeIndex);\n  } // Active classes\n\n\n  activeSlide.addClass(params.slideActiveClass);\n\n  if (params.loop) {\n    // Duplicate to all looped slides\n    if (activeSlide.hasClass(params.slideDuplicateClass)) {\n      $wrapperEl.children(`.${params.slideClass}:not(.${params.slideDuplicateClass})[data-swiper-slide-index=\"${realIndex}\"]`).addClass(params.slideDuplicateActiveClass);\n    } else {\n      $wrapperEl.children(`.${params.slideClass}.${params.slideDuplicateClass}[data-swiper-slide-index=\"${realIndex}\"]`).addClass(params.slideDuplicateActiveClass);\n    }\n  } // Next Slide\n\n\n  let nextSlide = activeSlide.nextAll(`.${params.slideClass}`).eq(0).addClass(params.slideNextClass);\n\n  if (params.loop && nextSlide.length === 0) {\n    nextSlide = slides.eq(0);\n    nextSlide.addClass(params.slideNextClass);\n  } // Prev Slide\n\n\n  let prevSlide = activeSlide.prevAll(`.${params.slideClass}`).eq(0).addClass(params.slidePrevClass);\n\n  if (params.loop && prevSlide.length === 0) {\n    prevSlide = slides.eq(-1);\n    prevSlide.addClass(params.slidePrevClass);\n  }\n\n  if (params.loop) {\n    // Duplicate to all looped slides\n    if (nextSlide.hasClass(params.slideDuplicateClass)) {\n      $wrapperEl.children(`.${params.slideClass}:not(.${params.slideDuplicateClass})[data-swiper-slide-index=\"${nextSlide.attr('data-swiper-slide-index')}\"]`).addClass(params.slideDuplicateNextClass);\n    } else {\n      $wrapperEl.children(`.${params.slideClass}.${params.slideDuplicateClass}[data-swiper-slide-index=\"${nextSlide.attr('data-swiper-slide-index')}\"]`).addClass(params.slideDuplicateNextClass);\n    }\n\n    if (prevSlide.hasClass(params.slideDuplicateClass)) {\n      $wrapperEl.children(`.${params.slideClass}:not(.${params.slideDuplicateClass})[data-swiper-slide-index=\"${prevSlide.attr('data-swiper-slide-index')}\"]`).addClass(params.slideDuplicatePrevClass);\n    } else {\n      $wrapperEl.children(`.${params.slideClass}.${params.slideDuplicateClass}[data-swiper-slide-index=\"${prevSlide.attr('data-swiper-slide-index')}\"]`).addClass(params.slideDuplicatePrevClass);\n    }\n  }\n\n  swiper.emitSlidesClasses();\n}","export default function updateActiveIndex(newActiveIndex) {\n  const swiper = this;\n  const translate = swiper.rtlTranslate ? swiper.translate : -swiper.translate;\n  const {\n    slidesGrid,\n    snapGrid,\n    params,\n    activeIndex: previousIndex,\n    realIndex: previousRealIndex,\n    snapIndex: previousSnapIndex\n  } = swiper;\n  let activeIndex = newActiveIndex;\n  let snapIndex;\n\n  if (typeof activeIndex === 'undefined') {\n    for (let i = 0; i < slidesGrid.length; i += 1) {\n      if (typeof slidesGrid[i + 1] !== 'undefined') {\n        if (translate >= slidesGrid[i] && translate < slidesGrid[i + 1] - (slidesGrid[i + 1] - slidesGrid[i]) / 2) {\n          activeIndex = i;\n        } else if (translate >= slidesGrid[i] && translate < slidesGrid[i + 1]) {\n          activeIndex = i + 1;\n        }\n      } else if (translate >= slidesGrid[i]) {\n        activeIndex = i;\n      }\n    } // Normalize slideIndex\n\n\n    if (params.normalizeSlideIndex) {\n      if (activeIndex < 0 || typeof activeIndex === 'undefined') activeIndex = 0;\n    }\n  }\n\n  if (snapGrid.indexOf(translate) >= 0) {\n    snapIndex = snapGrid.indexOf(translate);\n  } else {\n    const skip = Math.min(params.slidesPerGroupSkip, activeIndex);\n    snapIndex = skip + Math.floor((activeIndex - skip) / params.slidesPerGroup);\n  }\n\n  if (snapIndex >= snapGrid.length) snapIndex = snapGrid.length - 1;\n\n  if (activeIndex === previousIndex) {\n    if (snapIndex !== previousSnapIndex) {\n      swiper.snapIndex = snapIndex;\n      swiper.emit('snapIndexChange');\n    }\n\n    return;\n  } // Get real index\n\n\n  const realIndex = parseInt(swiper.slides.eq(activeIndex).attr('data-swiper-slide-index') || activeIndex, 10);\n  Object.assign(swiper, {\n    snapIndex,\n    realIndex,\n    previousIndex,\n    activeIndex\n  });\n  swiper.emit('activeIndexChange');\n  swiper.emit('snapIndexChange');\n\n  if (previousRealIndex !== realIndex) {\n    swiper.emit('realIndexChange');\n  }\n\n  if (swiper.initialized || swiper.params.runCallbacksOnInit) {\n    swiper.emit('slideChange');\n  }\n}","import $ from '../../shared/dom.js';\nexport default function updateClickedSlide(e) {\n  const swiper = this;\n  const params = swiper.params;\n  const slide = $(e).closest(`.${params.slideClass}`)[0];\n  let slideFound = false;\n  let slideIndex;\n\n  if (slide) {\n    for (let i = 0; i < swiper.slides.length; i += 1) {\n      if (swiper.slides[i] === slide) {\n        slideFound = true;\n        slideIndex = i;\n        break;\n      }\n    }\n  }\n\n  if (slide && slideFound) {\n    swiper.clickedSlide = slide;\n\n    if (swiper.virtual && swiper.params.virtual.enabled) {\n      swiper.clickedIndex = parseInt($(slide).attr('data-swiper-slide-index'), 10);\n    } else {\n      swiper.clickedIndex = slideIndex;\n    }\n  } else {\n    swiper.clickedSlide = undefined;\n    swiper.clickedIndex = undefined;\n    return;\n  }\n\n  if (params.slideToClickedSlide && swiper.clickedIndex !== undefined && swiper.clickedIndex !== swiper.activeIndex) {\n    swiper.slideToClickedSlide();\n  }\n}","export default function transitionEmit({\n  swiper,\n  runCallbacks,\n  direction,\n  step\n}) {\n  const {\n    activeIndex,\n    previousIndex\n  } = swiper;\n  let dir = direction;\n\n  if (!dir) {\n    if (activeIndex > previousIndex) dir = 'next';else if (activeIndex < previousIndex) dir = 'prev';else dir = 'reset';\n  }\n\n  swiper.emit(`transition${step}`);\n\n  if (runCallbacks && activeIndex !== previousIndex) {\n    if (dir === 'reset') {\n      swiper.emit(`slideResetTransition${step}`);\n      return;\n    }\n\n    swiper.emit(`slideChangeTransition${step}`);\n\n    if (dir === 'next') {\n      swiper.emit(`slideNextTransition${step}`);\n    } else {\n      swiper.emit(`slidePrevTransition${step}`);\n    }\n  }\n}","import slideTo from './slideTo.js';\nimport slideToLoop from './slideToLoop.js';\nimport slideNext from './slideNext.js';\nimport slidePrev from './slidePrev.js';\nimport slideReset from './slideReset.js';\nimport slideToClosest from './slideToClosest.js';\nimport slideToClickedSlide from './slideToClickedSlide.js';\nexport default {\n  slideTo,\n  slideToLoop,\n  slideNext,\n  slidePrev,\n  slideReset,\n  slideToClosest,\n  slideToClickedSlide\n};","import { animateCSSModeScroll } from '../../shared/utils.js';\nexport default function slideTo(index = 0, speed = this.params.speed, runCallbacks = true, internal, initial) {\n  if (typeof index !== 'number' && typeof index !== 'string') {\n    throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof index}] given.`);\n  }\n\n  if (typeof index === 'string') {\n    /**\n     * The `index` argument converted from `string` to `number`.\n     * @type {number}\n     */\n    const indexAsNumber = parseInt(index, 10);\n    /**\n     * Determines whether the `index` argument is a valid `number`\n     * after being converted from the `string` type.\n     * @type {boolean}\n     */\n\n    const isValidNumber = isFinite(indexAsNumber);\n\n    if (!isValidNumber) {\n      throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${index}] given.`);\n    } // Knowing that the converted `index` is a valid number,\n    // we can update the original argument's value.\n\n\n    index = indexAsNumber;\n  }\n\n  const swiper = this;\n  let slideIndex = index;\n  if (slideIndex < 0) slideIndex = 0;\n  const {\n    params,\n    snapGrid,\n    slidesGrid,\n    previousIndex,\n    activeIndex,\n    rtlTranslate: rtl,\n    wrapperEl,\n    enabled\n  } = swiper;\n\n  if (swiper.animating && params.preventInteractionOnTransition || !enabled && !internal && !initial) {\n    return false;\n  }\n\n  const skip = Math.min(swiper.params.slidesPerGroupSkip, slideIndex);\n  let snapIndex = skip + Math.floor((slideIndex - skip) / swiper.params.slidesPerGroup);\n  if (snapIndex >= snapGrid.length) snapIndex = snapGrid.length - 1;\n\n  if ((activeIndex || params.initialSlide || 0) === (previousIndex || 0) && runCallbacks) {\n    swiper.emit('beforeSlideChangeStart');\n  }\n\n  const translate = -snapGrid[snapIndex]; // Update progress\n\n  swiper.updateProgress(translate); // Normalize slideIndex\n\n  if (params.normalizeSlideIndex) {\n    for (let i = 0; i < slidesGrid.length; i += 1) {\n      const normalizedTranslate = -Math.floor(translate * 100);\n      const normalizedGrid = Math.floor(slidesGrid[i] * 100);\n      const normalizedGridNext = Math.floor(slidesGrid[i + 1] * 100);\n\n      if (typeof slidesGrid[i + 1] !== 'undefined') {\n        if (normalizedTranslate >= normalizedGrid && normalizedTranslate < normalizedGridNext - (normalizedGridNext - normalizedGrid) / 2) {\n          slideIndex = i;\n        } else if (normalizedTranslate >= normalizedGrid && normalizedTranslate < normalizedGridNext) {\n          slideIndex = i + 1;\n        }\n      } else if (normalizedTranslate >= normalizedGrid) {\n        slideIndex = i;\n      }\n    }\n  } // Directions locks\n\n\n  if (swiper.initialized && slideIndex !== activeIndex) {\n    if (!swiper.allowSlideNext && translate < swiper.translate && translate < swiper.minTranslate()) {\n      return false;\n    }\n\n    if (!swiper.allowSlidePrev && translate > swiper.translate && translate > swiper.maxTranslate()) {\n      if ((activeIndex || 0) !== slideIndex) return false;\n    }\n  }\n\n  let direction;\n  if (slideIndex > activeIndex) direction = 'next';else if (slideIndex < activeIndex) direction = 'prev';else direction = 'reset'; // Update Index\n\n  if (rtl && -translate === swiper.translate || !rtl && translate === swiper.translate) {\n    swiper.updateActiveIndex(slideIndex); // Update Height\n\n    if (params.autoHeight) {\n      swiper.updateAutoHeight();\n    }\n\n    swiper.updateSlidesClasses();\n\n    if (params.effect !== 'slide') {\n      swiper.setTranslate(translate);\n    }\n\n    if (direction !== 'reset') {\n      swiper.transitionStart(runCallbacks, direction);\n      swiper.transitionEnd(runCallbacks, direction);\n    }\n\n    return false;\n  }\n\n  if (params.cssMode) {\n    const isH = swiper.isHorizontal();\n    const t = rtl ? translate : -translate;\n\n    if (speed === 0) {\n      const isVirtual = swiper.virtual && swiper.params.virtual.enabled;\n\n      if (isVirtual) {\n        swiper.wrapperEl.style.scrollSnapType = 'none';\n        swiper._immediateVirtual = true;\n      }\n\n      wrapperEl[isH ? 'scrollLeft' : 'scrollTop'] = t;\n\n      if (isVirtual) {\n        requestAnimationFrame(() => {\n          swiper.wrapperEl.style.scrollSnapType = '';\n          swiper._swiperImmediateVirtual = false;\n        });\n      }\n    } else {\n      if (!swiper.support.smoothScroll) {\n        animateCSSModeScroll({\n          swiper,\n          targetPosition: t,\n          side: isH ? 'left' : 'top'\n        });\n        return true;\n      }\n\n      wrapperEl.scrollTo({\n        [isH ? 'left' : 'top']: t,\n        behavior: 'smooth'\n      });\n    }\n\n    return true;\n  }\n\n  swiper.setTransition(speed);\n  swiper.setTranslate(translate);\n  swiper.updateActiveIndex(slideIndex);\n  swiper.updateSlidesClasses();\n  swiper.emit('beforeTransitionStart', speed, internal);\n  swiper.transitionStart(runCallbacks, direction);\n\n  if (speed === 0) {\n    swiper.transitionEnd(runCallbacks, direction);\n  } else if (!swiper.animating) {\n    swiper.animating = true;\n\n    if (!swiper.onSlideToWrapperTransitionEnd) {\n      swiper.onSlideToWrapperTransitionEnd = function transitionEnd(e) {\n        if (!swiper || swiper.destroyed) return;\n        if (e.target !== this) return;\n        swiper.$wrapperEl[0].removeEventListener('transitionend', swiper.onSlideToWrapperTransitionEnd);\n        swiper.$wrapperEl[0].removeEventListener('webkitTransitionEnd', swiper.onSlideToWrapperTransitionEnd);\n        swiper.onSlideToWrapperTransitionEnd = null;\n        delete swiper.onSlideToWrapperTransitionEnd;\n        swiper.transitionEnd(runCallbacks, direction);\n      };\n    }\n\n    swiper.$wrapperEl[0].addEventListener('transitionend', swiper.onSlideToWrapperTransitionEnd);\n    swiper.$wrapperEl[0].addEventListener('webkitTransitionEnd', swiper.onSlideToWrapperTransitionEnd);\n  }\n\n  return true;\n}","export default function slideToLoop(index = 0, speed = this.params.speed, runCallbacks = true, internal) {\n  const swiper = this;\n  let newIndex = index;\n\n  if (swiper.params.loop) {\n    newIndex += swiper.loopedSlides;\n  }\n\n  return swiper.slideTo(newIndex, speed, runCallbacks, internal);\n}","/* eslint no-unused-vars: \"off\" */\nexport default function slideNext(speed = this.params.speed, runCallbacks = true, internal) {\n  const swiper = this;\n  const {\n    animating,\n    enabled,\n    params\n  } = swiper;\n  if (!enabled) return swiper;\n  let perGroup = params.slidesPerGroup;\n\n  if (params.slidesPerView === 'auto' && params.slidesPerGroup === 1 && params.slidesPerGroupAuto) {\n    perGroup = Math.max(swiper.slidesPerViewDynamic('current', true), 1);\n  }\n\n  const increment = swiper.activeIndex < params.slidesPerGroupSkip ? 1 : perGroup;\n\n  if (params.loop) {\n    if (animating && params.loopPreventsSlide) return false;\n    swiper.loopFix(); // eslint-disable-next-line\n\n    swiper._clientLeft = swiper.$wrapperEl[0].clientLeft;\n  }\n\n  if (params.rewind && swiper.isEnd) {\n    return swiper.slideTo(0, speed, runCallbacks, internal);\n  }\n\n  return swiper.slideTo(swiper.activeIndex + increment, speed, runCallbacks, internal);\n}","/* eslint no-unused-vars: \"off\" */\nexport default function slidePrev(speed = this.params.speed, runCallbacks = true, internal) {\n  const swiper = this;\n  const {\n    params,\n    animating,\n    snapGrid,\n    slidesGrid,\n    rtlTranslate,\n    enabled\n  } = swiper;\n  if (!enabled) return swiper;\n\n  if (params.loop) {\n    if (animating && params.loopPreventsSlide) return false;\n    swiper.loopFix(); // eslint-disable-next-line\n\n    swiper._clientLeft = swiper.$wrapperEl[0].clientLeft;\n  }\n\n  const translate = rtlTranslate ? swiper.translate : -swiper.translate;\n\n  function normalize(val) {\n    if (val < 0) return -Math.floor(Math.abs(val));\n    return Math.floor(val);\n  }\n\n  const normalizedTranslate = normalize(translate);\n  const normalizedSnapGrid = snapGrid.map(val => normalize(val));\n  let prevSnap = snapGrid[normalizedSnapGrid.indexOf(normalizedTranslate) - 1];\n\n  if (typeof prevSnap === 'undefined' && params.cssMode) {\n    let prevSnapIndex;\n    snapGrid.forEach((snap, snapIndex) => {\n      if (normalizedTranslate >= snap) {\n        // prevSnap = snap;\n        prevSnapIndex = snapIndex;\n      }\n    });\n\n    if (typeof prevSnapIndex !== 'undefined') {\n      prevSnap = snapGrid[prevSnapIndex > 0 ? prevSnapIndex - 1 : prevSnapIndex];\n    }\n  }\n\n  let prevIndex = 0;\n\n  if (typeof prevSnap !== 'undefined') {\n    prevIndex = slidesGrid.indexOf(prevSnap);\n    if (prevIndex < 0) prevIndex = swiper.activeIndex - 1;\n\n    if (params.slidesPerView === 'auto' && params.slidesPerGroup === 1 && params.slidesPerGroupAuto) {\n      prevIndex = prevIndex - swiper.slidesPerViewDynamic('previous', true) + 1;\n      prevIndex = Math.max(prevIndex, 0);\n    }\n  }\n\n  if (params.rewind && swiper.isBeginning) {\n    return swiper.slideTo(swiper.slides.length - 1, speed, runCallbacks, internal);\n  }\n\n  return swiper.slideTo(prevIndex, speed, runCallbacks, internal);\n}","/* eslint no-unused-vars: \"off\" */\nexport default function slideReset(speed = this.params.speed, runCallbacks = true, internal) {\n  const swiper = this;\n  return swiper.slideTo(swiper.activeIndex, speed, runCallbacks, internal);\n}","/* eslint no-unused-vars: \"off\" */\nexport default function slideToClosest(speed = this.params.speed, runCallbacks = true, internal, threshold = 0.5) {\n  const swiper = this;\n  let index = swiper.activeIndex;\n  const skip = Math.min(swiper.params.slidesPerGroupSkip, index);\n  const snapIndex = skip + Math.floor((index - skip) / swiper.params.slidesPerGroup);\n  const translate = swiper.rtlTranslate ? swiper.translate : -swiper.translate;\n\n  if (translate >= swiper.snapGrid[snapIndex]) {\n    // The current translate is on or after the current snap index, so the choice\n    // is between the current index and the one after it.\n    const currentSnap = swiper.snapGrid[snapIndex];\n    const nextSnap = swiper.snapGrid[snapIndex + 1];\n\n    if (translate - currentSnap > (nextSnap - currentSnap) * threshold) {\n      index += swiper.params.slidesPerGroup;\n    }\n  } else {\n    // The current translate is before the current snap index, so the choice\n    // is between the current index and the one before it.\n    const prevSnap = swiper.snapGrid[snapIndex - 1];\n    const currentSnap = swiper.snapGrid[snapIndex];\n\n    if (translate - prevSnap <= (currentSnap - prevSnap) * threshold) {\n      index -= swiper.params.slidesPerGroup;\n    }\n  }\n\n  index = Math.max(index, 0);\n  index = Math.min(index, swiper.slidesGrid.length - 1);\n  return swiper.slideTo(index, speed, runCallbacks, internal);\n}","import $ from '../../shared/dom.js';\nimport { nextTick } from '../../shared/utils.js';\nexport default function slideToClickedSlide() {\n  const swiper = this;\n  const {\n    params,\n    $wrapperEl\n  } = swiper;\n  const slidesPerView = params.slidesPerView === 'auto' ? swiper.slidesPerViewDynamic() : params.slidesPerView;\n  let slideToIndex = swiper.clickedIndex;\n  let realIndex;\n\n  if (params.loop) {\n    if (swiper.animating) return;\n    realIndex = parseInt($(swiper.clickedSlide).attr('data-swiper-slide-index'), 10);\n\n    if (params.centeredSlides) {\n      if (slideToIndex < swiper.loopedSlides - slidesPerView / 2 || slideToIndex > swiper.slides.length - swiper.loopedSlides + slidesPerView / 2) {\n        swiper.loopFix();\n        slideToIndex = $wrapperEl.children(`.${params.slideClass}[data-swiper-slide-index=\"${realIndex}\"]:not(.${params.slideDuplicateClass})`).eq(0).index();\n        nextTick(() => {\n          swiper.slideTo(slideToIndex);\n        });\n      } else {\n        swiper.slideTo(slideToIndex);\n      }\n    } else if (slideToIndex > swiper.slides.length - slidesPerView) {\n      swiper.loopFix();\n      slideToIndex = $wrapperEl.children(`.${params.slideClass}[data-swiper-slide-index=\"${realIndex}\"]:not(.${params.slideDuplicateClass})`).eq(0).index();\n      nextTick(() => {\n        swiper.slideTo(slideToIndex);\n      });\n    } else {\n      swiper.slideTo(slideToIndex);\n    }\n  } else {\n    swiper.slideTo(slideToIndex);\n  }\n}","import loopCreate from './loopCreate.js';\nimport loopFix from './loopFix.js';\nimport loopDestroy from './loopDestroy.js';\nexport default {\n  loopCreate,\n  loopFix,\n  loopDestroy\n};","import { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom.js';\nexport default function loopCreate() {\n  const swiper = this;\n  const document = getDocument();\n  const {\n    params,\n    $wrapperEl\n  } = swiper; // Remove duplicated slides\n\n  const $selector = $wrapperEl.children().length > 0 ? $($wrapperEl.children()[0].parentNode) : $wrapperEl;\n  $selector.children(`.${params.slideClass}.${params.slideDuplicateClass}`).remove();\n  let slides = $selector.children(`.${params.slideClass}`);\n\n  if (params.loopFillGroupWithBlank) {\n    const blankSlidesNum = params.slidesPerGroup - slides.length % params.slidesPerGroup;\n\n    if (blankSlidesNum !== params.slidesPerGroup) {\n      for (let i = 0; i < blankSlidesNum; i += 1) {\n        const blankNode = $(document.createElement('div')).addClass(`${params.slideClass} ${params.slideBlankClass}`);\n        $selector.append(blankNode);\n      }\n\n      slides = $selector.children(`.${params.slideClass}`);\n    }\n  }\n\n  if (params.slidesPerView === 'auto' && !params.loopedSlides) params.loopedSlides = slides.length;\n  swiper.loopedSlides = Math.ceil(parseFloat(params.loopedSlides || params.slidesPerView, 10));\n  swiper.loopedSlides += params.loopAdditionalSlides;\n\n  if (swiper.loopedSlides > slides.length) {\n    swiper.loopedSlides = slides.length;\n  }\n\n  const prependSlides = [];\n  const appendSlides = [];\n  slides.each((el, index) => {\n    const slide = $(el);\n\n    if (index < swiper.loopedSlides) {\n      appendSlides.push(el);\n    }\n\n    if (index < slides.length && index >= slides.length - swiper.loopedSlides) {\n      prependSlides.push(el);\n    }\n\n    slide.attr('data-swiper-slide-index', index);\n  });\n\n  for (let i = 0; i < appendSlides.length; i += 1) {\n    $selector.append($(appendSlides[i].cloneNode(true)).addClass(params.slideDuplicateClass));\n  }\n\n  for (let i = prependSlides.length - 1; i >= 0; i -= 1) {\n    $selector.prepend($(prependSlides[i].cloneNode(true)).addClass(params.slideDuplicateClass));\n  }\n}","export default function loopFix() {\n  const swiper = this;\n  swiper.emit('beforeLoopFix');\n  const {\n    activeIndex,\n    slides,\n    loopedSlides,\n    allowSlidePrev,\n    allowSlideNext,\n    snapGrid,\n    rtlTranslate: rtl\n  } = swiper;\n  let newIndex;\n  swiper.allowSlidePrev = true;\n  swiper.allowSlideNext = true;\n  const snapTranslate = -snapGrid[activeIndex];\n  const diff = snapTranslate - swiper.getTranslate(); // Fix For Negative Oversliding\n\n  if (activeIndex < loopedSlides) {\n    newIndex = slides.length - loopedSlides * 3 + activeIndex;\n    newIndex += loopedSlides;\n    const slideChanged = swiper.slideTo(newIndex, 0, false, true);\n\n    if (slideChanged && diff !== 0) {\n      swiper.setTranslate((rtl ? -swiper.translate : swiper.translate) - diff);\n    }\n  } else if (activeIndex >= slides.length - loopedSlides) {\n    // Fix For Positive Oversliding\n    newIndex = -slides.length + activeIndex + loopedSlides;\n    newIndex += loopedSlides;\n    const slideChanged = swiper.slideTo(newIndex, 0, false, true);\n\n    if (slideChanged && diff !== 0) {\n      swiper.setTranslate((rtl ? -swiper.translate : swiper.translate) - diff);\n    }\n  }\n\n  swiper.allowSlidePrev = allowSlidePrev;\n  swiper.allowSlideNext = allowSlideNext;\n  swiper.emit('loopFix');\n}","export default function loopDestroy() {\n  const swiper = this;\n  const {\n    $wrapperEl,\n    params,\n    slides\n  } = swiper;\n  $wrapperEl.children(`.${params.slideClass}.${params.slideDuplicateClass},.${params.slideClass}.${params.slideBlankClass}`).remove();\n  slides.removeAttr('data-swiper-slide-index');\n}","import { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom.js';\nimport { now } from '../../shared/utils.js'; // Modified from https://stackoverflow.com/questions/54520554/custom-element-getrootnode-closest-function-crossing-multiple-parent-shadowd\n\nfunction closestElement(selector, base = this) {\n  function __closestFrom(el) {\n    if (!el || el === getDocument() || el === getWindow()) return null;\n    if (el.assignedSlot) el = el.assignedSlot;\n    const found = el.closest(selector);\n    return found || __closestFrom(el.getRootNode().host);\n  }\n\n  return __closestFrom(base);\n}\n\nexport default function onTouchStart(event) {\n  const swiper = this;\n  const document = getDocument();\n  const window = getWindow();\n  const data = swiper.touchEventsData;\n  const {\n    params,\n    touches,\n    enabled\n  } = swiper;\n  if (!enabled) return;\n\n  if (swiper.animating && params.preventInteractionOnTransition) {\n    return;\n  }\n\n  if (!swiper.animating && params.cssMode && params.loop) {\n    swiper.loopFix();\n  }\n\n  let e = event;\n  if (e.originalEvent) e = e.originalEvent;\n  let $targetEl = $(e.target);\n\n  if (params.touchEventsTarget === 'wrapper') {\n    if (!$targetEl.closest(swiper.wrapperEl).length) return;\n  }\n\n  data.isTouchEvent = e.type === 'touchstart';\n  if (!data.isTouchEvent && 'which' in e && e.which === 3) return;\n  if (!data.isTouchEvent && 'button' in e && e.button > 0) return;\n  if (data.isTouched && data.isMoved) return; // change target el for shadow root component\n\n  const swipingClassHasValue = !!params.noSwipingClass && params.noSwipingClass !== '';\n\n  if (swipingClassHasValue && e.target && e.target.shadowRoot && event.path && event.path[0]) {\n    $targetEl = $(event.path[0]);\n  }\n\n  const noSwipingSelector = params.noSwipingSelector ? params.noSwipingSelector : `.${params.noSwipingClass}`;\n  const isTargetShadow = !!(e.target && e.target.shadowRoot); // use closestElement for shadow root element to get the actual closest for nested shadow root element\n\n  if (params.noSwiping && (isTargetShadow ? closestElement(noSwipingSelector, e.target) : $targetEl.closest(noSwipingSelector)[0])) {\n    swiper.allowClick = true;\n    return;\n  }\n\n  if (params.swipeHandler) {\n    if (!$targetEl.closest(params.swipeHandler)[0]) return;\n  }\n\n  touches.currentX = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n  touches.currentY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n  const startX = touches.currentX;\n  const startY = touches.currentY; // Do NOT start if iOS edge swipe is detected. Otherwise iOS app cannot swipe-to-go-back anymore\n\n  const edgeSwipeDetection = params.edgeSwipeDetection || params.iOSEdgeSwipeDetection;\n  const edgeSwipeThreshold = params.edgeSwipeThreshold || params.iOSEdgeSwipeThreshold;\n\n  if (edgeSwipeDetection && (startX <= edgeSwipeThreshold || startX >= window.innerWidth - edgeSwipeThreshold)) {\n    if (edgeSwipeDetection === 'prevent') {\n      event.preventDefault();\n    } else {\n      return;\n    }\n  }\n\n  Object.assign(data, {\n    isTouched: true,\n    isMoved: false,\n    allowTouchCallbacks: true,\n    isScrolling: undefined,\n    startMoving: undefined\n  });\n  touches.startX = startX;\n  touches.startY = startY;\n  data.touchStartTime = now();\n  swiper.allowClick = true;\n  swiper.updateSize();\n  swiper.swipeDirection = undefined;\n  if (params.threshold > 0) data.allowThresholdMove = false;\n\n  if (e.type !== 'touchstart') {\n    let preventDefault = true;\n    if ($targetEl.is(data.focusableElements)) preventDefault = false;\n\n    if (document.activeElement && $(document.activeElement).is(data.focusableElements) && document.activeElement !== $targetEl[0]) {\n      document.activeElement.blur();\n    }\n\n    const shouldPreventDefault = preventDefault && swiper.allowTouchMove && params.touchStartPreventDefault;\n\n    if ((params.touchStartForcePreventDefault || shouldPreventDefault) && !$targetEl[0].isContentEditable) {\n      e.preventDefault();\n    }\n  }\n\n  swiper.emit('touchStart', e);\n}","import { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom.js';\nimport { now } from '../../shared/utils.js';\nexport default function onTouchMove(event) {\n  const document = getDocument();\n  const swiper = this;\n  const data = swiper.touchEventsData;\n  const {\n    params,\n    touches,\n    rtlTranslate: rtl,\n    enabled\n  } = swiper;\n  if (!enabled) return;\n  let e = event;\n  if (e.originalEvent) e = e.originalEvent;\n\n  if (!data.isTouched) {\n    if (data.startMoving && data.isScrolling) {\n      swiper.emit('touchMoveOpposite', e);\n    }\n\n    return;\n  }\n\n  if (data.isTouchEvent && e.type !== 'touchmove') return;\n  const targetTouch = e.type === 'touchmove' && e.targetTouches && (e.targetTouches[0] || e.changedTouches[0]);\n  const pageX = e.type === 'touchmove' ? targetTouch.pageX : e.pageX;\n  const pageY = e.type === 'touchmove' ? targetTouch.pageY : e.pageY;\n\n  if (e.preventedByNestedSwiper) {\n    touches.startX = pageX;\n    touches.startY = pageY;\n    return;\n  }\n\n  if (!swiper.allowTouchMove) {\n    // isMoved = true;\n    swiper.allowClick = false;\n\n    if (data.isTouched) {\n      Object.assign(touches, {\n        startX: pageX,\n        startY: pageY,\n        currentX: pageX,\n        currentY: pageY\n      });\n      data.touchStartTime = now();\n    }\n\n    return;\n  }\n\n  if (data.isTouchEvent && params.touchReleaseOnEdges && !params.loop) {\n    if (swiper.isVertical()) {\n      // Vertical\n      if (pageY < touches.startY && swiper.translate <= swiper.maxTranslate() || pageY > touches.startY && swiper.translate >= swiper.minTranslate()) {\n        data.isTouched = false;\n        data.isMoved = false;\n        return;\n      }\n    } else if (pageX < touches.startX && swiper.translate <= swiper.maxTranslate() || pageX > touches.startX && swiper.translate >= swiper.minTranslate()) {\n      return;\n    }\n  }\n\n  if (data.isTouchEvent && document.activeElement) {\n    if (e.target === document.activeElement && $(e.target).is(data.focusableElements)) {\n      data.isMoved = true;\n      swiper.allowClick = false;\n      return;\n    }\n  }\n\n  if (data.allowTouchCallbacks) {\n    swiper.emit('touchMove', e);\n  }\n\n  if (e.targetTouches && e.targetTouches.length > 1) return;\n  touches.currentX = pageX;\n  touches.currentY = pageY;\n  const diffX = touches.currentX - touches.startX;\n  const diffY = touches.currentY - touches.startY;\n  if (swiper.params.threshold && Math.sqrt(diffX ** 2 + diffY ** 2) < swiper.params.threshold) return;\n\n  if (typeof data.isScrolling === 'undefined') {\n    let touchAngle;\n\n    if (swiper.isHorizontal() && touches.currentY === touches.startY || swiper.isVertical() && touches.currentX === touches.startX) {\n      data.isScrolling = false;\n    } else {\n      // eslint-disable-next-line\n      if (diffX * diffX + diffY * diffY >= 25) {\n        touchAngle = Math.atan2(Math.abs(diffY), Math.abs(diffX)) * 180 / Math.PI;\n        data.isScrolling = swiper.isHorizontal() ? touchAngle > params.touchAngle : 90 - touchAngle > params.touchAngle;\n      }\n    }\n  }\n\n  if (data.isScrolling) {\n    swiper.emit('touchMoveOpposite', e);\n  }\n\n  if (typeof data.startMoving === 'undefined') {\n    if (touches.currentX !== touches.startX || touches.currentY !== touches.startY) {\n      data.startMoving = true;\n    }\n  }\n\n  if (data.isScrolling) {\n    data.isTouched = false;\n    return;\n  }\n\n  if (!data.startMoving) {\n    return;\n  }\n\n  swiper.allowClick = false;\n\n  if (!params.cssMode && e.cancelable) {\n    e.preventDefault();\n  }\n\n  if (params.touchMoveStopPropagation && !params.nested) {\n    e.stopPropagation();\n  }\n\n  if (!data.isMoved) {\n    if (params.loop && !params.cssMode) {\n      swiper.loopFix();\n    }\n\n    data.startTranslate = swiper.getTranslate();\n    swiper.setTransition(0);\n\n    if (swiper.animating) {\n      swiper.$wrapperEl.trigger('webkitTransitionEnd transitionend');\n    }\n\n    data.allowMomentumBounce = false; // Grab Cursor\n\n    if (params.grabCursor && (swiper.allowSlideNext === true || swiper.allowSlidePrev === true)) {\n      swiper.setGrabCursor(true);\n    }\n\n    swiper.emit('sliderFirstMove', e);\n  }\n\n  swiper.emit('sliderMove', e);\n  data.isMoved = true;\n  let diff = swiper.isHorizontal() ? diffX : diffY;\n  touches.diff = diff;\n  diff *= params.touchRatio;\n  if (rtl) diff = -diff;\n  swiper.swipeDirection = diff > 0 ? 'prev' : 'next';\n  data.currentTranslate = diff + data.startTranslate;\n  let disableParentSwiper = true;\n  let resistanceRatio = params.resistanceRatio;\n\n  if (params.touchReleaseOnEdges) {\n    resistanceRatio = 0;\n  }\n\n  if (diff > 0 && data.currentTranslate > swiper.minTranslate()) {\n    disableParentSwiper = false;\n    if (params.resistance) data.currentTranslate = swiper.minTranslate() - 1 + (-swiper.minTranslate() + data.startTranslate + diff) ** resistanceRatio;\n  } else if (diff < 0 && data.currentTranslate < swiper.maxTranslate()) {\n    disableParentSwiper = false;\n    if (params.resistance) data.currentTranslate = swiper.maxTranslate() + 1 - (swiper.maxTranslate() - data.startTranslate - diff) ** resistanceRatio;\n  }\n\n  if (disableParentSwiper) {\n    e.preventedByNestedSwiper = true;\n  } // Directions locks\n\n\n  if (!swiper.allowSlideNext && swiper.swipeDirection === 'next' && data.currentTranslate < data.startTranslate) {\n    data.currentTranslate = data.startTranslate;\n  }\n\n  if (!swiper.allowSlidePrev && swiper.swipeDirection === 'prev' && data.currentTranslate > data.startTranslate) {\n    data.currentTranslate = data.startTranslate;\n  }\n\n  if (!swiper.allowSlidePrev && !swiper.allowSlideNext) {\n    data.currentTranslate = data.startTranslate;\n  } // Threshold\n\n\n  if (params.threshold > 0) {\n    if (Math.abs(diff) > params.threshold || data.allowThresholdMove) {\n      if (!data.allowThresholdMove) {\n        data.allowThresholdMove = true;\n        touches.startX = touches.currentX;\n        touches.startY = touches.currentY;\n        data.currentTranslate = data.startTranslate;\n        touches.diff = swiper.isHorizontal() ? touches.currentX - touches.startX : touches.currentY - touches.startY;\n        return;\n      }\n    } else {\n      data.currentTranslate = data.startTranslate;\n      return;\n    }\n  }\n\n  if (!params.followFinger || params.cssMode) return; // Update active index in free mode\n\n  if (params.freeMode && params.freeMode.enabled && swiper.freeMode || params.watchSlidesProgress) {\n    swiper.updateActiveIndex();\n    swiper.updateSlidesClasses();\n  }\n\n  if (swiper.params.freeMode && params.freeMode.enabled && swiper.freeMode) {\n    swiper.freeMode.onTouchMove();\n  } // Update progress\n\n\n  swiper.updateProgress(data.currentTranslate); // Update translate\n\n  swiper.setTranslate(data.currentTranslate);\n}","import { now, nextTick } from '../../shared/utils.js';\nexport default function onTouchEnd(event) {\n  const swiper = this;\n  const data = swiper.touchEventsData;\n  const {\n    params,\n    touches,\n    rtlTranslate: rtl,\n    slidesGrid,\n    enabled\n  } = swiper;\n  if (!enabled) return;\n  let e = event;\n  if (e.originalEvent) e = e.originalEvent;\n\n  if (data.allowTouchCallbacks) {\n    swiper.emit('touchEnd', e);\n  }\n\n  data.allowTouchCallbacks = false;\n\n  if (!data.isTouched) {\n    if (data.isMoved && params.grabCursor) {\n      swiper.setGrabCursor(false);\n    }\n\n    data.isMoved = false;\n    data.startMoving = false;\n    return;\n  } // Return Grab Cursor\n\n\n  if (params.grabCursor && data.isMoved && data.isTouched && (swiper.allowSlideNext === true || swiper.allowSlidePrev === true)) {\n    swiper.setGrabCursor(false);\n  } // Time diff\n\n\n  const touchEndTime = now();\n  const timeDiff = touchEndTime - data.touchStartTime; // Tap, doubleTap, Click\n\n  if (swiper.allowClick) {\n    const pathTree = e.path || e.composedPath && e.composedPath();\n    swiper.updateClickedSlide(pathTree && pathTree[0] || e.target);\n    swiper.emit('tap click', e);\n\n    if (timeDiff < 300 && touchEndTime - data.lastClickTime < 300) {\n      swiper.emit('doubleTap doubleClick', e);\n    }\n  }\n\n  data.lastClickTime = now();\n  nextTick(() => {\n    if (!swiper.destroyed) swiper.allowClick = true;\n  });\n\n  if (!data.isTouched || !data.isMoved || !swiper.swipeDirection || touches.diff === 0 || data.currentTranslate === data.startTranslate) {\n    data.isTouched = false;\n    data.isMoved = false;\n    data.startMoving = false;\n    return;\n  }\n\n  data.isTouched = false;\n  data.isMoved = false;\n  data.startMoving = false;\n  let currentPos;\n\n  if (params.followFinger) {\n    currentPos = rtl ? swiper.translate : -swiper.translate;\n  } else {\n    currentPos = -data.currentTranslate;\n  }\n\n  if (params.cssMode) {\n    return;\n  }\n\n  if (swiper.params.freeMode && params.freeMode.enabled) {\n    swiper.freeMode.onTouchEnd({\n      currentPos\n    });\n    return;\n  } // Find current slide\n\n\n  let stopIndex = 0;\n  let groupSize = swiper.slidesSizesGrid[0];\n\n  for (let i = 0; i < slidesGrid.length; i += i < params.slidesPerGroupSkip ? 1 : params.slidesPerGroup) {\n    const increment = i < params.slidesPerGroupSkip - 1 ? 1 : params.slidesPerGroup;\n\n    if (typeof slidesGrid[i + increment] !== 'undefined') {\n      if (currentPos >= slidesGrid[i] && currentPos < slidesGrid[i + increment]) {\n        stopIndex = i;\n        groupSize = slidesGrid[i + increment] - slidesGrid[i];\n      }\n    } else if (currentPos >= slidesGrid[i]) {\n      stopIndex = i;\n      groupSize = slidesGrid[slidesGrid.length - 1] - slidesGrid[slidesGrid.length - 2];\n    }\n  } // Find current slide size\n\n\n  const ratio = (currentPos - slidesGrid[stopIndex]) / groupSize;\n  const increment = stopIndex < params.slidesPerGroupSkip - 1 ? 1 : params.slidesPerGroup;\n\n  if (timeDiff > params.longSwipesMs) {\n    // Long touches\n    if (!params.longSwipes) {\n      swiper.slideTo(swiper.activeIndex);\n      return;\n    }\n\n    if (swiper.swipeDirection === 'next') {\n      if (ratio >= params.longSwipesRatio) swiper.slideTo(stopIndex + increment);else swiper.slideTo(stopIndex);\n    }\n\n    if (swiper.swipeDirection === 'prev') {\n      if (ratio > 1 - params.longSwipesRatio) swiper.slideTo(stopIndex + increment);else swiper.slideTo(stopIndex);\n    }\n  } else {\n    // Short swipes\n    if (!params.shortSwipes) {\n      swiper.slideTo(swiper.activeIndex);\n      return;\n    }\n\n    const isNavButtonTarget = swiper.navigation && (e.target === swiper.navigation.nextEl || e.target === swiper.navigation.prevEl);\n\n    if (!isNavButtonTarget) {\n      if (swiper.swipeDirection === 'next') {\n        swiper.slideTo(stopIndex + increment);\n      }\n\n      if (swiper.swipeDirection === 'prev') {\n        swiper.slideTo(stopIndex);\n      }\n    } else if (e.target === swiper.navigation.nextEl) {\n      swiper.slideTo(stopIndex + increment);\n    } else {\n      swiper.slideTo(stopIndex);\n    }\n  }\n}","export default function onResize() {\n  const swiper = this;\n  const {\n    params,\n    el\n  } = swiper;\n  if (el && el.offsetWidth === 0) return; // Breakpoints\n\n  if (params.breakpoints) {\n    swiper.setBreakpoint();\n  } // Save locks\n\n\n  const {\n    allowSlideNext,\n    allowSlidePrev,\n    snapGrid\n  } = swiper; // Disable locks on resize\n\n  swiper.allowSlideNext = true;\n  swiper.allowSlidePrev = true;\n  swiper.updateSize();\n  swiper.updateSlides();\n  swiper.updateSlidesClasses();\n\n  if ((params.slidesPerView === 'auto' || params.slidesPerView > 1) && swiper.isEnd && !swiper.isBeginning && !swiper.params.centeredSlides) {\n    swiper.slideTo(swiper.slides.length - 1, 0, false, true);\n  } else {\n    swiper.slideTo(swiper.activeIndex, 0, false, true);\n  }\n\n  if (swiper.autoplay && swiper.autoplay.running && swiper.autoplay.paused) {\n    swiper.autoplay.run();\n  } // Return locks after resize\n\n\n  swiper.allowSlidePrev = allowSlidePrev;\n  swiper.allowSlideNext = allowSlideNext;\n\n  if (swiper.params.watchOverflow && snapGrid !== swiper.snapGrid) {\n    swiper.checkOverflow();\n  }\n}","export default function onClick(e) {\n  const swiper = this;\n  if (!swiper.enabled) return;\n\n  if (!swiper.allowClick) {\n    if (swiper.params.preventClicks) e.preventDefault();\n\n    if (swiper.params.preventClicksPropagation && swiper.animating) {\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n    }\n  }\n}","export default function onScroll() {\n  const swiper = this;\n  const {\n    wrapperEl,\n    rtlTranslate,\n    enabled\n  } = swiper;\n  if (!enabled) return;\n  swiper.previousTranslate = swiper.translate;\n\n  if (swiper.isHorizontal()) {\n    swiper.translate = -wrapperEl.scrollLeft;\n  } else {\n    swiper.translate = -wrapperEl.scrollTop;\n  } // eslint-disable-next-line\n\n\n  if (swiper.translate === -0) swiper.translate = 0;\n  swiper.updateActiveIndex();\n  swiper.updateSlidesClasses();\n  let newProgress;\n  const translatesDiff = swiper.maxTranslate() - swiper.minTranslate();\n\n  if (translatesDiff === 0) {\n    newProgress = 0;\n  } else {\n    newProgress = (swiper.translate - swiper.minTranslate()) / translatesDiff;\n  }\n\n  if (newProgress !== swiper.progress) {\n    swiper.updateProgress(rtlTranslate ? -swiper.translate : swiper.translate);\n  }\n\n  swiper.emit('setTranslate', swiper.translate, false);\n}","import { getDocument } from 'ssr-window';\nimport onTouchStart from './onTouchStart.js';\nimport onTouchMove from './onTouchMove.js';\nimport onTouchEnd from './onTouchEnd.js';\nimport onResize from './onResize.js';\nimport onClick from './onClick.js';\nimport onScroll from './onScroll.js';\nlet dummyEventAttached = false;\n\nfunction dummyEventListener() {}\n\nconst events = (swiper, method) => {\n  const document = getDocument();\n  const {\n    params,\n    touchEvents,\n    el,\n    wrapperEl,\n    device,\n    support\n  } = swiper;\n  const capture = !!params.nested;\n  const domMethod = method === 'on' ? 'addEventListener' : 'removeEventListener';\n  const swiperMethod = method; // Touch Events\n\n  if (!support.touch) {\n    el[domMethod](touchEvents.start, swiper.onTouchStart, false);\n    document[domMethod](touchEvents.move, swiper.onTouchMove, capture);\n    document[domMethod](touchEvents.end, swiper.onTouchEnd, false);\n  } else {\n    const passiveListener = touchEvents.start === 'touchstart' && support.passiveListener && params.passiveListeners ? {\n      passive: true,\n      capture: false\n    } : false;\n    el[domMethod](touchEvents.start, swiper.onTouchStart, passiveListener);\n    el[domMethod](touchEvents.move, swiper.onTouchMove, support.passiveListener ? {\n      passive: false,\n      capture\n    } : capture);\n    el[domMethod](touchEvents.end, swiper.onTouchEnd, passiveListener);\n\n    if (touchEvents.cancel) {\n      el[domMethod](touchEvents.cancel, swiper.onTouchEnd, passiveListener);\n    }\n  } // Prevent Links Clicks\n\n\n  if (params.preventClicks || params.preventClicksPropagation) {\n    el[domMethod]('click', swiper.onClick, true);\n  }\n\n  if (params.cssMode) {\n    wrapperEl[domMethod]('scroll', swiper.onScroll);\n  } // Resize handler\n\n\n  if (params.updateOnWindowResize) {\n    swiper[swiperMethod](device.ios || device.android ? 'resize orientationchange observerUpdate' : 'resize observerUpdate', onResize, true);\n  } else {\n    swiper[swiperMethod]('observerUpdate', onResize, true);\n  }\n};\n\nfunction attachEvents() {\n  const swiper = this;\n  const document = getDocument();\n  const {\n    params,\n    support\n  } = swiper;\n  swiper.onTouchStart = onTouchStart.bind(swiper);\n  swiper.onTouchMove = onTouchMove.bind(swiper);\n  swiper.onTouchEnd = onTouchEnd.bind(swiper);\n\n  if (params.cssMode) {\n    swiper.onScroll = onScroll.bind(swiper);\n  }\n\n  swiper.onClick = onClick.bind(swiper);\n\n  if (support.touch && !dummyEventAttached) {\n    document.addEventListener('touchstart', dummyEventListener);\n    dummyEventAttached = true;\n  }\n\n  events(swiper, 'on');\n}\n\nfunction detachEvents() {\n  const swiper = this;\n  events(swiper, 'off');\n}\n\nexport default {\n  attachEvents,\n  detachEvents\n};","import { extend } from '../../shared/utils.js';\n\nconst isGridEnabled = (swiper, params) => {\n  return swiper.grid && params.grid && params.grid.rows > 1;\n};\n\nexport default function setBreakpoint() {\n  const swiper = this;\n  const {\n    activeIndex,\n    initialized,\n    loopedSlides = 0,\n    params,\n    $el\n  } = swiper;\n  const breakpoints = params.breakpoints;\n  if (!breakpoints || breakpoints && Object.keys(breakpoints).length === 0) return; // Get breakpoint for window width and update parameters\n\n  const breakpoint = swiper.getBreakpoint(breakpoints, swiper.params.breakpointsBase, swiper.el);\n  if (!breakpoint || swiper.currentBreakpoint === breakpoint) return;\n  const breakpointOnlyParams = breakpoint in breakpoints ? breakpoints[breakpoint] : undefined;\n  const breakpointParams = breakpointOnlyParams || swiper.originalParams;\n  const wasMultiRow = isGridEnabled(swiper, params);\n  const isMultiRow = isGridEnabled(swiper, breakpointParams);\n  const wasEnabled = params.enabled;\n\n  if (wasMultiRow && !isMultiRow) {\n    $el.removeClass(`${params.containerModifierClass}grid ${params.containerModifierClass}grid-column`);\n    swiper.emitContainerClasses();\n  } else if (!wasMultiRow && isMultiRow) {\n    $el.addClass(`${params.containerModifierClass}grid`);\n\n    if (breakpointParams.grid.fill && breakpointParams.grid.fill === 'column' || !breakpointParams.grid.fill && params.grid.fill === 'column') {\n      $el.addClass(`${params.containerModifierClass}grid-column`);\n    }\n\n    swiper.emitContainerClasses();\n  }\n\n  const directionChanged = breakpointParams.direction && breakpointParams.direction !== params.direction;\n  const needsReLoop = params.loop && (breakpointParams.slidesPerView !== params.slidesPerView || directionChanged);\n\n  if (directionChanged && initialized) {\n    swiper.changeDirection();\n  }\n\n  extend(swiper.params, breakpointParams);\n  const isEnabled = swiper.params.enabled;\n  Object.assign(swiper, {\n    allowTouchMove: swiper.params.allowTouchMove,\n    allowSlideNext: swiper.params.allowSlideNext,\n    allowSlidePrev: swiper.params.allowSlidePrev\n  });\n\n  if (wasEnabled && !isEnabled) {\n    swiper.disable();\n  } else if (!wasEnabled && isEnabled) {\n    swiper.enable();\n  }\n\n  swiper.currentBreakpoint = breakpoint;\n  swiper.emit('_beforeBreakpoint', breakpointParams);\n\n  if (needsReLoop && initialized) {\n    swiper.loopDestroy();\n    swiper.loopCreate();\n    swiper.updateSlides();\n    swiper.slideTo(activeIndex - loopedSlides + swiper.loopedSlides, 0, false);\n  }\n\n  swiper.emit('breakpoint', breakpointParams);\n}","import addClasses from './addClasses.js';\nimport removeClasses from './removeClasses.js';\nexport default {\n  addClasses,\n  removeClasses\n};","function prepareClasses(entries, prefix) {\n  const resultClasses = [];\n  entries.forEach(item => {\n    if (typeof item === 'object') {\n      Object.keys(item).forEach(classNames => {\n        if (item[classNames]) {\n          resultClasses.push(prefix + classNames);\n        }\n      });\n    } else if (typeof item === 'string') {\n      resultClasses.push(prefix + item);\n    }\n  });\n  return resultClasses;\n}\n\nexport default function addClasses() {\n  const swiper = this;\n  const {\n    classNames,\n    params,\n    rtl,\n    $el,\n    device,\n    support\n  } = swiper; // prettier-ignore\n\n  const suffixes = prepareClasses(['initialized', params.direction, {\n    'pointer-events': !support.touch\n  }, {\n    'free-mode': swiper.params.freeMode && params.freeMode.enabled\n  }, {\n    'autoheight': params.autoHeight\n  }, {\n    'rtl': rtl\n  }, {\n    'grid': params.grid && params.grid.rows > 1\n  }, {\n    'grid-column': params.grid && params.grid.rows > 1 && params.grid.fill === 'column'\n  }, {\n    'android': device.android\n  }, {\n    'ios': device.ios\n  }, {\n    'css-mode': params.cssMode\n  }, {\n    'centered': params.cssMode && params.centeredSlides\n  }], params.containerModifierClass);\n  classNames.push(...suffixes);\n  $el.addClass([...classNames].join(' '));\n  swiper.emitContainerClasses();\n}","export default function removeClasses() {\n  const swiper = this;\n  const {\n    $el,\n    classNames\n  } = swiper;\n  $el.removeClass(classNames.join(' '));\n  swiper.emitContainerClasses();\n}","export default {\n  init: true,\n  direction: 'horizontal',\n  touchEventsTarget: 'wrapper',\n  initialSlide: 0,\n  speed: 300,\n  cssMode: false,\n  updateOnWindowResize: true,\n  resizeObserver: true,\n  nested: false,\n  createElements: false,\n  enabled: true,\n  focusableElements: 'input, select, option, textarea, button, video, label',\n  // Overrides\n  width: null,\n  height: null,\n  //\n  preventInteractionOnTransition: false,\n  // ssr\n  userAgent: null,\n  url: null,\n  // To support iOS's swipe-to-go-back gesture (when being used in-app).\n  edgeSwipeDetection: false,\n  edgeSwipeThreshold: 20,\n  // Autoheight\n  autoHeight: false,\n  // Set wrapper width\n  setWrapperSize: false,\n  // Virtual Translate\n  virtualTranslate: false,\n  // Effects\n  effect: 'slide',\n  // 'slide' or 'fade' or 'cube' or 'coverflow' or 'flip'\n  // Breakpoints\n  breakpoints: undefined,\n  breakpointsBase: 'window',\n  // Slides grid\n  spaceBetween: 0,\n  slidesPerView: 1,\n  slidesPerGroup: 1,\n  slidesPerGroupSkip: 0,\n  slidesPerGroupAuto: false,\n  centeredSlides: false,\n  centeredSlidesBounds: false,\n  slidesOffsetBefore: 0,\n  // in px\n  slidesOffsetAfter: 0,\n  // in px\n  normalizeSlideIndex: true,\n  centerInsufficientSlides: false,\n  // Disable swiper and hide navigation when container not overflow\n  watchOverflow: true,\n  // Round length\n  roundLengths: false,\n  // Touches\n  touchRatio: 1,\n  touchAngle: 45,\n  simulateTouch: true,\n  shortSwipes: true,\n  longSwipes: true,\n  longSwipesRatio: 0.5,\n  longSwipesMs: 300,\n  followFinger: true,\n  allowTouchMove: true,\n  threshold: 0,\n  touchMoveStopPropagation: false,\n  touchStartPreventDefault: true,\n  touchStartForcePreventDefault: false,\n  touchReleaseOnEdges: false,\n  // Unique Navigation Elements\n  uniqueNavElements: true,\n  // Resistance\n  resistance: true,\n  resistanceRatio: 0.85,\n  // Progress\n  watchSlidesProgress: false,\n  // Cursor\n  grabCursor: false,\n  // Clicks\n  preventClicks: true,\n  preventClicksPropagation: true,\n  slideToClickedSlide: false,\n  // Images\n  preloadImages: true,\n  updateOnImagesReady: true,\n  // loop\n  loop: false,\n  loopAdditionalSlides: 0,\n  loopedSlides: null,\n  loopFillGroupWithBlank: false,\n  loopPreventsSlide: true,\n  // rewind\n  rewind: false,\n  // Swiping/no swiping\n  allowSlidePrev: true,\n  allowSlideNext: true,\n  swipeHandler: null,\n  // '.swipe-handler',\n  noSwiping: true,\n  noSwipingClass: 'swiper-no-swiping',\n  noSwipingSelector: null,\n  // Passive Listeners\n  passiveListeners: true,\n  // NS\n  containerModifierClass: 'swiper-',\n  // NEW\n  slideClass: 'swiper-slide',\n  slideBlankClass: 'swiper-slide-invisible-blank',\n  slideActiveClass: 'swiper-slide-active',\n  slideDuplicateActiveClass: 'swiper-slide-duplicate-active',\n  slideVisibleClass: 'swiper-slide-visible',\n  slideDuplicateClass: 'swiper-slide-duplicate',\n  slideNextClass: 'swiper-slide-next',\n  slideDuplicateNextClass: 'swiper-slide-duplicate-next',\n  slidePrevClass: 'swiper-slide-prev',\n  slideDuplicatePrevClass: 'swiper-slide-duplicate-prev',\n  wrapperClass: 'swiper-wrapper',\n  // Callbacks\n  runCallbacksOnInit: true,\n  // Internals\n  _emitClasses: false\n};","import { extend } from '../shared/utils.js';\nexport default function moduleExtendParams(params, allModulesParams) {\n  return function extendParams(obj = {}) {\n    const moduleParamName = Object.keys(obj)[0];\n    const moduleParams = obj[moduleParamName];\n\n    if (typeof moduleParams !== 'object' || moduleParams === null) {\n      extend(allModulesParams, obj);\n      return;\n    }\n\n    if (['navigation', 'pagination', 'scrollbar'].indexOf(moduleParamName) >= 0 && params[moduleParamName] === true) {\n      params[moduleParamName] = {\n        auto: true\n      };\n    }\n\n    if (!(moduleParamName in params && 'enabled' in moduleParams)) {\n      extend(allModulesParams, obj);\n      return;\n    }\n\n    if (params[moduleParamName] === true) {\n      params[moduleParamName] = {\n        enabled: true\n      };\n    }\n\n    if (typeof params[moduleParamName] === 'object' && !('enabled' in params[moduleParamName])) {\n      params[moduleParamName].enabled = true;\n    }\n\n    if (!params[moduleParamName]) params[moduleParamName] = {\n      enabled: false\n    };\n    extend(allModulesParams, obj);\n  };\n}","/* eslint no-param-reassign: \"off\" */\nimport { getDocument } from 'ssr-window';\nimport $ from '../shared/dom.js';\nimport { extend, now, deleteProps } from '../shared/utils.js';\nimport { getSupport } from '../shared/get-support.js';\nimport { getDevice } from '../shared/get-device.js';\nimport { getBrowser } from '../shared/get-browser.js';\nimport Resize from './modules/resize/resize.js';\nimport Observer from './modules/observer/observer.js';\nimport eventsEmitter from './events-emitter.js';\nimport update from './update/index.js';\nimport translate from './translate/index.js';\nimport transition from './transition/index.js';\nimport slide from './slide/index.js';\nimport loop from './loop/index.js';\nimport grabCursor from './grab-cursor/index.js';\nimport events from './events/index.js';\nimport breakpoints from './breakpoints/index.js';\nimport classes from './classes/index.js';\nimport images from './images/index.js';\nimport checkOverflow from './check-overflow/index.js';\nimport defaults from './defaults.js';\nimport moduleExtendParams from './moduleExtendParams.js';\nconst prototypes = {\n  eventsEmitter,\n  update,\n  translate,\n  transition,\n  slide,\n  loop,\n  grabCursor,\n  events,\n  breakpoints,\n  checkOverflow,\n  classes,\n  images\n};\nconst extendedDefaults = {};\n\nclass Swiper {\n  constructor(...args) {\n    let el;\n    let params;\n\n    if (args.length === 1 && args[0].constructor && Object.prototype.toString.call(args[0]).slice(8, -1) === 'Object') {\n      params = args[0];\n    } else {\n      [el, params] = args;\n    }\n\n    if (!params) params = {};\n    params = extend({}, params);\n    if (el && !params.el) params.el = el;\n\n    if (params.el && $(params.el).length > 1) {\n      const swipers = [];\n      $(params.el).each(containerEl => {\n        const newParams = extend({}, params, {\n          el: containerEl\n        });\n        swipers.push(new Swiper(newParams));\n      });\n      return swipers;\n    } // Swiper Instance\n\n\n    const swiper = this;\n    swiper.__swiper__ = true;\n    swiper.support = getSupport();\n    swiper.device = getDevice({\n      userAgent: params.userAgent\n    });\n    swiper.browser = getBrowser();\n    swiper.eventsListeners = {};\n    swiper.eventsAnyListeners = [];\n    swiper.modules = [...swiper.__modules__];\n\n    if (params.modules && Array.isArray(params.modules)) {\n      swiper.modules.push(...params.modules);\n    }\n\n    const allModulesParams = {};\n    swiper.modules.forEach(mod => {\n      mod({\n        swiper,\n        extendParams: moduleExtendParams(params, allModulesParams),\n        on: swiper.on.bind(swiper),\n        once: swiper.once.bind(swiper),\n        off: swiper.off.bind(swiper),\n        emit: swiper.emit.bind(swiper)\n      });\n    }); // Extend defaults with modules params\n\n    const swiperParams = extend({}, defaults, allModulesParams); // Extend defaults with passed params\n\n    swiper.params = extend({}, swiperParams, extendedDefaults, params);\n    swiper.originalParams = extend({}, swiper.params);\n    swiper.passedParams = extend({}, params); // add event listeners\n\n    if (swiper.params && swiper.params.on) {\n      Object.keys(swiper.params.on).forEach(eventName => {\n        swiper.on(eventName, swiper.params.on[eventName]);\n      });\n    }\n\n    if (swiper.params && swiper.params.onAny) {\n      swiper.onAny(swiper.params.onAny);\n    } // Save Dom lib\n\n\n    swiper.$ = $; // Extend Swiper\n\n    Object.assign(swiper, {\n      enabled: swiper.params.enabled,\n      el,\n      // Classes\n      classNames: [],\n      // Slides\n      slides: $(),\n      slidesGrid: [],\n      snapGrid: [],\n      slidesSizesGrid: [],\n\n      // isDirection\n      isHorizontal() {\n        return swiper.params.direction === 'horizontal';\n      },\n\n      isVertical() {\n        return swiper.params.direction === 'vertical';\n      },\n\n      // Indexes\n      activeIndex: 0,\n      realIndex: 0,\n      //\n      isBeginning: true,\n      isEnd: false,\n      // Props\n      translate: 0,\n      previousTranslate: 0,\n      progress: 0,\n      velocity: 0,\n      animating: false,\n      // Locks\n      allowSlideNext: swiper.params.allowSlideNext,\n      allowSlidePrev: swiper.params.allowSlidePrev,\n      // Touch Events\n      touchEvents: function touchEvents() {\n        const touch = ['touchstart', 'touchmove', 'touchend', 'touchcancel'];\n        const desktop = ['pointerdown', 'pointermove', 'pointerup'];\n        swiper.touchEventsTouch = {\n          start: touch[0],\n          move: touch[1],\n          end: touch[2],\n          cancel: touch[3]\n        };\n        swiper.touchEventsDesktop = {\n          start: desktop[0],\n          move: desktop[1],\n          end: desktop[2]\n        };\n        return swiper.support.touch || !swiper.params.simulateTouch ? swiper.touchEventsTouch : swiper.touchEventsDesktop;\n      }(),\n      touchEventsData: {\n        isTouched: undefined,\n        isMoved: undefined,\n        allowTouchCallbacks: undefined,\n        touchStartTime: undefined,\n        isScrolling: undefined,\n        currentTranslate: undefined,\n        startTranslate: undefined,\n        allowThresholdMove: undefined,\n        // Form elements to match\n        focusableElements: swiper.params.focusableElements,\n        // Last click time\n        lastClickTime: now(),\n        clickTimeout: undefined,\n        // Velocities\n        velocities: [],\n        allowMomentumBounce: undefined,\n        isTouchEvent: undefined,\n        startMoving: undefined\n      },\n      // Clicks\n      allowClick: true,\n      // Touches\n      allowTouchMove: swiper.params.allowTouchMove,\n      touches: {\n        startX: 0,\n        startY: 0,\n        currentX: 0,\n        currentY: 0,\n        diff: 0\n      },\n      // Images\n      imagesToLoad: [],\n      imagesLoaded: 0\n    });\n    swiper.emit('_swiper'); // Init\n\n    if (swiper.params.init) {\n      swiper.init();\n    } // Return app instance\n\n\n    return swiper;\n  }\n\n  enable() {\n    const swiper = this;\n    if (swiper.enabled) return;\n    swiper.enabled = true;\n\n    if (swiper.params.grabCursor) {\n      swiper.setGrabCursor();\n    }\n\n    swiper.emit('enable');\n  }\n\n  disable() {\n    const swiper = this;\n    if (!swiper.enabled) return;\n    swiper.enabled = false;\n\n    if (swiper.params.grabCursor) {\n      swiper.unsetGrabCursor();\n    }\n\n    swiper.emit('disable');\n  }\n\n  setProgress(progress, speed) {\n    const swiper = this;\n    progress = Math.min(Math.max(progress, 0), 1);\n    const min = swiper.minTranslate();\n    const max = swiper.maxTranslate();\n    const current = (max - min) * progress + min;\n    swiper.translateTo(current, typeof speed === 'undefined' ? 0 : speed);\n    swiper.updateActiveIndex();\n    swiper.updateSlidesClasses();\n  }\n\n  emitContainerClasses() {\n    const swiper = this;\n    if (!swiper.params._emitClasses || !swiper.el) return;\n    const cls = swiper.el.className.split(' ').filter(className => {\n      return className.indexOf('swiper') === 0 || className.indexOf(swiper.params.containerModifierClass) === 0;\n    });\n    swiper.emit('_containerClasses', cls.join(' '));\n  }\n\n  getSlideClasses(slideEl) {\n    const swiper = this;\n    return slideEl.className.split(' ').filter(className => {\n      return className.indexOf('swiper-slide') === 0 || className.indexOf(swiper.params.slideClass) === 0;\n    }).join(' ');\n  }\n\n  emitSlidesClasses() {\n    const swiper = this;\n    if (!swiper.params._emitClasses || !swiper.el) return;\n    const updates = [];\n    swiper.slides.each(slideEl => {\n      const classNames = swiper.getSlideClasses(slideEl);\n      updates.push({\n        slideEl,\n        classNames\n      });\n      swiper.emit('_slideClass', slideEl, classNames);\n    });\n    swiper.emit('_slideClasses', updates);\n  }\n\n  slidesPerViewDynamic(view = 'current', exact = false) {\n    const swiper = this;\n    const {\n      params,\n      slides,\n      slidesGrid,\n      slidesSizesGrid,\n      size: swiperSize,\n      activeIndex\n    } = swiper;\n    let spv = 1;\n\n    if (params.centeredSlides) {\n      let slideSize = slides[activeIndex].swiperSlideSize;\n      let breakLoop;\n\n      for (let i = activeIndex + 1; i < slides.length; i += 1) {\n        if (slides[i] && !breakLoop) {\n          slideSize += slides[i].swiperSlideSize;\n          spv += 1;\n          if (slideSize > swiperSize) breakLoop = true;\n        }\n      }\n\n      for (let i = activeIndex - 1; i >= 0; i -= 1) {\n        if (slides[i] && !breakLoop) {\n          slideSize += slides[i].swiperSlideSize;\n          spv += 1;\n          if (slideSize > swiperSize) breakLoop = true;\n        }\n      }\n    } else {\n      // eslint-disable-next-line\n      if (view === 'current') {\n        for (let i = activeIndex + 1; i < slides.length; i += 1) {\n          const slideInView = exact ? slidesGrid[i] + slidesSizesGrid[i] - slidesGrid[activeIndex] < swiperSize : slidesGrid[i] - slidesGrid[activeIndex] < swiperSize;\n\n          if (slideInView) {\n            spv += 1;\n          }\n        }\n      } else {\n        // previous\n        for (let i = activeIndex - 1; i >= 0; i -= 1) {\n          const slideInView = slidesGrid[activeIndex] - slidesGrid[i] < swiperSize;\n\n          if (slideInView) {\n            spv += 1;\n          }\n        }\n      }\n    }\n\n    return spv;\n  }\n\n  update() {\n    const swiper = this;\n    if (!swiper || swiper.destroyed) return;\n    const {\n      snapGrid,\n      params\n    } = swiper; // Breakpoints\n\n    if (params.breakpoints) {\n      swiper.setBreakpoint();\n    }\n\n    swiper.updateSize();\n    swiper.updateSlides();\n    swiper.updateProgress();\n    swiper.updateSlidesClasses();\n\n    function setTranslate() {\n      const translateValue = swiper.rtlTranslate ? swiper.translate * -1 : swiper.translate;\n      const newTranslate = Math.min(Math.max(translateValue, swiper.maxTranslate()), swiper.minTranslate());\n      swiper.setTranslate(newTranslate);\n      swiper.updateActiveIndex();\n      swiper.updateSlidesClasses();\n    }\n\n    let translated;\n\n    if (swiper.params.freeMode && swiper.params.freeMode.enabled) {\n      setTranslate();\n\n      if (swiper.params.autoHeight) {\n        swiper.updateAutoHeight();\n      }\n    } else {\n      if ((swiper.params.slidesPerView === 'auto' || swiper.params.slidesPerView > 1) && swiper.isEnd && !swiper.params.centeredSlides) {\n        translated = swiper.slideTo(swiper.slides.length - 1, 0, false, true);\n      } else {\n        translated = swiper.slideTo(swiper.activeIndex, 0, false, true);\n      }\n\n      if (!translated) {\n        setTranslate();\n      }\n    }\n\n    if (params.watchOverflow && snapGrid !== swiper.snapGrid) {\n      swiper.checkOverflow();\n    }\n\n    swiper.emit('update');\n  }\n\n  changeDirection(newDirection, needUpdate = true) {\n    const swiper = this;\n    const currentDirection = swiper.params.direction;\n\n    if (!newDirection) {\n      // eslint-disable-next-line\n      newDirection = currentDirection === 'horizontal' ? 'vertical' : 'horizontal';\n    }\n\n    if (newDirection === currentDirection || newDirection !== 'horizontal' && newDirection !== 'vertical') {\n      return swiper;\n    }\n\n    swiper.$el.removeClass(`${swiper.params.containerModifierClass}${currentDirection}`).addClass(`${swiper.params.containerModifierClass}${newDirection}`);\n    swiper.emitContainerClasses();\n    swiper.params.direction = newDirection;\n    swiper.slides.each(slideEl => {\n      if (newDirection === 'vertical') {\n        slideEl.style.width = '';\n      } else {\n        slideEl.style.height = '';\n      }\n    });\n    swiper.emit('changeDirection');\n    if (needUpdate) swiper.update();\n    return swiper;\n  }\n\n  mount(el) {\n    const swiper = this;\n    if (swiper.mounted) return true; // Find el\n\n    const $el = $(el || swiper.params.el);\n    el = $el[0];\n\n    if (!el) {\n      return false;\n    }\n\n    el.swiper = swiper;\n\n    const getWrapperSelector = () => {\n      return `.${(swiper.params.wrapperClass || '').trim().split(' ').join('.')}`;\n    };\n\n    const getWrapper = () => {\n      if (el && el.shadowRoot && el.shadowRoot.querySelector) {\n        const res = $(el.shadowRoot.querySelector(getWrapperSelector())); // Children needs to return slot items\n\n        res.children = options => $el.children(options);\n\n        return res;\n      }\n\n      return $el.children(getWrapperSelector());\n    }; // Find Wrapper\n\n\n    let $wrapperEl = getWrapper();\n\n    if ($wrapperEl.length === 0 && swiper.params.createElements) {\n      const document = getDocument();\n      const wrapper = document.createElement('div');\n      $wrapperEl = $(wrapper);\n      wrapper.className = swiper.params.wrapperClass;\n      $el.append(wrapper);\n      $el.children(`.${swiper.params.slideClass}`).each(slideEl => {\n        $wrapperEl.append(slideEl);\n      });\n    }\n\n    Object.assign(swiper, {\n      $el,\n      el,\n      $wrapperEl,\n      wrapperEl: $wrapperEl[0],\n      mounted: true,\n      // RTL\n      rtl: el.dir.toLowerCase() === 'rtl' || $el.css('direction') === 'rtl',\n      rtlTranslate: swiper.params.direction === 'horizontal' && (el.dir.toLowerCase() === 'rtl' || $el.css('direction') === 'rtl'),\n      wrongRTL: $wrapperEl.css('display') === '-webkit-box'\n    });\n    return true;\n  }\n\n  init(el) {\n    const swiper = this;\n    if (swiper.initialized) return swiper;\n    const mounted = swiper.mount(el);\n    if (mounted === false) return swiper;\n    swiper.emit('beforeInit'); // Set breakpoint\n\n    if (swiper.params.breakpoints) {\n      swiper.setBreakpoint();\n    } // Add Classes\n\n\n    swiper.addClasses(); // Create loop\n\n    if (swiper.params.loop) {\n      swiper.loopCreate();\n    } // Update size\n\n\n    swiper.updateSize(); // Update slides\n\n    swiper.updateSlides();\n\n    if (swiper.params.watchOverflow) {\n      swiper.checkOverflow();\n    } // Set Grab Cursor\n\n\n    if (swiper.params.grabCursor && swiper.enabled) {\n      swiper.setGrabCursor();\n    }\n\n    if (swiper.params.preloadImages) {\n      swiper.preloadImages();\n    } // Slide To Initial Slide\n\n\n    if (swiper.params.loop) {\n      swiper.slideTo(swiper.params.initialSlide + swiper.loopedSlides, 0, swiper.params.runCallbacksOnInit, false, true);\n    } else {\n      swiper.slideTo(swiper.params.initialSlide, 0, swiper.params.runCallbacksOnInit, false, true);\n    } // Attach events\n\n\n    swiper.attachEvents(); // Init Flag\n\n    swiper.initialized = true; // Emit\n\n    swiper.emit('init');\n    swiper.emit('afterInit');\n    return swiper;\n  }\n\n  destroy(deleteInstance = true, cleanStyles = true) {\n    const swiper = this;\n    const {\n      params,\n      $el,\n      $wrapperEl,\n      slides\n    } = swiper;\n\n    if (typeof swiper.params === 'undefined' || swiper.destroyed) {\n      return null;\n    }\n\n    swiper.emit('beforeDestroy'); // Init Flag\n\n    swiper.initialized = false; // Detach events\n\n    swiper.detachEvents(); // Destroy loop\n\n    if (params.loop) {\n      swiper.loopDestroy();\n    } // Cleanup styles\n\n\n    if (cleanStyles) {\n      swiper.removeClasses();\n      $el.removeAttr('style');\n      $wrapperEl.removeAttr('style');\n\n      if (slides && slides.length) {\n        slides.removeClass([params.slideVisibleClass, params.slideActiveClass, params.slideNextClass, params.slidePrevClass].join(' ')).removeAttr('style').removeAttr('data-swiper-slide-index');\n      }\n    }\n\n    swiper.emit('destroy'); // Detach emitter events\n\n    Object.keys(swiper.eventsListeners).forEach(eventName => {\n      swiper.off(eventName);\n    });\n\n    if (deleteInstance !== false) {\n      swiper.$el[0].swiper = null;\n      deleteProps(swiper);\n    }\n\n    swiper.destroyed = true;\n    return null;\n  }\n\n  static extendDefaults(newDefaults) {\n    extend(extendedDefaults, newDefaults);\n  }\n\n  static get extendedDefaults() {\n    return extendedDefaults;\n  }\n\n  static get defaults() {\n    return defaults;\n  }\n\n  static installModule(mod) {\n    if (!Swiper.prototype.__modules__) Swiper.prototype.__modules__ = [];\n    const modules = Swiper.prototype.__modules__;\n\n    if (typeof mod === 'function' && modules.indexOf(mod) < 0) {\n      modules.push(mod);\n    }\n  }\n\n  static use(module) {\n    if (Array.isArray(module)) {\n      module.forEach(m => Swiper.installModule(m));\n      return Swiper;\n    }\n\n    Swiper.installModule(module);\n    return Swiper;\n  }\n\n}\n\nObject.keys(prototypes).forEach(prototypeGroup => {\n  Object.keys(prototypes[prototypeGroup]).forEach(protoMethod => {\n    Swiper.prototype[protoMethod] = prototypes[prototypeGroup][protoMethod];\n  });\n});\nSwiper.use([Resize, Observer]);\nexport default Swiper;","import getTranslate from './getTranslate.js';\nimport setTranslate from './setTranslate.js';\nimport minTranslate from './minTranslate.js';\nimport maxTranslate from './maxTranslate.js';\nimport translateTo from './translateTo.js';\nexport default {\n  getTranslate,\n  setTranslate,\n  minTranslate,\n  maxTranslate,\n  translateTo\n};","import { getTranslate } from '../../shared/utils.js';\nexport default function getSwiperTranslate(axis = this.isHorizontal() ? 'x' : 'y') {\n  const swiper = this;\n  const {\n    params,\n    rtlTranslate: rtl,\n    translate,\n    $wrapperEl\n  } = swiper;\n\n  if (params.virtualTranslate) {\n    return rtl ? -translate : translate;\n  }\n\n  if (params.cssMode) {\n    return translate;\n  }\n\n  let currentTranslate = getTranslate($wrapperEl[0], axis);\n  if (rtl) currentTranslate = -currentTranslate;\n  return currentTranslate || 0;\n}","export default function setTranslate(translate, byController) {\n  const swiper = this;\n  const {\n    rtlTranslate: rtl,\n    params,\n    $wrapperEl,\n    wrapperEl,\n    progress\n  } = swiper;\n  let x = 0;\n  let y = 0;\n  const z = 0;\n\n  if (swiper.isHorizontal()) {\n    x = rtl ? -translate : translate;\n  } else {\n    y = translate;\n  }\n\n  if (params.roundLengths) {\n    x = Math.floor(x);\n    y = Math.floor(y);\n  }\n\n  if (params.cssMode) {\n    wrapperEl[swiper.isHorizontal() ? 'scrollLeft' : 'scrollTop'] = swiper.isHorizontal() ? -x : -y;\n  } else if (!params.virtualTranslate) {\n    $wrapperEl.transform(`translate3d(${x}px, ${y}px, ${z}px)`);\n  }\n\n  swiper.previousTranslate = swiper.translate;\n  swiper.translate = swiper.isHorizontal() ? x : y; // Check if we need to update progress\n\n  let newProgress;\n  const translatesDiff = swiper.maxTranslate() - swiper.minTranslate();\n\n  if (translatesDiff === 0) {\n    newProgress = 0;\n  } else {\n    newProgress = (translate - swiper.minTranslate()) / translatesDiff;\n  }\n\n  if (newProgress !== progress) {\n    swiper.updateProgress(translate);\n  }\n\n  swiper.emit('setTranslate', swiper.translate, byController);\n}","export default function minTranslate() {\n  return -this.snapGrid[0];\n}","export default function maxTranslate() {\n  return -this.snapGrid[this.snapGrid.length - 1];\n}","import { animateCSSModeScroll } from '../../shared/utils.js';\nexport default function translateTo(translate = 0, speed = this.params.speed, runCallbacks = true, translateBounds = true, internal) {\n  const swiper = this;\n  const {\n    params,\n    wrapperEl\n  } = swiper;\n\n  if (swiper.animating && params.preventInteractionOnTransition) {\n    return false;\n  }\n\n  const minTranslate = swiper.minTranslate();\n  const maxTranslate = swiper.maxTranslate();\n  let newTranslate;\n  if (translateBounds && translate > minTranslate) newTranslate = minTranslate;else if (translateBounds && translate < maxTranslate) newTranslate = maxTranslate;else newTranslate = translate; // Update progress\n\n  swiper.updateProgress(newTranslate);\n\n  if (params.cssMode) {\n    const isH = swiper.isHorizontal();\n\n    if (speed === 0) {\n      wrapperEl[isH ? 'scrollLeft' : 'scrollTop'] = -newTranslate;\n    } else {\n      if (!swiper.support.smoothScroll) {\n        animateCSSModeScroll({\n          swiper,\n          targetPosition: -newTranslate,\n          side: isH ? 'left' : 'top'\n        });\n        return true;\n      }\n\n      wrapperEl.scrollTo({\n        [isH ? 'left' : 'top']: -newTranslate,\n        behavior: 'smooth'\n      });\n    }\n\n    return true;\n  }\n\n  if (speed === 0) {\n    swiper.setTransition(0);\n    swiper.setTranslate(newTranslate);\n\n    if (runCallbacks) {\n      swiper.emit('beforeTransitionStart', speed, internal);\n      swiper.emit('transitionEnd');\n    }\n  } else {\n    swiper.setTransition(speed);\n    swiper.setTranslate(newTranslate);\n\n    if (runCallbacks) {\n      swiper.emit('beforeTransitionStart', speed, internal);\n      swiper.emit('transitionStart');\n    }\n\n    if (!swiper.animating) {\n      swiper.animating = true;\n\n      if (!swiper.onTranslateToWrapperTransitionEnd) {\n        swiper.onTranslateToWrapperTransitionEnd = function transitionEnd(e) {\n          if (!swiper || swiper.destroyed) return;\n          if (e.target !== this) return;\n          swiper.$wrapperEl[0].removeEventListener('transitionend', swiper.onTranslateToWrapperTransitionEnd);\n          swiper.$wrapperEl[0].removeEventListener('webkitTransitionEnd', swiper.onTranslateToWrapperTransitionEnd);\n          swiper.onTranslateToWrapperTransitionEnd = null;\n          delete swiper.onTranslateToWrapperTransitionEnd;\n\n          if (runCallbacks) {\n            swiper.emit('transitionEnd');\n          }\n        };\n      }\n\n      swiper.$wrapperEl[0].addEventListener('transitionend', swiper.onTranslateToWrapperTransitionEnd);\n      swiper.$wrapperEl[0].addEventListener('webkitTransitionEnd', swiper.onTranslateToWrapperTransitionEnd);\n    }\n  }\n\n  return true;\n}","import setTransition from './setTransition.js';\nimport transitionStart from './transitionStart.js';\nimport transitionEnd from './transitionEnd.js';\nexport default {\n  setTransition,\n  transitionStart,\n  transitionEnd\n};","export default function setTransition(duration, byController) {\n  const swiper = this;\n\n  if (!swiper.params.cssMode) {\n    swiper.$wrapperEl.transition(duration);\n  }\n\n  swiper.emit('setTransition', duration, byController);\n}","import transitionEmit from './transitionEmit.js';\nexport default function transitionStart(runCallbacks = true, direction) {\n  const swiper = this;\n  const {\n    params\n  } = swiper;\n  if (params.cssMode) return;\n\n  if (params.autoHeight) {\n    swiper.updateAutoHeight();\n  }\n\n  transitionEmit({\n    swiper,\n    runCallbacks,\n    direction,\n    step: 'Start'\n  });\n}","import transitionEmit from './transitionEmit.js';\nexport default function transitionEnd(runCallbacks = true, direction) {\n  const swiper = this;\n  const {\n    params\n  } = swiper;\n  swiper.animating = false;\n  if (params.cssMode) return;\n  swiper.setTransition(0);\n  transitionEmit({\n    swiper,\n    runCallbacks,\n    direction,\n    step: 'End'\n  });\n}","import setGrabCursor from './setGrabCursor.js';\nimport unsetGrabCursor from './unsetGrabCursor.js';\nexport default {\n  setGrabCursor,\n  unsetGrabCursor\n};","export default function setGrabCursor(moving) {\n  const swiper = this;\n  if (swiper.support.touch || !swiper.params.simulateTouch || swiper.params.watchOverflow && swiper.isLocked || swiper.params.cssMode) return;\n  const el = swiper.params.touchEventsTarget === 'container' ? swiper.el : swiper.wrapperEl;\n  el.style.cursor = 'move';\n  el.style.cursor = moving ? '-webkit-grabbing' : '-webkit-grab';\n  el.style.cursor = moving ? '-moz-grabbin' : '-moz-grab';\n  el.style.cursor = moving ? 'grabbing' : 'grab';\n}","export default function unsetGrabCursor() {\n  const swiper = this;\n\n  if (swiper.support.touch || swiper.params.watchOverflow && swiper.isLocked || swiper.params.cssMode) {\n    return;\n  }\n\n  swiper[swiper.params.touchEventsTarget === 'container' ? 'el' : 'wrapperEl'].style.cursor = '';\n}","import setBreakpoint from './setBreakpoint.js';\nimport getBreakpoint from './getBreakpoint.js';\nexport default {\n  setBreakpoint,\n  getBreakpoint\n};","import { getWindow } from 'ssr-window';\nexport default function getBreakpoint(breakpoints, base = 'window', containerEl) {\n  if (!breakpoints || base === 'container' && !containerEl) return undefined;\n  let breakpoint = false;\n  const window = getWindow();\n  const currentHeight = base === 'window' ? window.innerHeight : containerEl.clientHeight;\n  const points = Object.keys(breakpoints).map(point => {\n    if (typeof point === 'string' && point.indexOf('@') === 0) {\n      const minRatio = parseFloat(point.substr(1));\n      const value = currentHeight * minRatio;\n      return {\n        value,\n        point\n      };\n    }\n\n    return {\n      value: point,\n      point\n    };\n  });\n  points.sort((a, b) => parseInt(a.value, 10) - parseInt(b.value, 10));\n\n  for (let i = 0; i < points.length; i += 1) {\n    const {\n      point,\n      value\n    } = points[i];\n\n    if (base === 'window') {\n      if (window.matchMedia(`(min-width: ${value}px)`).matches) {\n        breakpoint = point;\n      }\n    } else if (value <= containerEl.clientWidth) {\n      breakpoint = point;\n    }\n  }\n\n  return breakpoint || 'max';\n}","function checkOverflow() {\n  const swiper = this;\n  const {\n    isLocked: wasLocked,\n    params\n  } = swiper;\n  const {\n    slidesOffsetBefore\n  } = params;\n\n  if (slidesOffsetBefore) {\n    const lastSlideIndex = swiper.slides.length - 1;\n    const lastSlideRightEdge = swiper.slidesGrid[lastSlideIndex] + swiper.slidesSizesGrid[lastSlideIndex] + slidesOffsetBefore * 2;\n    swiper.isLocked = swiper.size > lastSlideRightEdge;\n  } else {\n    swiper.isLocked = swiper.snapGrid.length === 1;\n  }\n\n  if (params.allowSlideNext === true) {\n    swiper.allowSlideNext = !swiper.isLocked;\n  }\n\n  if (params.allowSlidePrev === true) {\n    swiper.allowSlidePrev = !swiper.isLocked;\n  }\n\n  if (wasLocked && wasLocked !== swiper.isLocked) {\n    swiper.isEnd = false;\n  }\n\n  if (wasLocked !== swiper.isLocked) {\n    swiper.emit(swiper.isLocked ? 'lock' : 'unlock');\n  }\n}\n\nexport default {\n  checkOverflow\n};","import loadImage from './loadImage.js';\nimport preloadImages from './preloadImages.js';\nexport default {\n  loadImage,\n  preloadImages\n};","import { getWindow } from 'ssr-window';\nimport $ from '../../shared/dom.js';\nexport default function loadImage(imageEl, src, srcset, sizes, checkForComplete, callback) {\n  const window = getWindow();\n  let image;\n\n  function onReady() {\n    if (callback) callback();\n  }\n\n  const isPicture = $(imageEl).parent('picture')[0];\n\n  if (!isPicture && (!imageEl.complete || !checkForComplete)) {\n    if (src) {\n      image = new window.Image();\n      image.onload = onReady;\n      image.onerror = onReady;\n\n      if (sizes) {\n        image.sizes = sizes;\n      }\n\n      if (srcset) {\n        image.srcset = srcset;\n      }\n\n      if (src) {\n        image.src = src;\n      }\n    } else {\n      onReady();\n    }\n  } else {\n    // image already loaded...\n    onReady();\n  }\n}","export default function preloadImages() {\n  const swiper = this;\n  swiper.imagesToLoad = swiper.$el.find('img');\n\n  function onReady() {\n    if (typeof swiper === 'undefined' || swiper === null || !swiper || swiper.destroyed) return;\n    if (swiper.imagesLoaded !== undefined) swiper.imagesLoaded += 1;\n\n    if (swiper.imagesLoaded === swiper.imagesToLoad.length) {\n      if (swiper.params.updateOnImagesReady) swiper.update();\n      swiper.emit('imagesReady');\n    }\n  }\n\n  for (let i = 0; i < swiper.imagesToLoad.length; i += 1) {\n    const imageEl = swiper.imagesToLoad[i];\n    swiper.loadImage(imageEl, imageEl.currentSrc || imageEl.getAttribute('src'), imageEl.srcset || imageEl.getAttribute('srcset'), imageEl.sizes || imageEl.getAttribute('sizes'), true, onReady);\n  }\n}","import { getWindow } from 'ssr-window';\nexport default function Resize({\n  swiper,\n  on,\n  emit\n}) {\n  const window = getWindow();\n  let observer = null;\n\n  const resizeHandler = () => {\n    if (!swiper || swiper.destroyed || !swiper.initialized) return;\n    emit('beforeResize');\n    emit('resize');\n  };\n\n  const createObserver = () => {\n    if (!swiper || swiper.destroyed || !swiper.initialized) return;\n    observer = new ResizeObserver(entries => {\n      const {\n        width,\n        height\n      } = swiper;\n      let newWidth = width;\n      let newHeight = height;\n      entries.forEach(({\n        contentBoxSize,\n        contentRect,\n        target\n      }) => {\n        if (target && target !== swiper.el) return;\n        newWidth = contentRect ? contentRect.width : (contentBoxSize[0] || contentBoxSize).inlineSize;\n        newHeight = contentRect ? contentRect.height : (contentBoxSize[0] || contentBoxSize).blockSize;\n      });\n\n      if (newWidth !== width || newHeight !== height) {\n        resizeHandler();\n      }\n    });\n    observer.observe(swiper.el);\n  };\n\n  const removeObserver = () => {\n    if (observer && observer.unobserve && swiper.el) {\n      observer.unobserve(swiper.el);\n      observer = null;\n    }\n  };\n\n  const orientationChangeHandler = () => {\n    if (!swiper || swiper.destroyed || !swiper.initialized) return;\n    emit('orientationchange');\n  };\n\n  on('init', () => {\n    if (swiper.params.resizeObserver && typeof window.ResizeObserver !== 'undefined') {\n      createObserver();\n      return;\n    }\n\n    window.addEventListener('resize', resizeHandler);\n    window.addEventListener('orientationchange', orientationChangeHandler);\n  });\n  on('destroy', () => {\n    removeObserver();\n    window.removeEventListener('resize', resizeHandler);\n    window.removeEventListener('orientationchange', orientationChangeHandler);\n  });\n}","import { getWindow } from 'ssr-window';\nexport default function Observer({\n  swiper,\n  extendParams,\n  on,\n  emit\n}) {\n  const observers = [];\n  const window = getWindow();\n\n  const attach = (target, options = {}) => {\n    const ObserverFunc = window.MutationObserver || window.WebkitMutationObserver;\n    const observer = new ObserverFunc(mutations => {\n      // The observerUpdate event should only be triggered\n      // once despite the number of mutations.  Additional\n      // triggers are redundant and are very costly\n      if (mutations.length === 1) {\n        emit('observerUpdate', mutations[0]);\n        return;\n      }\n\n      const observerUpdate = function observerUpdate() {\n        emit('observerUpdate', mutations[0]);\n      };\n\n      if (window.requestAnimationFrame) {\n        window.requestAnimationFrame(observerUpdate);\n      } else {\n        window.setTimeout(observerUpdate, 0);\n      }\n    });\n    observer.observe(target, {\n      attributes: typeof options.attributes === 'undefined' ? true : options.attributes,\n      childList: typeof options.childList === 'undefined' ? true : options.childList,\n      characterData: typeof options.characterData === 'undefined' ? true : options.characterData\n    });\n    observers.push(observer);\n  };\n\n  const init = () => {\n    if (!swiper.params.observer) return;\n\n    if (swiper.params.observeParents) {\n      const containerParents = swiper.$el.parents();\n\n      for (let i = 0; i < containerParents.length; i += 1) {\n        attach(containerParents[i]);\n      }\n    } // Observe container\n\n\n    attach(swiper.$el[0], {\n      childList: swiper.params.observeSlideChildren\n    }); // Observe wrapper\n\n    attach(swiper.$wrapperEl[0], {\n      attributes: false\n    });\n  };\n\n  const destroy = () => {\n    observers.forEach(observer => {\n      observer.disconnect();\n    });\n    observers.splice(0, observers.length);\n  };\n\n  extendParams({\n    observer: false,\n    observeParents: false,\n    observeSlideChildren: false\n  });\n  on('init', init);\n  on('destroy', destroy);\n}","import createElementIfNotDefined from '../../shared/create-element-if-not-defined.js';\nimport $ from '../../shared/dom.js';\nexport default function Navigation({\n  swiper,\n  extendParams,\n  on,\n  emit\n}) {\n  extendParams({\n    navigation: {\n      nextEl: null,\n      prevEl: null,\n      hideOnClick: false,\n      disabledClass: 'swiper-button-disabled',\n      hiddenClass: 'swiper-button-hidden',\n      lockClass: 'swiper-button-lock'\n    }\n  });\n  swiper.navigation = {\n    nextEl: null,\n    $nextEl: null,\n    prevEl: null,\n    $prevEl: null\n  };\n\n  function getEl(el) {\n    let $el;\n\n    if (el) {\n      $el = $(el);\n\n      if (swiper.params.uniqueNavElements && typeof el === 'string' && $el.length > 1 && swiper.$el.find(el).length === 1) {\n        $el = swiper.$el.find(el);\n      }\n    }\n\n    return $el;\n  }\n\n  function toggleEl($el, disabled) {\n    const params = swiper.params.navigation;\n\n    if ($el && $el.length > 0) {\n      $el[disabled ? 'addClass' : 'removeClass'](params.disabledClass);\n      if ($el[0] && $el[0].tagName === 'BUTTON') $el[0].disabled = disabled;\n\n      if (swiper.params.watchOverflow && swiper.enabled) {\n        $el[swiper.isLocked ? 'addClass' : 'removeClass'](params.lockClass);\n      }\n    }\n  }\n\n  function update() {\n    // Update Navigation Buttons\n    if (swiper.params.loop) return;\n    const {\n      $nextEl,\n      $prevEl\n    } = swiper.navigation;\n    toggleEl($prevEl, swiper.isBeginning && !swiper.params.rewind);\n    toggleEl($nextEl, swiper.isEnd && !swiper.params.rewind);\n  }\n\n  function onPrevClick(e) {\n    e.preventDefault();\n    if (swiper.isBeginning && !swiper.params.loop && !swiper.params.rewind) return;\n    swiper.slidePrev();\n  }\n\n  function onNextClick(e) {\n    e.preventDefault();\n    if (swiper.isEnd && !swiper.params.loop && !swiper.params.rewind) return;\n    swiper.slideNext();\n  }\n\n  function init() {\n    const params = swiper.params.navigation;\n    swiper.params.navigation = createElementIfNotDefined(swiper, swiper.originalParams.navigation, swiper.params.navigation, {\n      nextEl: 'swiper-button-next',\n      prevEl: 'swiper-button-prev'\n    });\n    if (!(params.nextEl || params.prevEl)) return;\n    const $nextEl = getEl(params.nextEl);\n    const $prevEl = getEl(params.prevEl);\n\n    if ($nextEl && $nextEl.length > 0) {\n      $nextEl.on('click', onNextClick);\n    }\n\n    if ($prevEl && $prevEl.length > 0) {\n      $prevEl.on('click', onPrevClick);\n    }\n\n    Object.assign(swiper.navigation, {\n      $nextEl,\n      nextEl: $nextEl && $nextEl[0],\n      $prevEl,\n      prevEl: $prevEl && $prevEl[0]\n    });\n\n    if (!swiper.enabled) {\n      if ($nextEl) $nextEl.addClass(params.lockClass);\n      if ($prevEl) $prevEl.addClass(params.lockClass);\n    }\n  }\n\n  function destroy() {\n    const {\n      $nextEl,\n      $prevEl\n    } = swiper.navigation;\n\n    if ($nextEl && $nextEl.length) {\n      $nextEl.off('click', onNextClick);\n      $nextEl.removeClass(swiper.params.navigation.disabledClass);\n    }\n\n    if ($prevEl && $prevEl.length) {\n      $prevEl.off('click', onPrevClick);\n      $prevEl.removeClass(swiper.params.navigation.disabledClass);\n    }\n  }\n\n  on('init', () => {\n    init();\n    update();\n  });\n  on('toEdge fromEdge lock unlock', () => {\n    update();\n  });\n  on('destroy', () => {\n    destroy();\n  });\n  on('enable disable', () => {\n    const {\n      $nextEl,\n      $prevEl\n    } = swiper.navigation;\n\n    if ($nextEl) {\n      $nextEl[swiper.enabled ? 'removeClass' : 'addClass'](swiper.params.navigation.lockClass);\n    }\n\n    if ($prevEl) {\n      $prevEl[swiper.enabled ? 'removeClass' : 'addClass'](swiper.params.navigation.lockClass);\n    }\n  });\n  on('click', (_s, e) => {\n    const {\n      $nextEl,\n      $prevEl\n    } = swiper.navigation;\n    const targetEl = e.target;\n\n    if (swiper.params.navigation.hideOnClick && !$(targetEl).is($prevEl) && !$(targetEl).is($nextEl)) {\n      if (swiper.pagination && swiper.params.pagination && swiper.params.pagination.clickable && (swiper.pagination.el === targetEl || swiper.pagination.el.contains(targetEl))) return;\n      let isHidden;\n\n      if ($nextEl) {\n        isHidden = $nextEl.hasClass(swiper.params.navigation.hiddenClass);\n      } else if ($prevEl) {\n        isHidden = $prevEl.hasClass(swiper.params.navigation.hiddenClass);\n      }\n\n      if (isHidden === true) {\n        emit('navigationShow');\n      } else {\n        emit('navigationHide');\n      }\n\n      if ($nextEl) {\n        $nextEl.toggleClass(swiper.params.navigation.hiddenClass);\n      }\n\n      if ($prevEl) {\n        $prevEl.toggleClass(swiper.params.navigation.hiddenClass);\n      }\n    }\n  });\n  Object.assign(swiper.navigation, {\n    update,\n    init,\n    destroy\n  });\n}","import { getDocument } from 'ssr-window';\nexport default function createElementIfNotDefined(swiper, originalParams, params, checkProps) {\n  const document = getDocument();\n\n  if (swiper.params.createElements) {\n    Object.keys(checkProps).forEach(key => {\n      if (!params[key] && params.auto === true) {\n        let element = swiper.$el.children(`.${checkProps[key]}`)[0];\n\n        if (!element) {\n          element = document.createElement('div');\n          element.className = checkProps[key];\n          swiper.$el.append(element);\n        }\n\n        params[key] = element;\n        originalParams[key] = element;\n      }\n    });\n  }\n\n  return params;\n}","/**\n* Enhancements for the Manuscript Verse Miscellany Project\n* @author Joey Takeda\n* @author DHIL\n* @started 2020\n*\n**/\n\n/**\n * Imports\n */\nimport Modals from 'dhilux/js/modals.bundle.js';\nimport A11YTables from \"dhilux/js/a11y_tables.js\";\nimport Accordion from 'dhilux/js/accordion.js';\n// core version + navigation, pagination modules:\nimport Swiper, { Navigation } from 'swiper';\nimport TomSelect from 'tom-select';\n\n/**\n * The current document id\n * @type {string}\n */\nconst docId = document.querySelector('html').id;\n\n\n/**\n * Initialize\n */\n(function(){\n    makeHomepageGallery();\n    makeA11YTables();\n    if (!(/(edit|new)\\/?$/gi.test(location) || docId == 'index')) {\n        makeModals();\n    }\n    makeAccordions();\n    makeBetterSelects();\n})();\n\nfunction makeAccordions(){\n   let accordions =  [...document.querySelectorAll('details.accordion')].map(d => {\n       return new Accordion(d);\n   });\n}\n\nfunction makeBetterSelects(){\n    const opts = {\n        maxOptions: null,\n        copyClassesToDropdown: true\n\n    }\n    const plugins = {\n        'clear_button':{\n            'title':'Remove all selected options',\n            'html' : function(thing){\n                return `<button class=\"btn clear-button\">\n                        <svg viewBox=\"0 0 24 24\" height=\"1rem\" width=\"1rem\">\n                            <line x1=\"0\" x2=\"24\" y1=\"0\" y2=\"24\" />\n                            <line x1=\"24\" x2=\"0\" y1=\"0\" y2=\"24\" />\n                        </svg>\n                        <span class=\"visually-hidden\">Close</span>\n                    </button>`;\n            }\n        },\n        remove_button: {\n            title: 'Remove this item',\n        },\n        'checkbox_options': true\n    };\n\n    let advancedForm = document.querySelector('form[name=\"ms_filter\"]');\n    if (!advancedForm){\n        return;\n    }\n    advancedForm.querySelectorAll('select').forEach(sel => {\n        // If this is the sorter select, then we leave it as is\n        if (sel.id == 'sort'){\n            return sel;\n        }\n        let multiple = sel.hasAttribute('multiple');\n        sel.classList.remove('form-control');\n        plugins['checkbox_options'] = multiple;\n        new TomSelect(sel, {\n            ...opts,\n            multiple,\n            plugins\n        });\n    });\n\n}\n\n/**\n * Create the homepage gallery slider, using Swiper\n * @return {boolean} True if successful, false otherwise\n */\nfunction makeHomepageGallery() {\n    try{\n        let q = '.archive-gallery';\n        let gallery = document.querySelector(q);\n        // Bail if no archive gallery\n        if (!gallery) {\n            return true;\n        }\n        // Add the navigation module to Swiper\n        Swiper.use([Navigation]);\n        let cfg = {\n            // centeredSlides: true,\n            spaceBetween: 16,\n            slidesPerView: 3,\n            // loop: true,\n            navigation: {}\n        }\n\n        // Now create the swiper specific classes\n        let wrapper = document.createElement('div');\n        gallery.insertAdjacentElement('beforebegin', wrapper);\n        wrapper.appendChild(gallery);\n        wrapper.classList.add('swiper');\n        gallery.classList.add('swiper-wrapper');\n        [...gallery.children].forEach(child => {\n            child.classList.add('swiper-slide');\n        });\n        // Create next/prev buttons\n        ['next', 'prev'].forEach(bc => {\n            let div = document.createElement('div');\n            let divClass = `swiper-button-${bc}`;\n            div.classList.add(divClass);\n            wrapper.appendChild(div);\n            cfg.navigation[`${bc}El`] = '.' + divClass;\n        });\n        // And create the carousel\n        const carousel = new Swiper('.swiper', cfg);\n        return true;\n    } catch(e) {\n        return false;\n    }\n}\n\n/**\n * Function to create the modals using DHILUX's Modal\n * @return {boolean} True if successful, false otherwise\n */\nfunction makeModals(){\n    try{\n        //Filter the entities\n        const entities = ['person','theme','region','period','coterie', 'print_source', 'archive'].filter(isIndex);\n        // Selector string for all entities\n        const selector = entities.map(ent => `a[href*=\"${ent}\"]`).join(', ');\n        let modals = new Modals(selector);\n        modals.el = document.querySelector('main');\n        modals.filterParentsSelector = '.gallery, html[id$=\"_index\"], header, p';\n        modals.linkFilter = (link) => {\n            if (/^manuscript_show_\\d+/.test(docId)){\n                return true;\n            }\n            let table = link.closest('table');\n            // We only want modals to appear on non-listing tables\n            // (i.e. the tables that don't have heads\n            if (table){\n                let thead = table.querySelector('thead');\n                return (thead === null);\n            }\n        }\n\n        modals.init();\n        return true;\n    } catch(e) {\n        console.log(e);\n        return false;\n    }\n}\n\n/**\n * Function to create accessible tables using DHILUX's A11YTables\n * @return {boolean} True if successful, false otherwise\n */\nfunction makeA11YTables(){\n    try{\n        let accessibleTables = new A11YTables();\n        accessibleTables.init();\n        // Wrap each table in a div for horizontal scrolling\n        accessibleTables.tables.forEach(A11YTable => {\n            let table = A11YTable.table;\n            let ctr = document.createElement('div')\n            table.insertAdjacentElement('beforebegin', ctr);\n            ctr.classList.add('table-container');\n            ctr.appendChild(table);\n        });\n        return true;\n    } catch(e){\n        console.log(e);\n        return false;\n    }\n}\n\n/**\n * Check whether we're currently on an index page for creating modals;\n * (i.e. don't create a modal for the link to the archive when we're on\n * archive_index; presumably, if you're on the index for that entity,\n * you want to go directly to it)\n * @param entity {string} The entity name\n * @returns {boolean} Whether we're on the index page\n */\nfunction isIndex(entity) {\n    let rex = new RegExp(`\\\\/${entity}\\\\/?$`, 'gi');\n    return !(rex.test(window.location.href));\n}\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["module","exports","forEvents","events","callback","split","forEach","event","MicroEvent","constructor","this","_events","on","fct","event_array","push","off","n","arguments","length","undefined","splice","indexOf","trigger","args","self","apply","arrayToPattern","chars","filter","Boolean","maxValueLength","join","sequencePattern","array","hasDuplicates","pattern","prev_char_count","prev_pattern","char","i","setToPattern","toArray","Set","size","escape_regex","str","replace","reduce","longest","value","Math","max","unicodeLength","p","Array","from","allSubstrings","input","result","start","substring","subresult","tmp","slice","charAt","unshift","code_points","unicode_map","multi_char_reg","latin_convert","latin_condensed","latin","unicode","convert_pat","RegExp","Object","keys","normalize","form","asciifold","_asciifold","toLowerCase","generateSets","unicode_sets","addMatching","folded","to_add","folded_set","patt","match","add","code_point_min","code_point_max","composed","String","fromCharCode","code_point","generator","generateMap","multi_char","set","sort","a","b","multi_char_patt","substringsToPattern","min_replacement","map","sub_pat","strings","chars_replaced","mapSequence","sequencesToPattern","sequences","all","sequence","seq","len","j","substrs","inSequences","needle_seq","end","needle_parts","parts","part","needle_part","substr","Sequence","min","last","clone","position","last_piece","JSON","parse","stringify","last_part","pop","last_substr","clone_last_len","getPattern","_code_points","match_str","overlapping","added_types","has","new_seq","old_seq","getAttr","obj","name","getAttrNesting","names","shift","scoreValue","token","weight","score","pos","regex","search","string","propToArray","key","isArray","iterate$1","object","hasOwnProperty","cmp","Sifter","items","settings","diacritics","tokenize","query","respect_word_boundaries","weights","tokens","words","field_regex","word","field_match","field","getScoreFunction","options","prepareSearch","_getScoreFunction","token_count","fields","field_count","getAttrFn","scoreObject","data","sum","conjunction","getSortFunction","_getSortFunction","implicit_score","sort_flds","sort_empty","bind","get_field","id","s","fld","direction","sort_fld","optsUser","assign","trim","total","nesting","fn_score","item","_","fn_sort","limit","iterate","getDom","jquery","HTMLElement","isHtmlString","tpl","document","createElement","innerHTML","content","firstChild","querySelector","arg","triggerEvent","dom_el","event_name","createEvent","initEvent","dispatchEvent","applyCSS","css","style","addClasses","elmts","classes","norm_classes","classesArray","castAsArray","el","cls","classList","removeClasses","remove","_classes","concat","parentMatch","target","selector","wrapper","contains","matches","parentNode","getTail","list","nodeIndex","amongst","nodeName","previousElementSibling","setAttr","attrs","val","attr","removeAttribute","setAttribute","replaceNode","existing","replacement","replaceChild","highlight","element","highlightRecursive","node","nodeType","spannode","className","middlebit","splitText","index","middleclone","cloneNode","appendChild","highlightText","childNodes","test","tagName","highlightChildren","KEY_SHORTCUT","navigator","userAgent","defaults","optgroups","plugins","delimiter","splitOn","persist","create","createOnBlur","createFilter","openOnFocus","shouldOpen","maxOptions","maxItems","hideSelected","duplicates","addPrecedence","selectOnTab","preload","allowEmptyOption","refreshThrottle","loadThrottle","loadingClass","dataAttr","optgroupField","valueField","labelField","disabledField","optgroupLabelField","optgroupValueField","lockOptgroupOrder","sortField","searchField","searchConjunction","mode","wrapperClass","controlClass","dropdownClass","dropdownContentClass","itemClass","optionClass","dropdownParent","controlInput","copyClassesToDropdown","placeholder","hidePlaceholder","shouldLoad","render","hash_key","get_hash","escape_html","loadDebounce","fn","delay","timeout","loading","clearTimeout","setTimeout","loadedSearches","call","debounce_events","types","type","event_args","preventDefault","evt","stop","stopPropagation","addEvent","addEventListener","isKeyDown","key_name","altKey","ctrlKey","shiftKey","metaKey","getId","getAttribute","addSlashes","append","parent","getSettings","settings_user","attr_data","field_label","field_value","field_disabled","field_optgroup","field_optgroup_label","field_optgroup_value","tag_name","option","textContent","settings_element","optionsMap","group_count","$order","readData","dataset","json","addOption","group","arr","option_data","disabled","$option","selected","hasAttribute","children","child","optgroup","optgroup_data","init_select","data_raw","opt","values","init_textbox","instance_i","TomSelect","Interface","super","requested","loaded","define","initializePlugins","queue","plugin","require","loadPlugin","Error","MicroPlugin","input_arg","user_settings","dir","control_input","dropdown","control","dropdown_content","focus_node","order","tabIndex","is_select_tag","rtl","inputId","_destroy","sifter","isOpen","isDisabled","isReadOnly","isRequired","isInvalid","isValid","isLocked","isFocused","isInputHidden","isSetup","ignoreFocus","ignoreHover","hasOptions","currentResults","lastValue","caretPos","activeOption","activeItems","userOptions","refreshTimeout","tomselect","window","getComputedStyle","getPropertyValue","required","setupCallbacks","setupTemplates","_render","inputMode","setup","passive_event","passive","listboxId","role","control_id","escapeQuery","label","label_click","focus","for","label_id","width","classes_plugins","multiple","load","e","target_match","onOptionHover","capture","onOptionSelect","onItemSelect","onClick","onKeyDown","onKeyPress","onInput","onBlur","onFocus","onPaste","doc_mousedown","composedPath","blur","inputState","win_scroll","positionDropdown","removeEventListener","revertSettings","insertAdjacentElement","sync","refreshState","updateOriginalInput","refreshItems","close","disable","readOnly","setReadOnly","enable","onChange","setupOptions","addOptions","registerOptionGroup","templates","escape","callbacks","get_settings","setValue","lastQuery","clearActiveItems","onMouseDown","pastedText","inputValue","splitInput","piece","addItem","createItem","character","keyCode","which","selectAll","open","next","getAdjacent","setActiveOption","prev","canSelect","activeElement","advanceSelection","deleteSelection","_onInput","refreshOptions","wasFocused","hasFocus","deactivate","setActiveItem","setCaret","parentElement","closeAfterSelect","canLoad","loadCallback","clearActiveOption","setTextboxValue","getValue","silent","clear","addItems","setMaxItems","eventName","begin","swap","getLastActive","prototype","setActiveItemClass","removeActiveItem","last_active","idx","scroll","scrollToOption","behavior","height_menu","clientHeight","scrollTop","height_item","offsetHeight","y","getBoundingClientRect","top","scrollBehavior","controlChildren","toggle","offsetWidth","getSearchOptions","calculateScore","hashed","triggerDropdown","k","html","has_create_option","active_group","groups","groups_order","same_query","results","active_option","show_dropdown","closest","getGroupFragment","group_order_i","order_group","fragment","group_fragment","createDocumentFragment","opt_value","opt_hash","option_el","getOption","includes","self_optgroup","$id","toString","elements","group_order","group_heading","group_options","header","group_html","querySelectorAll","tok","add_template","template","insertBefore","canCreate","active_index","selectable","user_created","dat","registerOption","addOptionGroup","hashed_id","removeOptionGroup","clearCache","clearOptionGroups","updateOption","item_new","index_item","value_old","value_new","data_old","getItem","uncacheValue","option_new","removeOption","removeItem","clearOptions","boundFilter","clearFilter","$div","last_item","x","isPending","wasFull","isFull","insertAtCaret","output","caret","lock","created","unlock","refreshValidityState","wrap_classList","validity","valid","opts","empty_option","has_selected","AddSelected","visibility","display","context","rect","scrollY","left","scrollX","selection","tail","selectionStart","selectionEnd","rm_items","rm_item","shouldDelete","onDelete","adjacent","nextElementSibling","moveCaret","new_pos","setLocked","setDisabled","destroy","templateName","hook","when","method","new_fn","orig_method","result_new","orig_onOptionSelect","cbOptions","checkedClassNames","uncheckedClassNames","UpdateChecked","checkbox","toCheck","checked","UpdateCheckbox","HTMLInputElement","orig_render_option","rendered","prepend","title","button","orig_lock","orig_unlock","drag_item","sortable","orig_render_item","dragOver","moveitem","targetitem","dragitem","referenceNode","newNode","_referenceNode$parent","_newNode","isBefore","nextSibling","_referenceNode$parent2","_drag_item","headerClass","titleRowClass","labelClass","closeClass","close_link","div","orig_onBlur","relatedTarget","preventScroll","test_input","cssText","style_name","resize","clientWidth","orig_deleteSelection","orig_keydown","previousSibling","close_button","text","orig_canLoad","orig_clearActiveOption","orig_loadCallback","load_more_opt","pagination","loading_more","default_values","shouldLoadMore","scrollHeight","firstUrl","canLoadMore","setNextUrl","next_url","getUrl","clearPagination","first_option","no_more_results","factory","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","d","definition","o","defineProperty","enumerable","get","prop","supportCustomEvent","CustomEvent","safeDispatchEvent","check","findNearestDialog","localName","host","safeBlur","shadowRoot","body","inNodeList","nodeList","isFormMethodDialog","findFocusableElementWithin","hostElement","Element","elems","isConnected","findFormSubmitter","submitter","HTMLFormElement","dialogPolyfill","formSubmitter","getRootNode","maybeHandleSubmit","defaultPrevented","imagemapUseValue","dialog","dialogPolyfillInfo","dialog_","replacedStyleTop_","openAsModal_","show","showModal","returnValue","MutationObserver","maybeHideModal","observe","attributes","attributeFilter","removed","cb","downgradeModal","delayModel","ev","cand","setOpen","backdrop_","backdropMouseEvent_","initCustomEvent","bubbles","cancelable","detail","Event","zIndex","removeChild","dm","removeDialog","fake","redirectedEvent","initMouseEvent","screenX","screenY","clientX","clientY","focus_","updateZIndex","dialogZ","backdropZ","pushDialog","invalid","ok","opacity","webkitOverflowScrolling","createsStackingContext","console","warn","needsCentering","reposition","opt_returnValue","closeEvent","documentElement","topValue","innerHeight","styleSheets","styleSheet","cssRules","rule","selectedNodes","selectorText","cssTop","cssBottom","bottom","isInlinePositionSetByStylesheet","HTMLDialogElement","forceRegisterDialog","pendingDialogStack","checkDOM","checkDOM_","overlay","forwardTab_","handleKey_","handleFocus_","zIndexLow_","zIndexHigh_","mo_","records","rec","c","removedNodes","DialogManager","blockDocument","childList","subtree","unblockDocument","disconnect","updateStacking","dpi","containedByTopDialog_","candidate","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","cancelEvent","allowed","testForm","methodDescriptor","getOwnPropertyDescriptor","realGet","realSet","v","offsetX","offsetY","nativeFormSubmit","submit","parser","DOMParser","Map","debug","linkClass","ignoreIndexes","observerConfig","observer","checkDialog","active","backdropClose","filterParentsSelector","fetching","links","allLinks","defaultLinkFilter","dialogs","m","init","Modals","log","link","clickHandler","caller","currentTarget","current","getDialog","err","errorHandler","uri","modalURI","Promise","resolve","reject","fetch","then","response","getDialogFromText","processDialog","registerDialog","catch","parseFromString","mutations","mutation","attributeName","bodyClickHandler","path","linkFilter","trace","location","href","msg","A11YTables","q","tables","tbl","A11YTable","table","stylesheet","ariaRoles","headers","th","innerText","addARIA","setRole","handleCell","cell","cellIndex","Accordion","summary","makeContent","animation","state","easing","getCustomProp","duration","convertDuration","startHeight","endHeight","defaultVal","propDecl","overflow","pointerEvents","nodes","isSameNode","height","requestAnimationFrame","expand","shrink","animate","cancel","onfinish","onAnimationFinish","oncancel","dur","parseFloat","parseInt","extend","src","ssrDocument","getElementById","getElementsByTagName","createElementNS","importNode","hash","hostname","origin","pathname","protocol","doc","ssrWindow","history","replaceState","pushState","go","back","Image","Date","screen","matchMedia","cancelAnimationFrame","win","Dom7","proto","__proto__","makeReactive","arrayFlat","res","arrayFilter","toCreate","tempParent","qsa","uniqueArray","arrayUnique","noTrigger","shortcut","Methods","addClass","classNames","removeClass","hasClass","toggleClass","attrName","removeAttr","transform","transition","transitionDuration","eventType","targetSelector","listener","handleLiveEvent","eventData","dom7EventData","is","parents","handleEvent","dom7LiveListeners","proxyListener","dom7Listeners","handlers","handler","dom7proxy","dataIndex","transitionEnd","dom","fireCallBack","outerWidth","includeMargins","styles","outerHeight","offset","box","clientTop","clientLeft","scrollLeft","props","each","compareWith","webkitMatchesSelector","msMatchesSelector","eq","returnIndex","els","newChild","tempDiv","nextAll","nextEls","prevAll","prevEls","find","foundElements","found","methodName","writable","now","to","noExtend","nextSource","keysArray","nextIndex","nextKey","desc","__swiper__","varName","varValue","setProperty","animateCSSModeScroll","swiper","targetPosition","side","startPosition","translate","time","startTime","params","speed","wrapperEl","scrollSnapType","cssModeFrameID","isOutOfBound","getTime","progress","easeProgress","cos","PI","currentPosition","scrollTo","support","deviceCached","browser","getSupport","smoothScroll","touch","DocumentTouch","passiveListener","supportsPassive","gestures","calcSupport","priority","eventsListeners","once","onceHandler","__emitterProxy","onAny","eventsAnyListeners","offAny","eventHandler","emit","updateSize","$el","isHorizontal","isVertical","Number","isNaN","updateSlides","getDirectionLabel","property","getDirectionPropertyValue","$wrapperEl","swiperSize","rtlTranslate","wrongRTL","isVirtual","virtual","enabled","previousSlidesLength","slides","slideClass","slidesLength","snapGrid","slidesGrid","slidesSizesGrid","offsetBefore","slidesOffsetBefore","offsetAfter","slidesOffsetAfter","previousSnapGridLength","previousSlidesGridLength","spaceBetween","slidePosition","prevSlideSize","virtualSize","marginLeft","marginBottom","marginTop","marginRight","centeredSlides","cssMode","gridEnabled","grid","rows","slideSize","initSlides","shouldResetSlideSize","slidesPerView","breakpoints","slide","updateSlide","slideStyles","currentTransform","currentWebKitTransform","webkitTransform","roundLengths","paddingLeft","paddingRight","boxSizing","floor","swiperSlideSize","abs","slidesPerGroup","slidesPerGroupSkip","effect","setWrapperSize","updateWrapperSize","newSlidesGrid","slidesGridItem","slideIndex","centeredSlidesBounds","allSlidesSize","slideSizeValue","maxSnap","snap","centerInsufficientSlides","allSlidesOffset","snapIndex","addToSnapGrid","addToSlidesGrid","watchOverflow","checkOverflow","watchSlidesProgress","updateSlidesOffset","updateAutoHeight","activeSlides","newHeight","setTransition","getSlideByIndex","visibleSlides","ceil","activeIndex","swiperSlideOffset","offsetLeft","offsetTop","updateSlidesProgress","offsetCenter","slideVisibleClass","visibleSlidesIndexes","slideOffset","slideProgress","minTranslate","originalSlideProgress","slideBefore","slideAfter","originalProgress","updateProgress","multiplier","translatesDiff","maxTranslate","isBeginning","isEnd","wasBeginning","wasEnd","autoHeight","updateSlidesClasses","realIndex","activeSlide","slideActiveClass","slideNextClass","slidePrevClass","slideDuplicateActiveClass","slideDuplicateNextClass","slideDuplicatePrevClass","loop","slideDuplicateClass","nextSlide","prevSlide","emitSlidesClasses","updateActiveIndex","newActiveIndex","previousIndex","previousRealIndex","previousSnapIndex","normalizeSlideIndex","skip","initialized","runCallbacksOnInit","updateClickedSlide","slideFound","clickedSlide","clickedIndex","slideToClickedSlide","transitionEmit","runCallbacks","step","slideTo","internal","initial","indexAsNumber","isFinite","animating","preventInteractionOnTransition","initialSlide","normalizedTranslate","normalizedGrid","normalizedGridNext","allowSlideNext","allowSlidePrev","setTranslate","transitionStart","isH","t","_immediateVirtual","_swiperImmediateVirtual","onSlideToWrapperTransitionEnd","destroyed","slideToLoop","newIndex","loopedSlides","slideNext","perGroup","slidesPerGroupAuto","slidesPerViewDynamic","increment","loopPreventsSlide","loopFix","_clientLeft","rewind","slidePrev","normalizedSnapGrid","prevSnap","prevSnapIndex","prevIndex","slideReset","slideToClosest","threshold","currentSnap","slideToIndex","loopCreate","$selector","loopFillGroupWithBlank","blankSlidesNum","blankNode","slideBlankClass","loopAdditionalSlides","prependSlides","appendSlides","diff","getTranslate","loopDestroy","onTouchStart","touchEventsData","touches","originalEvent","$targetEl","touchEventsTarget","isTouchEvent","isTouched","isMoved","noSwipingClass","noSwipingSelector","isTargetShadow","noSwiping","base","__closestFrom","assignedSlot","closestElement","allowClick","swipeHandler","currentX","targetTouches","pageX","currentY","pageY","startX","startY","edgeSwipeDetection","iOSEdgeSwipeDetection","edgeSwipeThreshold","iOSEdgeSwipeThreshold","innerWidth","allowTouchCallbacks","isScrolling","startMoving","touchStartTime","swipeDirection","allowThresholdMove","focusableElements","shouldPreventDefault","allowTouchMove","touchStartPreventDefault","touchStartForcePreventDefault","isContentEditable","onTouchMove","targetTouch","changedTouches","preventedByNestedSwiper","touchReleaseOnEdges","diffX","diffY","sqrt","touchAngle","atan2","touchMoveStopPropagation","nested","startTranslate","allowMomentumBounce","grabCursor","setGrabCursor","touchRatio","currentTranslate","disableParentSwiper","resistanceRatio","resistance","followFinger","freeMode","onTouchEnd","touchEndTime","timeDiff","pathTree","lastClickTime","currentPos","stopIndex","groupSize","ratio","longSwipesMs","longSwipes","longSwipesRatio","shortSwipes","navigation","nextEl","prevEl","onResize","setBreakpoint","autoplay","running","paused","run","preventClicks","preventClicksPropagation","stopImmediatePropagation","onScroll","newProgress","previousTranslate","dummyEventAttached","dummyEventListener","touchEvents","device","domMethod","swiperMethod","passiveListeners","move","updateOnWindowResize","ios","android","attachEvents","detachEvents","isGridEnabled","suffixes","entries","prefix","resultClasses","prepareClasses","fill","containerModifierClass","emitContainerClasses","resizeObserver","createElements","url","virtualTranslate","breakpointsBase","simulateTouch","uniqueNavElements","preloadImages","updateOnImagesReady","_emitClasses","moduleExtendParams","allModulesParams","moduleParamName","moduleParams","auto","prototypes","eventsEmitter","update","axis","matrix","curTransform","transformMatrix","curStyle","currentStyle","WebKitCSSMatrix","MozTransform","OTransform","MsTransform","msTransform","m41","m42","byController","translateTo","translateBounds","newTranslate","onTranslateToWrapperTransitionEnd","moving","cursor","unsetGrabCursor","breakpoint","getBreakpoint","currentBreakpoint","breakpointParams","originalParams","wasMultiRow","isMultiRow","wasEnabled","directionChanged","needsReLoop","changeDirection","isEnabled","containerEl","currentHeight","points","point","minRatio","wasLocked","lastSlideIndex","lastSlideRightEdge","images","loadImage","imageEl","srcset","sizes","checkForComplete","image","onReady","complete","onload","onerror","imagesLoaded","imagesToLoad","currentSrc","extendedDefaults","Swiper","swipers","newParams","overrides","platform","ua","screenWidth","screenHeight","ipad","ipod","iphone","windows","macos","os","calcDevice","getDevice","isSafari","isWebView","calcBrowser","modules","__modules__","mod","extendParams","swiperParams","passedParams","$","velocity","desktop","touchEventsTouch","touchEventsDesktop","clickTimeout","velocities","setProgress","getSlideClasses","slideEl","updates","view","exact","spv","breakLoop","translateValue","translated","newDirection","needUpdate","currentDirection","mount","mounted","getWrapperSelector","getWrapper","deleteInstance","cleanStyles","deleteProps","extendDefaults","newDefaults","installModule","use","prototypeGroup","protoMethod","resizeHandler","orientationChangeHandler","ResizeObserver","newWidth","contentBoxSize","contentRect","inlineSize","blockSize","unobserve","observers","attach","WebkitMutationObserver","observerUpdate","characterData","observeParents","observeSlideChildren","containerParents","Navigation","getEl","toggleEl","disabledClass","lockClass","$nextEl","$prevEl","onPrevClick","onNextClick","checkProps","hideOnClick","hiddenClass","_s","targetEl","clickable","isHidden","docId","isIndex","entity","gallery","cfg","bc","divClass","makeHomepageGallery","accessibleTables","ctr","makeA11YTables","ent","modals","makeModals","thing","remove_button","advancedForm","sel","makeBetterSelects"],"sourceRoot":""}